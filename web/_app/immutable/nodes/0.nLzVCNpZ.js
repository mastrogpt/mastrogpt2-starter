import{c as N,a as d,n as aa,t as E,b as ua}from"../chunks/CdDPiiAq.js";import{f as M,p as Kt,c as m,r as v,t as W,a as Wt,U as K,b as l,g as e,aN as ee,X as re,aO as $a,s as S,az as Ia,ao as Ne,Y as vt,d as ze,u as Pa,n as Ot,aP as Ba}from"../chunks/D-pOCGrB.js";import{q as za,e as Ae,s as qt,a as He,m as ka,b as ha,t as La}from"../chunks/C7Sj3pvE.js";import{s as Re,a as Ca}from"../chunks/Bk0HBIAK.js";import{a as H,i as k,l as Qe,b as fa,s as Xe,r as Fa,p as se}from"../chunks/BQO_n1VV.js";import{s as Ra}from"../chunks/C1KEPHhz.js";import{c as Lt}from"../chunks/lawJfYCt.js";import{j as Vt,k as ma,b as R,l as St,c as ge,f as Na,I as mt,m as Zt,n as da,o as ca,a as Aa,p as Ha,q as Ua,r as ja,d as va,u as Oa,t as _a,v as Va}from"../chunks/BOuXRh5W.js";import{p as Pt}from"../chunks/mjFDj5b9.js";import{i as pa}from"../chunks/DSqHHXr2.js";import{o as na,a as Ka}from"../chunks/DRGPvr98.js";import{u as Wa,a as Ta,c as Bt,I as qa}from"../chunks/BVZ3fOE9.js";import{s as xt,X as Yt}from"../chunks/BErFdL9F.js";import{g as ga,d as Sa,w as pt}from"../chunks/DYinvJOT.js";import{F as Qt,S as Xa,a as Ga}from"../chunks/uSosHiRd.js";import{b as Za,B as Ya}from"../chunks/DUwxQESZ.js";import{U as Qa,M as Ja,v as en,L as Jt}from"../chunks/DRxmCpUh.js";function ft(n,t,r,f){var p=n.__styles??(n.__styles={});p[t]!==r&&(p[t]=r,r==null?n.style.removeProperty(t):n.style.setProperty(t,r,""))}var tn=aa('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" height="20" width="20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z" clip-rule="evenodd"></path></svg>'),an=aa('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" height="20" width="20"><path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z" clip-rule="evenodd"></path></svg>'),nn=aa('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" height="20" width="20"><path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z" clip-rule="evenodd"></path></svg>'),on=aa('<svg viewBox="0 0 64 64" fill="currentColor" height="20" width="20" xmlns="http://www.w3.org/2000/svg"><path d="M32.427,7.987c2.183,0.124 4,1.165 5.096,3.281l17.936,36.208c1.739,3.66 -0.954,8.585 -5.373,8.656l-36.119,0c-4.022,-0.064 -7.322,-4.631 -5.352,-8.696l18.271,-36.207c0.342,-0.65 0.498,-0.838 0.793,-1.179c1.186,-1.375 2.483,-2.111 4.748,-2.063Zm-0.295,3.997c-0.687,0.034 -1.316,0.419 -1.659,1.017c-6.312,11.979 -12.397,24.081 -18.301,36.267c-0.546,1.225 0.391,2.797 1.762,2.863c12.06,0.195 24.125,0.195 36.185,0c1.325,-0.064 2.321,-1.584 1.769,-2.85c-5.793,-12.184 -11.765,-24.286 -17.966,-36.267c-0.366,-0.651 -0.903,-1.042 -1.79,-1.03Z"></path><path d="M33.631,40.581l-3.348,0l-0.368,-16.449l4.1,0l-0.384,16.449Zm-3.828,5.03c0,-0.609 0.197,-1.113 0.592,-1.514c0.396,-0.4 0.935,-0.601 1.618,-0.601c0.684,0 1.223,0.201 1.618,0.601c0.395,0.401 0.593,0.905 0.593,1.514c0,0.587 -0.193,1.078 -0.577,1.473c-0.385,0.395 -0.929,0.593 -1.634,0.593c-0.705,0 -1.249,-0.198 -1.634,-0.593c-0.384,-0.395 -0.576,-0.886 -0.576,-1.473Z"></path></svg>');function ea(n,t){let r=H(t,"type",8,"success");var f=N(),p=M(f);{var D=h=>{var B=tn();d(h,B)},c=h=>{var B=N(),O=M(B);{var G=z=>{var fe=an();d(z,fe)},Z=z=>{var fe=N(),te=M(fe);{var ie=le=>{var de=nn();d(le,de)},ke=le=>{var de=N(),X=M(de);{var Ue=Te=>{var st=on();d(Te,st)},Ee=Te=>{};k(X,Te=>{r()==="warning"?Te(Ue):Te(Ee,!1)},!0)}d(le,de)};k(te,le=>{r()==="info"?le(ie):le(ke,!1)},!0)}d(z,fe)};k(O,z=>{r()==="error"?z(G):z(Z,!1)},!0)}d(h,B)};k(p,h=>{r()==="success"?h(D):h(c,!1)})}d(n,f)}var rn=E('<div class="sonner-loading-bar"></div>'),sn=E('<div class="sonner-loading-wrapper"><div class="sonner-spinner"></div></div>');function ln(n,t){Kt(t,!1);let r=H(t,"visible",8);const f=Array(12).fill(0);pa();var p=sn(),D=m(p);Vt(D,5,()=>f,ma,(c,h)=>{var B=rn();d(c,B)}),v(D),v(p),W(()=>R(p,"data-visible",r())),d(n,p),Wt()}var dn=E('<button aria-label="Close toast" data-close-button=""><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg></button>'),cn=E('<div data-icon=""><!> <!></div>'),un=E('<div data-title=""><!></div>'),vn=E('<div data-description=""><!></div>'),fn=E('<button data-button="" data-cancel=""> </button>'),mn=E('<button data-button=""> </button>'),pn=E('<!> <div data-content=""><!> <!></div> <!> <!>',1),gn=E('<li aria-atomic="true" role="status" data-sonner-toast=""><!> <!></li>');function hn(n,t){const r=Qe(t,["children","$$slots","$$events","$$legacy"]);Kt(t,!1);const[f,p]=qt(),D=()=>He(Ge,"$heights",f),c=()=>He(e(kt),"$effect",f),h=()=>He(Le,"$toasts",f),B=K(void 0,!0),O=K(void 0,!0),G=K(void 0,!0),Z=K(void 0,!0),z=K(void 0,!0),fe=K(void 0,!0),te=K(void 0,!0),ie=K(void 0,!0),ke=K(void 0,!0),le=K(void 0,!0),de=K(void 0,!0),X=K(void 0,!0),Ue=4e3,Ee=14,Te=20,st=200,A=.05,U={toast:"",title:"",description:"",loader:"",closeButton:"",cancelButton:"",actionButton:"",action:"",warning:"",error:"",success:"",default:"",info:"",loading:""},{toasts:Le,heights:Ge,removeHeight:V,setHeight:xe,remove:Ze}=Ta;let s=H(t,"toast",9),De=H(t,"index",9),je=H(t,"expanded",9),ue=H(t,"invert",13),Ye=H(t,"position",9),Oe=H(t,"visibleToasts",9),Je=H(t,"expandByDefault",9),Ve=H(t,"closeButton",9),he=H(t,"interacting",9),Ct=H(t,"cancelButtonStyle",9,""),Ft=H(t,"actionButtonStyle",9,""),it=H(t,"duration",9,4e3),Mt=H(t,"descriptionClass",9,""),me=H(t,"classes",29,()=>({})),F=H(t,"unstyled",9,!1),ae=K(!1,!0),Ce=K(!1,!0),Ke=K(!1,!0),we=K(!1,!0),We=K(0,!0),Y=K(0,!0),Ie=K(void 0,!0),gt=K(0,!0),_e=0,$t=0,Pe=null;async function Rt(){if(!e(ae))return;await Ia();let y;je()||Je()?y=1:y=1-De()*A,e(Ie).style.setProperty("height","auto");const j=e(Ie).offsetHeight,ce=e(Ie).getBoundingClientRect().height,oe=Math.round((ce/y+Number.EPSILON)*100)/100;e(Ie).style.removeProperty("height");let Q;Math.abs(oe-j)<1?Q=oe:Q=j,l(Y,Q),xe({toastId:s().id,height:Q})}function qe(){l(Ce,!0),l(We,e(gt)),V(s().id),setTimeout(()=>{Ze(s().id)},st)}let ot=K(void 0,!0),lt=K(s().duration||it()||Ue,!0);function Et(){if($t<_e){const y=new Date().getTime()-_e;l(lt,e(lt)-y)}$t=new Date().getTime()}function Dt(){_e=new Date().getTime(),l(ot,setTimeout(()=>{var y,j;(j=(y=s()).onAutoClose)==null||j.call(y,s()),qe()},e(lt)))}let kt=K(void 0,!0);na(()=>{l(ae,!0);const y=e(Ie).getBoundingClientRect().height;return l(Y,y),xe({toastId:s().id,height:y}),()=>V(s().id)});function q(y){if(e(de))return;l(We,e(gt));const j=y.target;j.setPointerCapture(y.pointerId),j.tagName!=="BUTTON"&&(l(Ke,!0),Pe={x:y.clientX,y:y.clientY})}function ht(){var j,ce,oe;if(e(we))return;Pe=null;const y=Number(((j=e(Ie))==null?void 0:j.style.getPropertyValue("--swipe-amount").replace("px",""))||0);if(Math.abs(y)>=Te){l(We,e(gt)),(oe=(ce=s()).onDismiss)==null||oe.call(ce,s()),qe(),l(we,!0);return}e(Ie).style.setProperty("--swipe-amount","0px"),l(Ke,!1)}function ye(y){if(!Pe)return;const j=y.clientY-Pe.y,ce=y.clientX-Pe.x,Q=(e(ke)[0]==="top"?Math.min:Math.max)(0,j),pe=y.pointerType==="touch"?10:2;Math.abs(Q)>pe?e(Ie).style.setProperty("--swipe-amount",`${j}px`):Math.abs(ce)>pe&&(Pe=null)}ee(()=>re(me()),()=>{me({...U,...me()})}),ee(()=>re(De()),()=>{l(B,De()===0)}),ee(()=>(re(De()),re(Oe())),()=>{l(O,De()+1<=Oe())}),ee(()=>re(s()),()=>{l(G,s().title)}),ee(()=>re(s()),()=>{l(Z,s().description)}),ee(()=>re(s()),()=>{l(z,s().type)}),ee(()=>re(s()),()=>{l(fe,s().class||"")}),ee(()=>re(s()),()=>{l(te,s().descriptionClass||"")}),ee(()=>(D(),re(s())),()=>{l(ie,D().findIndex(y=>y.toastId===s().id)||0)}),ee(()=>re(Ye()),()=>{l(ke,Ye().split("-"))}),ee(()=>(D(),e(ie)),()=>{l(le,D().reduce((y,j,ce)=>ce>=e(ie)?y:y+j.height,0))}),ee(()=>(re(ue()),re(s())),()=>{ue(s().invert||ue())}),ee(()=>e(z),()=>{l(de,e(z)==="loading")}),ee(()=>(e(ie),e(le)),()=>{l(gt,Math.round(e(ie)*Ee+e(le)))}),ee(()=>(e(G),e(Z)),()=>{e(G),e(Z),Rt()}),ee(()=>(re(s()),e(ot),re(it())),()=>{s().updated&&(clearTimeout(e(ot)),l(lt,s().duration||it()||Ue),Dt())}),ee(()=>(re(s()),e(z)),()=>{l(X,s().promise&&e(z)==="loading"||s().duration===Number.POSITIVE_INFINITY)}),ee(()=>(e(X),re(je()),re(he()),e(ot)),()=>{za(l(kt,Wa(()=>(e(X)||(je()||he()?Et():Dt()),()=>clearTimeout(e(ot))))),"$effect",f)}),ee(()=>c(),()=>{c()}),ee(()=>re(s()),()=>{s().delete&&qe()}),$a(),pa(!0);var $=gn();R($,"tabindex",0);const Fe=Ne(()=>{var y,j,ce,oe,Q,pe;return St(Bt(r.class,e(fe),(y=me())==null?void 0:y.toast,(ce=(j=s())==null?void 0:j.classes)==null?void 0:ce.toast,(oe=me())==null?void 0:oe[e(z)],(pe=(Q=s())==null?void 0:Q.classes)==null?void 0:pe[e(z)]))});W(()=>R($,"data-promise",!!s().promise)),W(()=>R($,"data-expanded",!!(je()||Je()&&e(ae))));var It=m($);{var oa=y=>{var j=dn(),ce=vt(()=>e(de)?void 0:()=>{var Q,pe;qe(),(pe=(Q=s()).onDismiss)==null||pe.call(Q,s())});const oe=Ne(()=>{var Q,pe,Tt;return St(Bt((Q=me())==null?void 0:Q.closeButton,(Tt=(pe=s())==null?void 0:pe.classes)==null?void 0:Tt.closeButton))});W(()=>{R(j,"data-disabled",e(de)),xt(j,e(oe))}),Ae("click",j,function(...Q){var pe;(pe=e(ce))==null||pe.apply(this,Q)}),d(y,j)};k(It,y=>{Ve()&&!s().component&&y(oa)})}var ra=S(It,2);{var Xt=y=>{var j=N(),ce=M(j);Lt(ce,()=>s().component,(oe,Q)=>{Q(oe,Xe(()=>s().componentProps,{$$events:{closeToast:qe}}))}),d(y,j)},Gt=y=>{var j=pn(),ce=M(j);{var oe=x=>{var b=cn(),w=m(b);{var u=T=>{var J=N(),Se=M(J);ge(Se,t,"loading-icon",{},null),d(T,J)};k(w,T=>{(s().promise||e(z)==="loading")&&!s().icon&&T(u)})}var L=S(w,2);{var ne=T=>{var J=N(),Se=M(J);Lt(Se,()=>s().icon,(Be,et)=>{et(Be,{})}),d(T,J)},I=T=>{var J=N(),Se=M(J);{var Be=tt=>{var be=N(),Me=M(be);ge(Me,t,"success-icon",{},null),d(tt,be)},et=tt=>{var be=N(),Me=M(be);{var rt=at=>{var $e=N(),nt=M($e);ge(nt,t,"error-icon",{},null),d(at,$e)},_t=at=>{var $e=N(),nt=M($e);{var Nt=dt=>{var yt=N(),At=M(yt);ge(At,t,"warning-icon",{},null),d(dt,yt)},ia=dt=>{var yt=N(),At=M(yt);{var la=Ht=>{var C=N(),P=M(C);ge(P,t,"info-icon",{},null),d(Ht,C)};k(At,Ht=>{e(z)==="info"&&Ht(la)},!0)}d(dt,yt)};k(nt,dt=>{e(z)==="warning"?dt(Nt):dt(ia,!1)},!0)}d(at,$e)};k(Me,at=>{e(z)==="error"?at(rt):at(_t,!1)},!0)}d(tt,be)};k(Se,tt=>{e(z)==="success"?tt(Be):tt(et,!1)},!0)}d(T,J)};k(L,T=>{s().icon?T(ne):T(I,!1)})}v(b),d(x,b)};k(ce,x=>{(e(z)!=="default"||s().icon||s().promise)&&x(oe)})}var Q=S(ce,2),pe=m(Q);{var Tt=x=>{var b=un();const w=Ne(()=>{var I,T,J;return St(Bt((I=me())==null?void 0:I.title,(J=(T=s())==null?void 0:T.classes)==null?void 0:J.title))});var u=m(b);{var L=I=>{var T=N(),J=M(T);Lt(J,()=>s().title,(Se,Be)=>{Be(Se,Xe(()=>s().componentProps))}),d(I,T)},ne=I=>{var T=ua();W(()=>Re(T,s().title)),d(I,T)};k(u,I=>{typeof s().title!="string"?I(L):I(ne,!1)})}v(b),W(()=>xt(b,e(w))),d(x,b)};k(pe,x=>{s().title&&x(Tt)})}var sa=S(pe,2);{var a=x=>{var b=vn();const w=Ne(()=>{var I,T;return St(Bt(Mt(),e(te),(I=me())==null?void 0:I.description,(T=s().classes)==null?void 0:T.description))});var u=m(b);{var L=I=>{var T=N(),J=M(T);Lt(J,()=>s().description,(Se,Be)=>{Be(Se,Xe(()=>s().componentProps))}),d(I,T)},ne=I=>{var T=ua();W(()=>Re(T,s().description)),d(I,T)};k(u,I=>{typeof s().description!="string"?I(L):I(ne,!1)})}v(b),W(()=>xt(b,e(w))),d(x,b)};k(sa,x=>{s().description&&x(a)})}v(Q);var o=S(Q,2);{var i=x=>{var b=fn();const w=Ne(()=>{var L,ne,I;return St(Bt((L=me())==null?void 0:L.cancelButton,(I=(ne=s())==null?void 0:ne.classes)==null?void 0:I.cancelButton))});var u=m(b,!0);v(b),W(()=>{R(b,"style",Ct()),xt(b,e(w)),Re(u,s().cancel.label)}),Ae("click",b,()=>{var L;qe(),(L=s().cancel)!=null&&L.onClick&&s().cancel.onClick()}),d(x,b)};k(o,x=>{s().cancel&&x(i)})}var g=S(o,2);{var _=x=>{var b=mn();const w=Ne(()=>{var L,ne,I;return St(Bt((L=me())==null?void 0:L.actionButton,(I=(ne=s())==null?void 0:ne.classes)==null?void 0:I.actionButton))});var u=m(b,!0);v(b),W(()=>{R(b,"style",Ft()),xt(b,e(w)),Re(u,s().action.label)}),Ae("click",b,L=>{var ne;(ne=s().action)==null||ne.onClick(L),!L.defaultPrevented&&qe()}),d(x,b)};k(g,x=>{s().action&&x(_)})}d(y,j)};k(ra,y=>{s().component?y(Xt):y(Gt,!1)})}v($),fa($,y=>l(Ie,y),()=>e(Ie)),W(()=>{var y;R($,"aria-live",s().important?"assertive":"polite"),xt($,e(Fe)),R($,"data-styled",!(s().component||(y=s())!=null&&y.unstyled||F())),R($,"data-mounted",e(ae)),R($,"data-removed",e(Ce)),R($,"data-visible",e(O)),R($,"data-y-position",e(ke)[0]),R($,"data-x-position",e(ke)[1]),R($,"data-index",De()),R($,"data-front",e(B)),R($,"data-swiping",e(Ke)),R($,"data-type",e(z)),R($,"data-invert",ue()),R($,"data-swipe-out",e(we)),R($,"style",`${r.style} ${s().style}`),ft($,"--index",De()),ft($,"--toasts-before",De()),ft($,"--z-index",h().length-De()),ft($,"--offset",`${e(Ce)?e(We):e(gt)}px`),ft($,"--initial-height",`${e(Y)}px`)}),Ae("pointerdown",$,q),Ae("pointerup",$,ht),Ae("pointermove",$,ye),d(n,$),Wt(),p()}var _n=E("<ol></ol>"),yn=E('<section class="svelte-1fo5d1m"></section>');function bn(n,t){const r=Qe(t,["children","$$slots","$$events","$$legacy"]),f=Qe(r,["invert","theme","position","hotkey","containerAriaLabel","richColors","expand","duration","visibleToasts","closeButton","toastOptions","offset","dir"]);Kt(t,!1);const[p,D]=qt(),c=()=>He(s,"$toasts",p),h=()=>He(De,"$heights",p),B=K(),O=K(),G=3,Z="32px",z=356,fe=14,te="dark",ie="light";function ke(F){return F!=="system"?F:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?te:ie}function le(){if(typeof window>"u"||typeof document>"u")return"ltr";const F=document.documentElement.getAttribute("dir");return F==="auto"||!F?window.getComputedStyle(document.documentElement).direction:F}let de=H(t,"invert",8,!1),X=H(t,"theme",8,"light"),Ue=H(t,"position",8,"bottom-right"),Ee=H(t,"hotkey",24,()=>["altKey","KeyT"]),Te=H(t,"containerAriaLabel",8,"Notifications"),st=H(t,"richColors",8,!1),A=H(t,"expand",8,!1),U=H(t,"duration",8,4e3),Le=H(t,"visibleToasts",8,G),Ge=H(t,"closeButton",8,!1),V=H(t,"toastOptions",24,()=>({})),xe=H(t,"offset",8,null),Ze=H(t,"dir",24,le);const{toasts:s,heights:De,reset:je}=Ta;let ue=K(!1),Ye=K(!1),Oe=K(ke(X())),Je=K(),Ve=null,he=!1;Ka(()=>{e(Je)&&Ve&&(Ve.focus({preventScroll:!0}),Ve=null,he=!1)}),na(()=>{je();const F=ae=>{var Ke,we;Ee().every(We=>ae[We]||ae.code===We)&&(l(ue,!0),(Ke=e(Je))==null||Ke.focus()),ae.code==="Escape"&&(document.activeElement===e(Je)||(we=e(Je))!=null&&we.contains(document.activeElement))&&l(ue,!1)};return document.addEventListener("keydown",F),()=>{document.removeEventListener("keydown",F)}});function Ct(F){he&&!F.currentTarget.contains(F.relatedTarget)&&(he=!1,Ve&&(Ve.focus({preventScroll:!0}),Ve=null))}function Ft(F){he||(he=!0,Ve=F.relatedTarget)}ee(()=>(re(Ue()),c()),()=>{l(B,Array.from(new Set([Ue(),...c().filter(F=>F.position).map(F=>F.position)].filter(Boolean))))}),ee(()=>re(Ee()),()=>{l(O,Ee().join("+").replace(/Key/g,"").replace(/Digit/g,""))}),ee(()=>c(),()=>{c().length<=1&&l(ue,!1)}),ee(()=>c(),()=>{const F=c().filter(ae=>ae.dismiss&&!ae.delete);if(F.length>0){const ae=c().map(Ce=>F.find(we=>we.id===Ce.id)?{...Ce,delete:!0}:Ce);s.set(ae)}}),ee(()=>re(X()),()=>{if(X()!=="system"&&l(Oe,X()),typeof window<"u"){X()==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?l(Oe,te):l(Oe,ie));const F=window.matchMedia("(prefers-color-scheme: dark)"),ae=({matches:Ce})=>{l(Oe,Ce?te:ie)};"addEventListener"in F?F.addEventListener("change",ae):F.addListener(ae)}}),$a(),pa();var it=N(),Mt=M(it);{var me=F=>{var ae=yn();R(ae,"tabindex",-1),Vt(ae,5,()=>e(B),ma,(Ke,we,We)=>{var Y=_n();let Ie;Vt(Y,7,()=>c().filter(_e=>!_e.position&&We===0||_e.position===e(we)),_e=>_e.id,(_e,$t,Pe)=>{var Rt=Ne(()=>{var q;return((q=V())==null?void 0:q.actionButtonStyle)||""}),qe=Ne(()=>{var q;return((q=V())==null?void 0:q.cancelButtonStyle)||""}),ot=Ne(()=>{var q;return((q=V())==null?void 0:q.class)||""}),lt=Ne(()=>{var q;return((q=V())==null?void 0:q.descriptionClass)||""}),Et=Ne(()=>V().classes||{}),Dt=Ne(()=>{var q;return((q=V())==null?void 0:q.duration)??U()}),kt=Ne(()=>V().unstyled||!1);hn(_e,{get index(){return e(Pe)},get toast(){return e($t)},get invert(){return de()},get visibleToasts(){return Le()},get closeButton(){return Ge()},get interacting(){return e(Ye)},get position(){return e(we)},get expandByDefault(){return A()},get expanded(){return e(ue)},get actionButtonStyle(){return e(Rt)},get cancelButtonStyle(){return e(qe)},get class(){return e(ot)},get descriptionClass(){return e(lt)},get classes(){return e(Et)},get duration(){return e(Dt)},get unstyled(){return e(kt)},$$slots:{"loading-icon":(q,ht)=>{var ye=N(),$=M(ye);ge($,t,"loading-icon",{},Fe=>{var It=Ne(()=>e($t).type==="loading");ln(Fe,{get visible(){return e(It)}})}),d(q,ye)},"success-icon":(q,ht)=>{var ye=N(),$=M(ye);ge($,t,"success-icon",{},Fe=>{ea(Fe,{type:"success"})}),d(q,ye)},"error-icon":(q,ht)=>{var ye=N(),$=M(ye);ge($,t,"error-icon",{},Fe=>{ea(Fe,{type:"error"})}),d(q,ye)},"warning-icon":(q,ht)=>{var ye=N(),$=M(ye);ge($,t,"warning-icon",{},Fe=>{ea(Fe,{type:"warning"})}),d(q,ye)},"info-icon":(q,ht)=>{var ye=N(),$=M(ye);ge($,t,"info-icon",{},Fe=>{ea(Fe,{type:"info"})}),d(q,ye)}}})}),v(Y),fa(Y,_e=>l(Je,_e),()=>e(Je)),W(()=>{var _e;Ie=Na(Y,Ie,{tabIndex:-1,class:r.class,"data-sonner-toaster":!0,"data-theme":e(Oe),"data-rich-colors":st(),dir:Ze()==="auto"?le():Ze(),"data-y-position":e(we).split("-")[0],"data-x-position":e(we).split("-")[1],style:r.style,...f},"svelte-1fo5d1m"),ft(Y,"--front-toast-height",`${(_e=h()[0])==null?void 0:_e.height}px`),ft(Y,"--offset",typeof xe()=="number"?`${xe()}px`:xe()||Z),ft(Y,"--width",`${z}px`),ft(Y,"--gap",`${fe}px`),Y.dir=Y.dir}),Ae("blur",Y,Ct),Ae("focus",Y,Ft),Ae("mouseenter",Y,()=>l(ue,!0)),Ae("mousemove",Y,()=>l(ue,!0)),Ae("mouseleave",Y,()=>{e(Ye)||l(ue,!1)}),Ae("pointerdown",Y,()=>l(Ye,!0)),Ae("pointerup",Y,()=>l(Ye,!1)),d(Ke,Y)}),v(ae),W(()=>R(ae,"aria-label",`${Te()} ${e(O)}`)),d(F,ae)};k(Mt,F=>{c().length>0&&F(me)})}d(n,it),Wt(),D()}let ya,ba;function Ma(n){if(typeof document>"u")return;clearTimeout(ya),clearTimeout(ba);const t=document.createElement("style"),r=document.createTextNode(`* {
     -webkit-transition: none !important;
     -moz-transition: none !important;
     -o-transition: none !important;
     -ms-transition: none !important;
     transition: none !important;
  }`);t.appendChild(r);const f=()=>document.head.appendChild(t),p=()=>document.head.removeChild(t);if(typeof window.getComputedStyle<"u"){f(),n(),window.getComputedStyle(t).opacity,p();return}if(typeof window.requestAnimationFrame<"u"){f(),n(),window.requestAnimationFrame(p);return}f(),ya=window.setTimeout(()=>{n(),ba=window.setTimeout(p,120)},120)}function xa(n){return n.filter(t=>t.length>0)}const Ea={getItem:n=>null,setItem:(n,t)=>{}},wt=typeof document<"u",xn=["dark","light","system"],wn=pt("mode-watcher-mode"),$n=pt("mode-watcher-theme"),kn=Pn(),Tn=zn(),Sn=pt(void 0),Mn=Bn(),Da=pt(!0),En=pt([]),Dn=pt([]),In=Ln();Cn();function Pn(){const n="system",t=wt?localStorage:Ea,r=t.getItem(p());let f=wa(r)?r:n;function p(){return ga(wn)}const{subscribe:D,set:c}=pt(f,()=>{if(!wt)return;const B=O=>{if(O.key!==p())return;const G=O.newValue;wa(G)?c(f=G):c(f=n)};return addEventListener("storage",B),()=>removeEventListener("storage",B)});function h(B){c(f=B),t.setItem(p(),f)}return{subscribe:D,set:h}}function Bn(){const n=wt?localStorage:Ea,t=n.getItem(f());let r=t??"";function f(){return ga($n)}const{subscribe:p,set:D}=pt(r,()=>{if(!wt)return;const h=B=>{if(B.key!==f())return;const O=B.newValue;D(O===null?r="":r=O)};return addEventListener("storage",h),()=>removeEventListener("storage",h)});function c(h){D(r=h),n.setItem(f(),r)}return{subscribe:p,set:c}}function zn(){let t=!0;const{subscribe:r,set:f}=pt(void 0,()=>{if(!wt)return;const c=B=>{t&&f(B.matches?"light":"dark")},h=window.matchMedia("(prefers-color-scheme: light)");return h.addEventListener("change",c),()=>h.removeEventListener("change",c)});function p(){if(!wt)return;const c=window.matchMedia("(prefers-color-scheme: light)");f(c.matches?"light":"dark")}function D(c){t=c}return{subscribe:r,query:p,tracking:D}}function Ln(){const{subscribe:n}=Sa([kn,Tn,Sn,Da,En,Dn],([t,r,f,p,D,c])=>{if(!wt)return;const h=t==="system"?r:t,B=xa(D),O=xa(c);function G(){const Z=document.documentElement,z=document.querySelector('meta[name="theme-color"]');h==="light"?(B.length&&Z.classList.remove(...B),O.length&&Z.classList.add(...O),Z.style.colorScheme="light",z&&f&&z.setAttribute("content",f.light)):(O.length&&Z.classList.remove(...O),B.length&&Z.classList.add(...B),Z.style.colorScheme="dark",z&&f&&z.setAttribute("content",f.dark))}return p?Ma(G):G(),h});return{subscribe:n}}function Cn(){const{subscribe:n}=Sa([Mn,Da],([t,r])=>{if(!wt)return;function f(){document.documentElement.setAttribute("data-theme",t)}return r?Ma(f):f(),t});return{subscribe:n}}function wa(n){return typeof n!="string"?!1:xn.includes(n)}function Fn(n,t){const[r,f]=qt(),p=()=>He(In,"$mode",r);let D=Fa(t,["$$slots","$$events","$$legacy"]);bn(n,Xe({get theme(){return p()},class:"toaster group",toastOptions:{classes:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}}},()=>D)),f()}function Rn(n,t){const r=Qe(t,["children","$$slots","$$events","$$legacy"]);mt(n,Xe({name:"download"},()=>r,{iconNode:[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}],["polyline",{points:"7 10 12 15 17 10"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3"}]],children:(p,D)=>{var c=N(),h=M(c);ge(h,t,"default",{},null),d(p,c)},$$slots:{default:!0}}))}function jt(n,t){const r=Qe(t,["children","$$slots","$$events","$$legacy"]);mt(n,Xe({name:"file-archive"},()=>r,{iconNode:[["path",{d:"M10 12v-1"}],["path",{d:"M10 18v-2"}],["path",{d:"M10 7V6"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4"}],["path",{d:"M15.5 22H18a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v16a2 2 0 0 0 .274 1.01"}],["circle",{cx:"10",cy:"20",r:"2"}]],children:(p,D)=>{var c=N(),h=M(c);ge(h,t,"default",{},null),d(p,c)},$$slots:{default:!0}}))}function ut(n,t){const r=Qe(t,["children","$$slots","$$events","$$legacy"]);mt(n,Xe({name:"file-code"},()=>r,{iconNode:[["path",{d:"M10 12.5 8 15l2 2.5"}],["path",{d:"m14 12.5 2 2.5-2 2.5"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4"}],["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7z"}]],children:(p,D)=>{var c=N(),h=M(c);ge(h,t,"default",{},null),d(p,c)},$$slots:{default:!0}}))}function ta(n,t){const r=Qe(t,["children","$$slots","$$events","$$legacy"]);mt(n,Xe({name:"file-text"},()=>r,{iconNode:[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4"}],["path",{d:"M10 9H8"}],["path",{d:"M16 13H8"}],["path",{d:"M16 17H8"}]],children:(p,D)=>{var c=N(),h=M(c);ge(h,t,"default",{},null),d(p,c)},$$slots:{default:!0}}))}function Nn(n,t){const r=Qe(t,["children","$$slots","$$events","$$legacy"]);mt(n,Xe({name:"file"},()=>r,{iconNode:[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4"}]],children:(p,D)=>{var c=N(),h=M(c);ge(h,t,"default",{},null),d(p,c)},$$slots:{default:!0}}))}function An(n,t){const r=Qe(t,["children","$$slots","$$events","$$legacy"]);mt(n,Xe({name:"folder-open"},()=>r,{iconNode:[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2"}]],children:(p,D)=>{var c=N(),h=M(c);ge(h,t,"default",{},null),d(p,c)},$$slots:{default:!0}}))}function zt(n,t){const r=Qe(t,["children","$$slots","$$events","$$legacy"]);mt(n,Xe({name:"image"},()=>r,{iconNode:[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2"}],["circle",{cx:"9",cy:"9",r:"2"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21"}]],children:(p,D)=>{var c=N(),h=M(c);ge(h,t,"default",{},null),d(p,c)},$$slots:{default:!0}}))}function Hn(n,t){const r=Qe(t,["children","$$slots","$$events","$$legacy"]);mt(n,Xe({name:"refresh-cw"},()=>r,{iconNode:[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8"}],["path",{d:"M21 3v5h-5"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16"}],["path",{d:"M8 16H3v5"}]],children:(p,D)=>{var c=N(),h=M(c);ge(h,t,"default",{},null),d(p,c)},$$slots:{default:!0}}))}function Un(n,t){const r=Qe(t,["children","$$slots","$$events","$$legacy"]);mt(n,Xe({name:"square-pen"},()=>r,{iconNode:[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z"}]],children:(p,D)=>{var c=N(),h=M(c);ge(h,t,"default",{},null),d(p,c)},$$slots:{default:!0}}))}var jn=E('<span class="inline-block mr-2"> </span>'),On=E('<span class="text-gray-400"> </span>'),Vn=E('<div class="mt-1"><!> <!></div>'),Kn=E('<div class="text-xs text-muted-foreground mb-2 p-2 bg-gray-50 rounded"><div class="font-medium"> </div> <!></div>'),Wn=(n,t)=>{const r=n.currentTarget.files;r&&t(r)},qn=(n,t)=>{l(t,"")},Xn=(n,t)=>{(n.key==="Enter"||n.key===" ")&&(n.preventDefault(),l(t,""))},Gn=E('<button type="button" class="absolute right-2 top-1/2 -translate-y-1/2 text-muted-foreground hover:text-foreground" aria-label="Clear search"><!></button>'),Zn=E('<div class="absolute right-2 top-1/2 -translate-y-1/2"><!></div>'),Yn=E('<div class="flex flex-col items-center justify-center py-8 text-muted-foreground"><!> <div class="text-sm">Loading files...</div></div>'),Qn=E('<div class="text-xs text-muted-foreground mb-2 font-medium"> </div>'),Jn=(n,t,r,f)=>e(t).type==="folder"?r(e(t).id):f(e(t)),eo=(n,t,r,f)=>{(n.key==="Enter"||n.key===" ")&&(n.preventDefault(),e(t).type==="folder"?r(e(t).id):f(e(t)))},to=(n,t,r)=>t.key(n,e(r)),ao=n=>n.stopPropagation(),no=E('<input class="text-xs border rounded px-1 w-full bg-white text-black">'),oo=E('<div class="text-xs truncate font-medium"> </div>'),ro=E("<span> </span>"),so=E('<span class="text-blue-500 bg-blue-50 px-1 rounded text-xs">S3</span>'),io=E("<span> </span>"),lo=(n,t,r)=>t.start(e(r),n),co=(n,t,r)=>{(n.key==="Enter"||n.key===" ")&&(n.preventDefault(),t.start(e(r),n))},uo=E('<button type="button" class="h-6 w-6 hover:bg-accent rounded flex items-center justify-center"><!></button>'),vo=(n,t,r)=>t(e(r)),fo=(n,t,r)=>{(n.key==="Enter"||n.key===" ")&&(n.preventDefault(),t(e(r)))},mo=(n,t,r)=>t(e(r)),po=(n,t,r)=>{(n.key==="Enter"||n.key===" ")&&(n.preventDefault(),t(e(r)))},go=E('<button type="button" class="h-6 w-6 hover:bg-accent rounded flex items-center justify-center"><!></button> <button type="button" class="h-6 w-6 hover:bg-red-100 rounded flex items-center justify-center text-red-600"><!></button>',1),ho=E('<div><div class="flex items-center gap-2 flex-1 min-w-0"><button type="button" class="flex items-center gap-2 flex-1 text-left min-w-0"><!> <div class="min-w-0 flex-1"><!> <div class="flex items-center gap-2 text-xs text-muted-foreground"><!> <!> <!></div></div></button></div> <div class="flex gap-1 opacity-0 group-hover:opacity-100"><!> <!></div></div>'),_o=(n,t)=>{(n.key==="Enter"||n.key===" ")&&(n.preventDefault(),t())},yo=E('<div class="flex flex-col items-center justify-center py-8 text-muted-foreground"><!> <div class="text-sm">No files found</div> <button type="button" class="mt-2 text-xs text-blue-500 hover:text-blue-700 border border-blue-200 px-2 py-1 rounded">🔄 Refresh</button></div>'),bo=E("<!> <!> <!>",1),xo=(n,t)=>{(n.key==="Enter"||n.key===" ")&&(n.preventDefault(),t())},wo=E('<div class="w-12 h-12 bg-red-500 rounded-full flex items-center justify-center"><!></div>'),$o=E('<div class="w-12 h-12 rounded-full flex items-center justify-center" style="background-color: rgb(30, 164, 206);"><svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg></div>'),ko=E('<div class="w-12 h-12 rounded-full flex items-center justify-center" style="background-color: rgb(30, 164, 206);"><!></div>'),To=E('<div class="flex justify-end"><!></div>'),So=E('<div class="fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50"><div class="bg-white rounded-2xl p-8 max-w-md w-full mx-4 shadow-2xl"><div class="flex items-center justify-between mb-6"><h2 class="text-gray-800 text-xl font-semibold"> </h2> <button class="text-gray-500 hover:text-gray-700 transition-colors"><!></button></div> <div class="flex items-center gap-4 mb-6"><div class="flex-shrink-0"><!></div> <div class="flex-1"><p class="text-gray-600 text-sm leading-relaxed"> </p></div></div> <!></div></div>'),Mo=E('<div class="flex h-full max-h-screen flex-col bg-white border-l"><div class="flex-shrink-0 border-b px-4 py-3"><div class="flex items-center gap-2 mb-3"><!> <h2 class="text-sm font-medium">Files</h2> <!></div> <!> <button type="button" class="h-8 w-full text-xs inline-flex items-center justify-center rounded-md font-medium transition-colors border bg-white hover:bg-accent mb-2"><!>Upload to S3</button> <input type="file" multiple class="hidden"> <div class="relative"><!> <!> <!> <!></div></div> <div class="flex-1 min-h-0 overflow-y-auto px-4 py-3"><div class="space-y-1"><!></div></div> <div class="flex-shrink-0 border-t px-4 py-2 bg-gray-50"><div class="flex items-center justify-between"><div class="text-xs text-muted-foreground"> </div> <div class="flex gap-2"><button type="button" title="Refresh file list"><!>Refresh</button></div></div></div></div> <!>',1);function Eo(n,t){Kt(t,!0);const[r,f]=qt(),p=()=>He(va,"$customNamespace",r),D=()=>He(Oa,"$user",r),c=()=>He(Zt,"$fileTree",r),h=()=>He(da,"$uploadedFiles",r),B=()=>He(ca,"$selectedFiles",r);H(t,"label",3,""),H(t,"required",3,!1),H(t,"forBucket",3,!1);let O=ze(""),G,Z=ze(se(new Set)),z=ze(null),fe=ze(""),te=ze(!1),ie=ze(!1),ke=ze(""),le=ze(""),de=ze(!1),X=ze(0),Ue;const Ee={api:"/api/my/mastrogpt/filemanager",dir:"/tmp/filemanager"},Te=vt(()=>({key:p()||D().namespace,bucket:`${p()||D().namespace}-data`,secret:D().s3_key})),st=vt(()=>!c().length&&!h().length);let A=ze(se([])),U=se({total:0,byType:new Map});function Le(){if(e(de))return;l(X,0);const a=setInterval(()=>{e(X)<85?(l(X,e(X)+Math.random()*8),e(X)>85&&l(X,85)):clearInterval(a)},200)}function Ge(a,o){l(ie,!0),l(X,0),l(ke,se(a)),l(le,se(o)),l(de,!1),Le()}function V(a,o){l(ie,!0),l(X,0),l(ke,se(a)),l(le,se(o)),l(de,!0)}function xe(a,o){l(ke,se(a)),l(le,se(o)),l(X,100),l(de,!1),setTimeout(()=>{Ze()},2e3)}function Ze(){l(ie,!1),l(X,0),l(de,!1)}const s=async a=>{const o=await fetch(Ee.api,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});if(!o.ok)throw new Error(`HTTP ${o.status}: ${await o.text()}`);const i=await o.json();return i.body?typeof i.body=="string"?JSON.parse(i.body):i.body:i},De=async a=>{if(a!=null&&a.length)try{Ge("Uploading Files",`Uploading ${a.length} file(s) to S3...`);const o=ga(Aa).s3;if(!Ha(o))return V("Upload Error","Invalid S3 URL");const i=new Ja({endpoint:o,credentials:{accessKeyId:e(Te).key,secretAccessKey:e(Te).secret}},e(Te).bucket);Array.from(a).forEach(g=>Ua({id:en(),name:g.name,size:g.size,type:g.type,uploadDate:new Date,url:`s3://${e(Te).bucket}/${g.name}`,path:g.name})),await i.uploadAll(a),xe("Upload Complete",`Successfully uploaded ${a.length} file(s)!`),setTimeout(()=>he(),1e3)}catch(o){V("Upload Failed",`Upload error: ${o.message}`)}},je=async a=>{try{Ge("Deleting File",`Deleting "${a.name}"...`),console.log("Deleting file:",{file:a,path:a.path||`/${a.name}`});const o=await s({operation:"delete",paths:[a.path||`/${a.name}`],base_directory:Ee.dir,force:!0});console.log("Delete API response:",o),o.success?(xe("Delete Complete",`"${a.name}" has been deleted!`),Zt.update(i=>i.filter(g=>g.id!==a.id)),da.update(i=>i.filter(g=>g.id!==a.id)),ca.update(i=>i.filter(g=>g.id!==a.id)),setTimeout(()=>he(),1e3)):V("Delete Failed",o.error||o.message||"Delete operation failed")}catch(o){console.error("Delete error:",o),V("Delete Failed",`Delete error: ${o.message}`)}},ue=async a=>{var o;try{Ge("Downloading File",`Downloading "${a.name}"...`);const i=await s({operation:"download",file:{name:a.name,key:a.s3_key||a.key||a.path,url:a.s3_url||a.url},expires_in:3600});if(i.success&&((o=i.file)!=null&&o.base64)){const g=new Blob([Uint8Array.from(atob(i.file.base64),x=>x.charCodeAt(0))],{type:i.file.content_type||"application/octet-stream"}),_=document.createElement("a");_.href=URL.createObjectURL(g),_.download=a.name,_.click(),URL.revokeObjectURL(_.href),xe("Download Complete",`Successfully downloaded "${a.name}"`)}else V("Download Failed",i.error||"Download operation failed")}catch(i){V("Download Failed",`Download error: ${i.message}`)}},Ye=async(a,o)=>{try{Ge("Renaming File",`Renaming ${a.name} to ${o}...`),console.log("Renaming file:",{file:a,newName:o,path:a.path||`/${a.name}`});const i={operation:"rename",old_path:a.path||`/${a.name}`,new_name:o,base_directory:Ee.dir};console.log("Rename request:",i);const g=await s(i);console.log("Rename API response:",g),g.success?(xe("Success",`Renamed to "${o}"`),Zt.update(_=>_.map(x=>{var b,w;return x.id===a.id?{...x,name:o,path:g.new_path||((b=x.path)==null?void 0:b.replace(a.name,o)),s3_key:g.new_key||((w=x.s3_key)==null?void 0:w.replace(a.name,o))}:x})),da.update(_=>_.map(x=>{var b;return x.id===a.id?{...x,name:o,path:g.new_path||((b=x.path)==null?void 0:b.replace(a.name,o))}:x})),setTimeout(()=>he(),1e3)):V("Rename Failed",g.error||g.message||"Rename operation failed")}catch(i){console.error("Rename error:",i),V("Rename Failed",`Rename failed: ${i.message}`)}},Oe=async a=>{try{if(l(te,!0),!a||a.trim()===""){const _=F(c()),x=h().map(w=>({...w,level:0,isExpanded:!1,isSelected:B().some(u=>u.id===w.id),type:"file",source:"s3"})),b=[..._];return x.forEach(w=>{_.some(L=>L.name===w.name||L.path===w.path||L.s3_key===w.path)||b.push(w)}),b.sort((w,u)=>w.type==="folder"&&u.type==="file"?-1:w.type==="file"&&u.type==="folder"?1:w.name.localeCompare(u.name)),Ve(b.filter(w=>w.type==="file")),b}const o=await s({operation:"search",query:a,search_path:"/",base_directory:Ee.dir,search_type:"name",include_folders:!0,case_sensitive:!1,max_results:null,file_extensions:[],search_sources:["s3"]}),i=o.success?o.results:[];console.log("Search API response:",o),console.log("Search results:",i);const g=i.map(_=>({id:_.id||crypto.randomUUID(),name:_.name,type:_.type==="folder"?"folder":"file",path:_.path,size:_.size||0,modified:_.modified?new Date(_.modified):new Date,children:_.type==="folder"?[]:void 0,s3_key:_.s3_key,s3_url:_.s3_url,source:_.source||"s3",extension:_.extension,level:0,isExpanded:!1,isSelected:B().some(x=>x.id===_.id)}));return Ve(g.filter(_=>_.type==="file")),g}catch(o){return console.error("Search error:",o),V("Search Error",`Failed to search files: ${o.message}`),[]}finally{l(te,!1)}},Je=async a=>{clearTimeout(Ue),Ue=setTimeout(async()=>{console.log("Performing search for:",a);const o=await Oe(a.trim());l(A,se(o))},300)},Ve=a=>{const o=new Map;a.forEach(i=>{var g;if(i.type==="file"){const _=i.extension||((g=i.name.split(".").pop())==null?void 0:g.toLowerCase())||"no extension";o.set(_,(o.get(_)||0)+1)}}),U.total=a.filter(i=>i.type==="file").length,U.byType=o},he=async()=>{try{console.log("Loading files...");const a=await Oe("*");Zt.set(a),e(O).trim()||l(A,se(a))}catch(a){console.error("Error in loadFiles:",a),V("Load Error",`Failed to load files: ${a.message}`)}},Ct=a=>a&&["B","KB","MB","GB"].map((o,i)=>a<1024**(i+1)?(a/1024**i).toFixed(2)+o:null).find(Boolean)||"",Ft=(a,o)=>{var _;if(o==="folder")return Qt;const i=((_=a.split(".").pop())==null?void 0:_.toLowerCase())||"";return{txt:ta,md:ta,log:ta,csv:ta,png:zt,jpg:zt,jpeg:zt,gif:zt,svg:zt,webp:zt,js:ut,ts:ut,jsx:ut,tsx:ut,py:ut,html:ut,css:ut,json:ut,xml:ut,zip:jt,rar:jt,"7z":jt,tar:jt,gz:jt}[i]||Nn},it=a=>{e(Z).has(a)?e(Z).delete(a):e(Z).add(a),l(Z,se(new Set(e(Z))))},Mt=a=>ca.update(o=>o.some(i=>i.id===a.id)?o.filter(i=>i.id!==a.id):[...o,a]),me={start:(a,o)=>{o==null||o.stopPropagation(),l(z,se(a.id)),l(fe,se(a.name)),setTimeout(()=>{const i=document.querySelector(`[data-editing-id="${a.id}"]`);i==null||i.focus(),i==null||i.select()},0)},save:async a=>{e(fe).trim()&&e(fe)!==a.name&&await Ye(a,e(fe).trim()),l(z,null)},cancel:()=>l(z,null),key:(a,o)=>{a.key==="Enter"?(a.preventDefault(),me.save(o)):a.key==="Escape"&&(a.preventDefault(),me.cancel())}},F=(a,o=0)=>a.flatMap(i=>[{...i,level:o,isExpanded:e(Z).has(i.id),isSelected:B().some(g=>g.id===i.id)},...i.type==="folder"&&i.children&&e(Z).has(i.id)?F(i.children,o+1):[]]);na(()=>{he();const a=setInterval(he,6e4);return()=>clearInterval(a)}),Pa(()=>{if(e(O).trim())Je(e(O));else{const a=F(c()),o=h().map(g=>({...g,level:0,isExpanded:!1,isSelected:B().some(_=>_.id===g.id),type:"file",source:"s3"})),i=[...a];o.forEach(g=>{a.some(x=>x.name===g.name||x.path===g.path||x.s3_key===g.path)||i.push(g)}),i.sort((g,_)=>g.type==="folder"&&_.type==="file"?-1:g.type==="file"&&_.type==="folder"?1:g.name.localeCompare(_.name)),l(A,se(i)),Ve(i.filter(g=>g.type==="file"))}});const ae="h-6 text-xs inline-flex items-center justify-center whitespace-nowrap rounded-md font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 disabled:pointer-events-none disabled:opacity-50 border border-input bg-white hover:bg-accent px-2";var Ce=Mo(),Ke=M(Ce),we=m(Ke),We=m(we),Y=m(We);Qt(Y,{class:"h-4 w-4 text-blue-500"});var Ie=S(Y,4);{var gt=a=>{Jt(a,{class:"h-3 w-3 animate-spin text-muted-foreground"})};k(Ie,a=>{e(te)&&a(gt)})}v(We);var _e=S(We,2);{var $t=a=>{var o=Kn(),i=m(o),g=m(i);v(i);var _=S(i,2);{var x=b=>{var w=Vn(),u=m(w);Vt(u,17,()=>Array.from(U.byType.entries()).slice(0,3),ma,(I,T)=>{let J=()=>e(T)[0],Se=()=>e(T)[1];var Be=jn(),et=m(Be);v(Be),W(()=>Re(et,`${Se()??""} ${J()??""}`)),d(I,Be)});var L=S(u,2);{var ne=I=>{var T=On(),J=m(T);v(T),W(()=>Re(J,`+${U.byType.size-3} more`)),d(I,T)};k(L,I=>{U.byType.size>3&&I(ne)})}v(w),d(b,w)};k(_,b=>{U.byType.size>0&&b(x)})}v(o),W(()=>Re(g,`${U.total??""} files total`)),d(a,o)};k(_e,a=>{U.total>0&&a($t)})}var Pe=S(_e,2);Pe.__click=()=>G==null?void 0:G.click(),Pe.__keydown=a=>{(a.key==="Enter"||a.key===" ")&&(a.preventDefault(),G==null||G.click())};var Rt=m(Pe);Qa(Rt,{class:"mr-2 h-3 w-3"}),Ot(),v(Pe);var qe=S(Pe,2);qe.__change=[Wn,De],fa(qe,a=>G=a,()=>G);var ot=S(qe,2),lt=m(ot);Xa(lt,{class:"absolute left-3 top-1/2 h-3 w-3 -translate-y-1/2 text-muted-foreground"});var Et=S(lt,2),Dt=vt(()=>e(te)?"Searching...":"Search files...");qa(Et,{get placeholder(){return e(Dt)},class:"h-8 pl-8 pr-8 text-xs bg-white",get disabled(){return e(te)},get value(){return e(O)},set value(a){l(O,se(a))}});var kt=S(Et,2);{var q=a=>{var o=Gn();o.__click=[qn,O],o.__keydown=[Xn,O];var i=m(o);Yt(i,{class:"h-3 w-3"}),v(o),d(a,o)};k(kt,a=>{e(O)&&!e(te)&&a(q)})}var ht=S(kt,2);{var ye=a=>{var o=Zn(),i=m(o);Jt(i,{class:"h-3 w-3 animate-spin text-muted-foreground"}),v(o),d(a,o)};k(ht,a=>{e(te)&&a(ye)})}v(ot),v(we);var $=S(we,2),Fe=m($),It=m(Fe);{var oa=a=>{var o=Yn(),i=m(o);Jt(i,{class:"h-8 w-8 mb-2 animate-spin"}),Ot(2),v(o),d(a,o)},ra=a=>{var o=bo(),i=M(o);{var g=w=>{var u=Qn(),L=m(u,!0);v(u),W(()=>Re(L,e(O)?`Search Results (${e(A).length})`:`All Files (${e(A).length})`)),d(w,u)};k(i,w=>{e(A).length>0&&w(g)})}var _=S(i,2);Vt(_,17,()=>e(A),w=>w.id,(w,u)=>{var L=ho();const ne=vt(()=>Ft(e(u).name,e(u).type));var I=m(L),T=m(I);T.__click=[Jn,u,it,Mt],T.__keydown=[eo,u,it,Mt];var J=m(T);{var Se=C=>{var P=N(),ve=M(P);{var Ut=bt=>{An(bt,{class:"h-4 w-4 text-blue-500 flex-shrink-0"})},ct=bt=>{Qt(bt,{class:"h-4 w-4 text-blue-500 flex-shrink-0"})};k(ve,bt=>{e(u).isExpanded?bt(Ut):bt(ct,!1)})}d(C,P)},Be=C=>{var P=N(),ve=M(P);Lt(ve,()=>e(ne),(Ut,ct)=>{ct(Ut,{class:"h-4 w-4 text-muted-foreground flex-shrink-0"})}),d(C,P)};k(J,C=>{e(u).type==="folder"?C(Se):C(Be,!1)})}var et=S(J,2),tt=m(et);{var be=C=>{var P=no();ja(P),P.__keydown=[to,me,u],P.__click=[ao],W(()=>R(P,"data-editing-id",e(u).id)),Ae("blur",P,()=>me.save(e(u))),Za(P,()=>e(fe),ve=>l(fe,ve)),d(C,P)},Me=C=>{var P=oo(),ve=m(P,!0);v(P),W(()=>Re(ve,e(u).name)),d(C,P)};k(tt,C=>{e(z)===e(u).id?C(be):C(Me,!1)})}var rt=S(tt,2),_t=m(rt);{var at=C=>{var P=ro(),ve=m(P,!0);W(()=>Re(ve,Ct(e(u).size))),v(P),d(C,P)};k(_t,C=>{e(u).type==="file"&&e(u).size&&C(at)})}var $e=S(_t,2);{var nt=C=>{var P=so();d(C,P)};k($e,C=>{e(u).source==="s3"&&C(nt)})}var Nt=S($e,2);{var ia=C=>{var P=io(),ve=m(P,!0);W(()=>Re(ve,new Date(e(u).modified).toLocaleDateString())),v(P),d(C,P)};k(Nt,C=>{e(u).modified&&C(ia)})}v(rt),v(et),v(T),v(I);var dt=S(I,2),yt=m(dt);{var At=C=>{var P=uo();P.__click=[lo,me,u],P.__keydown=[co,me,u];var ve=m(P);Un(ve,{class:"h-3 w-3"}),v(P),W(()=>R(P,"aria-label",`Rename ${e(u).name??""}`)),d(C,P)};k(yt,C=>{e(z)!==e(u).id&&C(At)})}var la=S(yt,2);{var Ht=C=>{var P=go(),ve=M(P);ve.__click=[vo,ue,u],ve.__keydown=[fo,ue,u];var Ut=m(ve);Rn(Ut,{class:"h-3 w-3"}),v(ve);var ct=S(ve,2);ct.__click=[mo,je,u],ct.__keydown=[po,je,u];var bt=m(ct);Yt(bt,{class:"h-3 w-3"}),v(ct),W(()=>{R(ve,"aria-label",`Download ${e(u).name??""}`),R(ct,"aria-label",`Delete ${e(u).name??""}`)}),d(C,P)};k(la,C=>{e(u).type==="file"&&C(Ht)})}v(dt),v(L),W(()=>{xt(L,`flex items-center gap-2 p-2 hover:bg-accent group ${(e(u).isSelected?"bg-accent":"")??""} rounded border-b border-gray-100`),R(et,"style",`margin-left: ${e(u).level*12}px`)}),d(w,L)});var x=S(_,2);{var b=w=>{var u=yo(),L=m(u);Qt(L,{class:"h-8 w-8 mb-2 opacity-50"});var ne=S(L,4);ne.__click=he,ne.__keydown=[_o,he],v(u),d(w,u)};k(x,w=>{e(st)&&!e(te)&&w(b)})}d(a,o)};k(It,a=>{e(te)?a(oa):a(ra,!1)})}v(Fe),v($);var Xt=S($,2),Gt=m(Xt),y=m(Gt),j=m(y);v(y);var ce=S(y,2),oe=m(ce);oe.__click=he,oe.__keydown=[xo,he],xt(oe,St(ae));var Q=m(oe),pe=vt(()=>`mr-1 h-3 w-3 ${(e(te)?"animate-spin":"")??""}`);Hn(Q,{get class(){return e(pe)}}),Ot(),v(oe),v(ce),v(Gt),v(Xt),v(Ke);var Tt=S(Ke,2);{var sa=a=>{var o=So(),i=m(o),g=m(i),_=m(g),x=m(_,!0);v(_);var b=S(_,2);b.__click=Ze;var w=m(b);Yt(w,{size:24}),v(b),v(g);var u=S(g,2),L=m(u),ne=m(L);{var I=be=>{var Me=wo(),rt=m(Me);Yt(rt,{size:24,class:"text-white"}),v(Me),d(be,Me)},T=be=>{var Me=N(),rt=M(Me);{var _t=$e=>{var nt=$o();d($e,nt)},at=$e=>{var nt=ko(),Nt=m(nt);Jt(Nt,{size:24,class:"text-white animate-spin"}),v(nt),d($e,nt)};k(rt,$e=>{e(X)>=100?$e(_t):$e(at,!1)},!0)}d(be,Me)};k(ne,be=>{e(de)?be(I):be(T,!1)})}v(L);var J=S(L,2),Se=m(J),Be=m(Se,!0);v(Se),v(J),v(u);var et=S(u,2);{var tt=be=>{var Me=To(),rt=m(Me);Ya(rt,{variant:"outline",onclick:Ze,class:"bg-white border-gray-300 text-gray-700 hover:bg-gray-50",children:(_t,at)=>{Ot();var $e=ua("Cancel");d(_t,$e)},$$slots:{default:!0}}),v(Me),d(be,Me)};k(et,be=>{!e(de)&&e(X)<100&&be(tt)})}v(i),v(o),W(()=>{Re(x,e(ke)),Re(Be,e(le))}),d(a,o)};k(Tt,a=>{e(ie)&&a(sa)})}W(()=>{Pe.disabled=e(te),Re(j,`${e(A).length??""} total`),oe.disabled=e(te)}),d(n,Ce),Wt(),f()}ka(["click","keydown","change"]);function Do(n,t,r,f,p,D,c){l(t,!0),l(r,se(n.clientX)),l(f,se(e(p))),document.addEventListener("mousemove",D),document.addEventListener("mouseup",c),document.body.style.cursor="col-resize",document.body.style.userSelect="none"}var Io=E('<meta name="description"> <meta property="og:title"> <meta property="og:description"> <meta property="og:type" content="website"> <meta property="og:site_name" content="Nuvolaris"> <meta property="og:url"> <meta property="og:image"> <meta name="twitter:card" content="summary_large_image">',1),Po=E('<div class="hidden md:block border-r bg-background relative flex-shrink-0"><!> <button type="button" class="absolute top-0 right-0 w-1 h-full cursor-col-resize bg-transparent hover:bg-blue-500/20 transition-colors group border-0 p-0 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2" aria-label="Resize file manager" title="Drag to resize file manager"><div class="absolute top-1/2 right-0 w-1 h-12 bg-border group-hover:bg-blue-500 group-focus:bg-blue-500 rounded-l transition-colors transform -translate-y-1/2"></div></button></div>'),Bo=E('<div class="flex w-full h-full"><!> <div class="flex-1 min-w-0"><!></div></div>'),zo=E(`<style>* {
      -webkit-user-select: none !important;
         -moz-user-select: none !important;
              user-select: none !important;
    }</style>`),Lo=E("<!> <!> <!>",1);function Qo(n,t){Kt(t,!0);const[r,f]=qt(),p=()=>He(va,"$customNamespace",r),D=()=>He(_a,"$sidebarOpen",r),c=()=>He(Va,"$fileManagerVisible",r);let h=ze(300),B=ze(!1),O=ze(0),G=ze(0);const Z=200,z=600;na(()=>{fetch("/api/my/mastrogpt/index").then(U=>U.json()).then(U=>{ha(va,se(U.username)),console.log("namespace",p())});const A=localStorage.getItem("fileManagerWidth");if(A){const U=parseInt(A);U>=Z&&U<=z&&l(h,se(U))}});function fe(A){if(!e(B))return;const U=A.clientX-e(O),Le=Math.max(Z,Math.min(z,e(G)+U));l(h,se(Le))}function te(){l(B,!1),document.removeEventListener("mousemove",fe),document.removeEventListener("mouseup",te),document.body.style.cursor="",document.body.style.userSelect="",localStorage.setItem("fileManagerWidth",e(h).toString())}const ie={title:"MastroGPT",description:"Develop AI apps with Nuvolaris",ogImageUrl:"og.png"};let ke=vt(()=>{var A,U;return(A=Pt.data.meta)!=null&&A.title?`${(U=Pt.data.meta)==null?void 0:U.title} - MastroGPT`:ie.title}),le=vt(()=>{var A;return((A=Pt.data.meta)==null?void 0:A.description)??ie.description}),de=vt(()=>{var A;return`${Pt.url.origin}${((A=Pt.data.meta)==null?void 0:A.ogImageUrl)??ie.ogImageUrl}`});var X=Lo();Ca(A=>{var U=Io(),Le=M(U),Ge=S(Le,2),V=S(Ge,2),xe=S(V,6),Ze=S(xe,2);Ot(2),W(()=>{Ba.title=e(ke),R(Le,"content",e(le)),R(Ge,"content",e(ke)),R(V,"content",e(le)),R(xe,"content",Pt.url.href),R(Ze,"content",e(de))}),d(A,U)});var Ue=M(X);Fn(Ue,{richColors:!0,expand:!0,position:"bottom-left"});var Ee=S(Ue,2);Lt(Ee,()=>Ga,(A,U)=>{U(A,{get open(){return La(),D()},set open(Le){ha(_a,se(Le))},children:(Le,Ge)=>{var V=Bo(),xe=m(V);{var Ze=je=>{var ue=Po(),Ye=m(ue);Eo(Ye,{});var Oe=S(Ye,2);Oe.__mousedown=[Do,B,O,G,h,fe,te],v(ue),W(()=>R(ue,"style",`width: ${e(h)??""}px;`)),d(je,ue)};k(xe,je=>{c()&&je(Ze)})}var s=S(xe,2),De=m(s);Ra(De,()=>t.children),v(s),v(V),W(()=>R(V,"data-file-manager-open",c())),d(Le,V)},$$slots:{default:!0}})});var Te=S(Ee,2);{var st=A=>{var U=zo();d(A,U)};k(Te,A=>{e(B)&&A(st)})}d(n,X),Wt(),f()}ka(["mousedown"]);export{Qo as component};
