var Wd=Object.defineProperty;var Kd=(e,t,r)=>t in e?Wd(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var X=(e,t,r)=>Kd(e,typeof t!="symbol"?t+"":t,r);import{c as Tu,a as ku}from"./CdDPiiAq.js";import"./DSqHHXr2.js";import{f as Bu}from"./D-pOCGrB.js";import{I as Nu,c as Mu}from"./BOuXRh5W.js";import{l as Iu,s as Pu}from"./BQO_n1VV.js";import{g as Vd,c as _r}from"./lk9tjPTR.js";function oE(e,t){const r=Iu(t,["children","$$slots","$$events","$$legacy"]);Nu(e,Pu({name:"loader-circle"},()=>r,{iconNode:[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56"}]],children:(s,i)=>{var o=Tu(),a=Bu(o);Mu(a,t,"default",{},null),ku(s,o)},$$slots:{default:!0}}))}function aE(e,t){const r=Iu(t,["children","$$slots","$$events","$$legacy"]);Nu(e,Pu({name:"upload"},()=>r,{iconNode:[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}],["polyline",{points:"17 8 12 3 7 8"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15"}]],children:(s,i)=>{var o=Tu(),a=Bu(o);Mu(a,t,"default",{},null),ku(s,o)},$$slots:{default:!0}}))}const We=[];for(let e=0;e<256;++e)We.push((e+256).toString(16).slice(1));function Gd(e,t=0){return(We[e[t+0]]+We[e[t+1]]+We[e[t+2]]+We[e[t+3]]+"-"+We[e[t+4]]+We[e[t+5]]+"-"+We[e[t+6]]+We[e[t+7]]+"-"+We[e[t+8]]+We[e[t+9]]+"-"+We[e[t+10]]+We[e[t+11]]+We[e[t+12]]+We[e[t+13]]+We[e[t+14]]+We[e[t+15]]).toLowerCase()}let ls;const Xd=new Uint8Array(16);function Zd(){if(!ls){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");ls=crypto.getRandomValues.bind(crypto)}return ls(Xd)}const Yd=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),$o={randomUUID:Yd};function cE(e,t,r){var s;if($o.randomUUID&&!e)return $o.randomUUID();e=e||{};const n=e.random??((s=e.rng)==null?void 0:s.call(e))??Zd();if(n.length<16)throw new Error("Random bytes length must be >= 16");return n[6]=n[6]&15|64,n[8]=n[8]&63|128,Gd(n)}const Qd=e=>{let t=e.httpHandler;return{setHttpHandler(r){t=r},httpHandler(){return t},updateHttpClientConfig(r,n){t.updateHttpClientConfig(r,n)},httpHandlerConfigs(){return t.httpHandlerConfigs()}}},Jd=e=>({httpHandler:e.httpHandler()});var Ho;(function(e){e.HEADER="header",e.QUERY="query"})(Ho||(Ho={}));var qo;(function(e){e.HEADER="header",e.QUERY="query"})(qo||(qo={}));var Jr;(function(e){e.HTTP="http",e.HTTPS="https"})(Jr||(Jr={}));var Fn;(function(e){e.MD5="md5",e.CRC32="crc32",e.CRC32C="crc32c",e.SHA1="sha1",e.SHA256="sha256"})(Fn||(Fn={}));var zo;(function(e){e[e.HEADER=0]="HEADER",e[e.TRAILER=1]="TRAILER"})(zo||(zo={}));const ki="__smithy_context";var jo;(function(e){e.PROFILE="profile",e.SSO_SESSION="sso-session",e.SERVICES="services"})(jo||(jo={}));var Wo;(function(e){e.HTTP_0_9="http/0.9",e.HTTP_1_0="http/1.0",e.TDS_8_0="tds/8.0"})(Wo||(Wo={}));class Ie{constructor(t){this.method=t.method||"GET",this.hostname=t.hostname||"localhost",this.port=t.port,this.query=t.query||{},this.headers=t.headers||{},this.body=t.body,this.protocol=t.protocol?t.protocol.slice(-1)!==":"?`${t.protocol}:`:t.protocol:"https:",this.path=t.path?t.path.charAt(0)!=="/"?`/${t.path}`:t.path:"/",this.username=t.username,this.password=t.password,this.fragment=t.fragment}static clone(t){const r=new Ie({...t,headers:{...t.headers}});return r.query&&(r.query=ef(r.query)),r}static isInstance(t){if(!t)return!1;const r=t;return"method"in r&&"protocol"in r&&"hostname"in r&&"path"in r&&typeof r.query=="object"&&typeof r.headers=="object"}clone(){return Ie.clone(this)}}function ef(e){return Object.keys(e).reduce((t,r)=>{const n=e[r];return{...t,[r]:Array.isArray(n)?[...n]:n}},{})}class en{constructor(t){this.statusCode=t.statusCode,this.reason=t.reason,this.headers=t.headers||{},this.body=t.body}static isInstance(t){if(!t)return!1;const r=t;return typeof r.statusCode=="number"&&typeof r.headers=="object"}}function tf(e){return t=>async r=>{var s,i;const{request:n}=r;return Ie.isInstance(n)&&n.body&&e.runtime==="node"&&((i=(s=e.requestHandler)==null?void 0:s.constructor)==null?void 0:i.name)!=="FetchHttpHandler"&&(n.headers={...n.headers,Expect:"100-continue"}),t({...r,request:n})}}const rf={step:"build",tags:["SET_EXPECT_HEADER","EXPECT_HEADER"],name:"addExpectContinueMiddleware",override:!0},nf=e=>({applyToStack:t=>{t.add(tf(e),rf)}}),Tr={WHEN_SUPPORTED:"WHEN_SUPPORTED",WHEN_REQUIRED:"WHEN_REQUIRED"},sf=Tr.WHEN_SUPPORTED,ds={WHEN_SUPPORTED:"WHEN_SUPPORTED",WHEN_REQUIRED:"WHEN_REQUIRED"},of=Tr.WHEN_SUPPORTED;var Se;(function(e){e.MD5="MD5",e.CRC32="CRC32",e.CRC32C="CRC32C",e.CRC64NVME="CRC64NVME",e.SHA1="SHA1",e.SHA256="SHA256"})(Se||(Se={}));var Ko;(function(e){e.HEADER="header",e.TRAILER="trailer"})(Ko||(Ko={}));const Bi=Se.CRC32;var Vo;(function(e){e.ENV="env",e.CONFIG="shared config entry"})(Vo||(Vo={}));function af(e,t,r){return e.$source||(e.$source={}),e.$source[t]=r,e}function Be(e,t,r){e.__aws_sdk_context?e.__aws_sdk_context.features||(e.__aws_sdk_context.features={}):e.__aws_sdk_context={features:{}},e.__aws_sdk_context.features[t]=r}const Go=e=>{var t,r;return en.isInstance(e)?((t=e.headers)==null?void 0:t.date)??((r=e.headers)==null?void 0:r.Date):void 0},Wi=e=>new Date(Date.now()+e),cf=(e,t)=>Math.abs(Wi(t).getTime()-e)>=3e5,Xo=(e,t)=>{const r=Date.parse(e);return cf(r,t)?r-Date.now():t},Gr=(e,t)=>{if(!t)throw new Error(`Property \`${e}\` is not resolved for AWS SDK SigV4Auth`);return t},Fu=async e=>{var u,f,p;const t=Gr("context",e.context),r=Gr("config",e.config),n=(p=(f=(u=t.endpointV2)==null?void 0:u.properties)==null?void 0:f.authSchemes)==null?void 0:p[0],i=await Gr("signer",r.signer)(n),o=e==null?void 0:e.signingRegion,a=e==null?void 0:e.signingRegionSet,c=e==null?void 0:e.signingName;return{config:r,signer:i,signingRegion:o,signingRegionSet:a,signingName:c}};class Ou{async sign(t,r,n){var p;if(!Ie.isInstance(t))throw new Error("The request is not an instance of `HttpRequest` and cannot be signed");const s=await Fu(n),{config:i,signer:o}=s;let{signingRegion:a,signingName:c}=s;const u=n.context;if(((p=u==null?void 0:u.authSchemes)==null?void 0:p.length)??!1){const[g,w]=u.authSchemes;(g==null?void 0:g.name)==="sigv4a"&&(w==null?void 0:w.name)==="sigv4"&&(a=(w==null?void 0:w.signingRegion)??a,c=(w==null?void 0:w.signingName)??c)}return await o.sign(t,{signingDate:Wi(i.systemClockOffset),signingRegion:a,signingService:c})}errorHandler(t){return r=>{const n=r.ServerTime??Go(r.$response);if(n){const s=Gr("config",t.config),i=s.systemClockOffset;s.systemClockOffset=Xo(n,s.systemClockOffset),s.systemClockOffset!==i&&r.$metadata&&(r.$metadata.clockSkewCorrected=!0)}throw r}}successHandler(t,r){const n=Go(t);if(n){const s=Gr("config",r.config);s.systemClockOffset=Xo(n,s.systemClockOffset)}}}class uf extends Ou{async sign(t,r,n){var g;if(!Ie.isInstance(t))throw new Error("The request is not an instance of `HttpRequest` and cannot be signed");const{config:s,signer:i,signingRegion:o,signingRegionSet:a,signingName:c}=await Fu(n),f=(await((g=s.sigv4aSigningRegionSet)==null?void 0:g.call(s))??a??[o]).join(",");return await i.sign(t,{signingDate:Wi(s.systemClockOffset),signingRegion:f,signingService:c})}}const Mr=e=>e[ki]||(e[ki]={}),Et=e=>{if(typeof e=="function")return e;const t=Promise.resolve(e);return()=>t};function lf(e){const t=new Map;for(const r of e)t.set(r.schemeId,r);return t}const df=(e,t)=>(r,n)=>async s=>{var u;const i=e.httpAuthSchemeProvider(await t.httpAuthSchemeParametersProvider(e,n,s.input)),o=lf(e.httpAuthSchemes),a=Mr(n),c=[];for(const f of i){const p=o.get(f.schemeId);if(!p){c.push(`HttpAuthScheme \`${f.schemeId}\` was not enabled for this service.`);continue}const g=p.identityProvider(await t.identityProviderConfigProvider(e));if(!g){c.push(`HttpAuthScheme \`${f.schemeId}\` did not have an IdentityProvider configured.`);continue}const{identityProperties:w={},signingProperties:R={}}=((u=f.propertiesExtractor)==null?void 0:u.call(f,e,n))||{};f.identityProperties=Object.assign(f.identityProperties||{},w),f.signingProperties=Object.assign(f.signingProperties||{},R),a.selectedHttpAuthScheme={httpAuthOption:f,identity:await g(f.identityProperties),signer:p.signer};break}if(!a.selectedHttpAuthScheme)throw new Error(c.join(`
`));return r(s)},ff={step:"serialize",tags:["HTTP_AUTH_SCHEME"],name:"httpAuthSchemeMiddleware",override:!0,relation:"before",toMiddleware:"endpointV2Middleware"},hf=(e,{httpAuthSchemeParametersProvider:t,identityProviderConfigProvider:r})=>({applyToStack:n=>{n.addRelativeTo(df(e,{httpAuthSchemeParametersProvider:t,identityProviderConfigProvider:r}),ff)}}),pf=(e,t)=>r=>async n=>{const{response:s}=await r(n);try{const i=await t(s,e);return{response:s,output:i}}catch(i){if(Object.defineProperty(i,"$response",{value:s}),!("$metadata"in i)){const o="Deserialization error: to see the raw response, inspect the hidden field {error}.$response on this object.";i.message+=`
  `+o,typeof i.$responseBodyText<"u"&&i.$response&&(i.$response.body=i.$responseBodyText)}throw i}},gf=(e,t)=>(r,n)=>async s=>{var a;const i=(a=n.endpointV2)!=null&&a.url&&e.urlParser?async()=>e.urlParser(n.endpointV2.url):e.endpoint;if(!i)throw new Error("No valid endpoint provider available.");const o=await t(s.input,{...e,endpoint:i});return r({...s,request:o})},mf={name:"deserializerMiddleware",step:"deserialize",tags:["DESERIALIZER"],override:!0},Ki={name:"serializerMiddleware",step:"serialize",tags:["SERIALIZER"],override:!0};function nr(e,t,r){return{applyToStack:n=>{n.add(pf(e,r),mf),n.add(gf(e,t),Ki)}}}Ki.name;const yf=e=>t=>{throw t},wf=(e,t)=>{},bf=e=>(t,r)=>async n=>{if(!Ie.isInstance(n.request))return t(n);const i=Mr(r).selectedHttpAuthScheme;if(!i)throw new Error("No HttpAuthScheme was selected: unable to sign request");const{httpAuthOption:{signingProperties:o={}},identity:a,signer:c}=i,u=await t({...n,request:await c.sign(n.request,a,o)}).catch((c.errorHandler||yf)(o));return(c.successHandler||wf)(u.response,o),u},Du={step:"finalizeRequest",tags:["HTTP_SIGNING"],name:"httpSigningMiddleware",aliases:["apiKeyMiddleware","tokenMiddleware","awsAuthMiddleware"],override:!0,relation:"after",toMiddleware:"retryMiddleware"},Ef=e=>({applyToStack:t=>{t.addRelativeTo(bf(),Du)}}),br=e=>{if(typeof e=="function")return e;const t=Promise.resolve(e);return()=>t},Ht={},Ir=new Array(64);for(let e=0,t=65,r=90;e+t<=r;e++){const n=String.fromCharCode(e+t);Ht[n]=e,Ir[e]=n}for(let e=0,t=97,r=122;e+t<=r;e++){const n=String.fromCharCode(e+t),s=e+26;Ht[n]=s,Ir[s]=n}for(let e=0;e<10;e++){Ht[e.toString(10)]=e+52;const t=e.toString(10),r=e+52;Ht[t]=r,Ir[r]=t}Ht["+"]=62;Ir[62]="+";Ht["/"]=63;Ir[63]="/";const xr=6,Xr=8,Sf=63,Vi=e=>{let t=e.length/4*3;e.slice(-2)==="=="?t-=2:e.slice(-1)==="="&&t--;const r=new ArrayBuffer(t),n=new DataView(r);for(let s=0;s<e.length;s+=4){let i=0,o=0;for(let u=s,f=s+3;u<=f;u++)if(e[u]!=="="){if(!(e[u]in Ht))throw new TypeError(`Invalid character ${e[u]} in base64 string.`);i|=Ht[e[u]]<<(f-u)*xr,o+=xr}else i>>=xr;const a=s/4*3;i>>=o%Xr;const c=Math.floor(o/Xr);for(let u=0;u<c;u++){const f=(c-u-1)*Xr;n.setUint8(a+u,(i&255<<f)>>f)}}return new Uint8Array(r)},rr=e=>new TextEncoder().encode(e),vr=e=>typeof e=="string"?rr(e):ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(e),Gi=e=>{if(typeof e=="string")return e;if(typeof e!="object"||typeof e.byteOffset!="number"||typeof e.byteLength!="number")throw new Error("@smithy/util-utf8: toUtf8 encoder function only accepts string | Uint8Array.");return new TextDecoder("utf-8").decode(e)};function Qn(e){let t;typeof e=="string"?t=rr(e):t=e;const r=typeof t=="object"&&typeof t.length=="number",n=typeof t=="object"&&typeof t.byteOffset=="number"&&typeof t.byteLength=="number";if(!r&&!n)throw new Error("@smithy/util-base64: toBase64 encoder function only accepts string | Uint8Array.");let s="";for(let i=0;i<t.length;i+=3){let o=0,a=0;for(let u=i,f=Math.min(i+3,t.length);u<f;u++)o|=t[u]<<(f-u-1)*Xr,a+=Xr;const c=Math.ceil(a/xr);o<<=c*xr-a;for(let u=1;u<=c;u++){const f=(c-u)*xr;s+=Ir[(o&Sf<<f)>>f]}s+="==".slice(0,4-c)}return s}function xf(e,t="utf-8"){return t==="base64"?Qn(e):Gi(e)}function vf(e,t){return t==="base64"?Jt.mutate(Vi(e)):Jt.mutate(rr(e))}class Jt extends Uint8Array{static fromString(t,r="utf-8"){switch(typeof t){case"string":return vf(t,r);default:throw new Error(`Unsupported conversion from ${typeof t} to Uint8ArrayBlobAdapter.`)}}static mutate(t){return Object.setPrototypeOf(t,Jt.prototype),t}transformToString(t="utf-8"){return xf(this,t)}}const Af=(e,t)=>{const{base64Encoder:r,bodyLengthChecker:n,checksumAlgorithmFn:s,checksumLocationName:i,streamHasher:o}=t,a=r!==void 0&&n!==void 0&&s!==void 0&&i!==void 0&&o!==void 0,c=a?o(s,e):void 0,u=e.getReader();return new ReadableStream({async pull(f){const{value:p,done:g}=await u.read();if(g){if(f.enqueue(`0\r
`),a){const w=r(await c);f.enqueue(`${i}:${w}\r
`),f.enqueue(`\r
`)}f.close()}else f.enqueue(`${(n(p)||0).toString(16)}\r
${p}\r
`)}})},er=e=>encodeURIComponent(e).replace(/[!'()*]/g,Cf),Cf=e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`;function Rf(e){const t=[];for(let r of Object.keys(e).sort()){const n=e[r];if(r=er(r),Array.isArray(n))for(let s=0,i=n.length;s<i;s++)t.push(`${r}=${er(n[s])}`);else{let s=r;(n||typeof n=="string")&&(s+=`=${er(n)}`),t.push(s)}}return t.join("&")}function Zo(e,t){return new Request(e,t)}function _f(e=0){return new Promise((t,r)=>{e&&setTimeout(()=>{const n=new Error(`Request did not complete within ${e} ms`);n.name="TimeoutError",r(n)},e)})}const fs={supported:void 0};class Xi{static create(t){return typeof(t==null?void 0:t.handle)=="function"?t:new Xi(t)}constructor(t){typeof t=="function"?this.configProvider=t().then(r=>r||{}):(this.config=t??{},this.configProvider=Promise.resolve(this.config)),fs.supported===void 0&&(fs.supported=typeof Request<"u"&&"keepalive"in Zo("https://[::1]"))}destroy(){}async handle(t,{abortSignal:r}={}){var h;this.config||(this.config=await this.configProvider);const n=this.config.requestTimeout,s=this.config.keepAlive===!0,i=this.config.credentials;if(r!=null&&r.aborted){const E=new Error("Request aborted");return E.name="AbortError",Promise.reject(E)}let o=t.path;const a=Rf(t.query||{});a&&(o+=`?${a}`),t.fragment&&(o+=`#${t.fragment}`);let c="";if(t.username!=null||t.password!=null){const E=t.username??"",B=t.password??"";c=`${E}:${B}@`}const{port:u,method:f}=t,p=`${t.protocol}//${c}${t.hostname}${u?`:${u}`:""}${o}`,g=f==="GET"||f==="HEAD"?void 0:t.body,w={body:g,headers:new Headers(t.headers),method:f,credentials:i};(h=this.config)!=null&&h.cache&&(w.cache=this.config.cache),g&&(w.duplex="half"),typeof AbortController<"u"&&(w.signal=r),fs.supported&&(w.keepalive=s),typeof this.config.requestInit=="function"&&Object.assign(w,this.config.requestInit(t));let R=()=>{};const k=Zo(p,w),_=[fetch(k).then(E=>{const B=E.headers,m={};for(const b of B.entries())m[b[0]]=b[1];return E.body!=null?{response:new en({headers:m,reason:E.statusText,statusCode:E.status,body:E.body})}:E.blob().then(b=>({response:new en({headers:m,reason:E.statusText,statusCode:E.status,body:b})}))}),_f(n)];return r&&_.push(new Promise((E,B)=>{const m=()=>{const S=new Error("Request aborted");S.name="AbortError",B(S)};if(typeof r.addEventListener=="function"){const S=r;S.addEventListener("abort",m,{once:!0}),R=()=>S.removeEventListener("abort",m)}else r.onabort=m})),Promise.race(_).finally(R)}updateHttpClientConfig(t,r){this.config=void 0,this.configProvider=this.configProvider.then(n=>(n[t]=r,n))}httpHandlerConfigs(){return this.config??{}}}const Uu=async e=>{var t;return typeof Blob=="function"&&e instanceof Blob||((t=e.constructor)==null?void 0:t.name)==="Blob"?Blob.prototype.arrayBuffer!==void 0?new Uint8Array(await e.arrayBuffer()):Tf(e):kf(e)};async function Tf(e){const t=await Bf(e),r=Vi(t);return new Uint8Array(r)}async function kf(e){const t=[],r=e.getReader();let n=!1,s=0;for(;!n;){const{done:a,value:c}=await r.read();c&&(t.push(c),s+=c.length),n=a}const i=new Uint8Array(s);let o=0;for(const a of t)i.set(a,o),o+=a.length;return i}function Bf(e){return new Promise((t,r)=>{const n=new FileReader;n.onloadend=()=>{if(n.readyState!==2)return r(new Error("Reader aborted too early"));const s=n.result??"",i=s.indexOf(","),o=i>-1?i+1:s.length;t(s.substring(o))},n.onabort=()=>r(new Error("Read aborted")),n.onerror=()=>r(n.error),n.readAsDataURL(e)})}const Lu={},Ni={};for(let e=0;e<256;e++){let t=e.toString(16).toLowerCase();t.length===1&&(t=`0${t}`),Lu[e]=t,Ni[t]=e}function $u(e){if(e.length%2!==0)throw new Error("Hex encoded strings must have an even number length");const t=new Uint8Array(e.length/2);for(let r=0;r<e.length;r+=2){const n=e.slice(r,r+2).toLowerCase();if(n in Ni)t[r/2]=Ni[n];else throw new Error(`Cannot decode unrecognized sequence ${n} as hexadecimal`)}return t}function rt(e){let t="";for(let r=0;r<e.byteLength;r++)t+=Lu[e[r]];return t}const Mi=e=>{var t;return typeof ReadableStream=="function"&&(((t=e==null?void 0:e.constructor)==null?void 0:t.name)===ReadableStream.name||e instanceof ReadableStream)},Yo="The stream has already been transformed.",Nf=e=>{var s,i;if(!Qo(e)&&!Mi(e)){const o=((i=(s=e==null?void 0:e.__proto__)==null?void 0:s.constructor)==null?void 0:i.name)||e;throw new Error(`Unexpected stream implementation, expect Blob or ReadableStream, got ${o}`)}let t=!1;const r=async()=>{if(t)throw new Error(Yo);return t=!0,await Uu(e)},n=o=>{if(typeof o.stream!="function")throw new Error(`Cannot transform payload Blob to web stream. Please make sure the Blob.stream() is polyfilled.
If you are using React Native, this API is not yet supported, see: https://react-native.canny.io/feature-requests/p/fetch-streaming-body`);return o.stream()};return Object.assign(e,{transformToByteArray:r,transformToString:async o=>{const a=await r();if(o==="base64")return Qn(a);if(o==="hex")return rt(a);if(o===void 0||o==="utf8"||o==="utf-8")return Gi(a);if(typeof TextDecoder=="function")return new TextDecoder(o).decode(a);throw new Error("TextDecoder is not available, please make sure polyfill is provided.")},transformToWebStream:()=>{if(t)throw new Error(Yo);if(t=!0,Qo(e))return n(e);if(Mi(e))return e;throw new Error(`Cannot transform payload to web stream, got ${e}`)}})},Qo=e=>typeof Blob=="function"&&e instanceof Blob;async function Mf(e){return typeof e.stream=="function"&&(e=e.stream()),e.tee()}async function If(e,t){let r=0;const n=[],s=e.getReader();let i=!1;for(;!i;){const{done:c,value:u}=await s.read();if(u&&(n.push(u),r+=(u==null?void 0:u.byteLength)??0),r>=t)break;i=c}s.releaseLock();const o=new Uint8Array(Math.min(t,r));let a=0;for(const c of n){if(c.byteLength>o.byteLength-a){o.set(c.subarray(0,o.byteLength-a),a);break}else o.set(c,a);a+=c.length}return o}const Pf=typeof ReadableStream=="function"?ReadableStream:function(){};class Ff extends Pf{}const Of=({expectedChecksum:e,checksum:t,source:r,checksumSourceLocation:n,base64Encoder:s})=>{var c;if(!Mi(r))throw new Error(`@smithy/util-stream: unsupported source type ${((c=r==null?void 0:r.constructor)==null?void 0:c.name)??r} in ChecksumStream.`);const i=s??Qn;if(typeof TransformStream!="function")throw new Error("@smithy/util-stream: unable to instantiate ChecksumStream because API unavailable: ReadableStream/TransformStream.");const o=new TransformStream({start(){},async transform(u,f){t.update(u),f.enqueue(u)},async flush(u){const f=await t.digest(),p=i(f);if(e!==p){const g=new Error(`Checksum mismatch: expected "${e}" but received "${p}" in response header "${n}".`);u.error(g)}else u.terminate()}});r.pipeThrough(o);const a=o.readable;return Object.setPrototypeOf(a,Ff.prototype),a},on=async(e=new Uint8Array,t)=>{if(e instanceof Uint8Array)return Jt.mutate(e);if(!e)return Jt.mutate(new Uint8Array);const r=t.streamCollector(e);return Jt.mutate(await r)};function On(e){return encodeURIComponent(e).replace(/[!'()*]/g,function(t){return"%"+t.charCodeAt(0).toString(16).toUpperCase()})}const Df=(e,t,r,n,s,i)=>{if(t!=null&&t[r]!==void 0){const o=n();if(o.length<=0)throw new Error("Empty value provided for input HTTP label: "+r+".");e=e.replace(s,i?o.split("/").map(a=>On(a)).join("/"):On(o))}else throw new Error("No value provided for input HTTP label: "+r+".");return e};function sr(e,t){return new Uf(e,t)}class Uf{constructor(t,r){this.input=t,this.context=r,this.query={},this.method="",this.headers={},this.path="",this.body=null,this.hostname="",this.resolvePathStack=[]}async build(){const{hostname:t,protocol:r="https",port:n,path:s}=await this.context.endpoint();this.path=s;for(const i of this.resolvePathStack)i(this.path);return new Ie({protocol:r,hostname:this.hostname||t,port:n,method:this.method,path:this.path,query:this.query,body:this.body,headers:this.headers})}hn(t){return this.hostname=t,this}bp(t){return this.resolvePathStack.push(r=>{this.path=`${r!=null&&r.endsWith("/")?r.slice(0,-1):r||""}`+t}),this}p(t,r,n,s){return this.resolvePathStack.push(i=>{this.path=Df(i,this.input,t,r,n,s)}),this}h(t){return this.headers=t,this}q(t){return this.query=t,this}b(t){return this.body=t,this}m(t){return this.method=t,this}}function Lf(e,t,r){e.__smithy_context?e.__smithy_context.features||(e.__smithy_context.features={}):e.__smithy_context={features:{}},e.__smithy_context.features[t]=r}class $f{constructor(t){this.authSchemes=new Map;for(const[r,n]of Object.entries(t))n!==void 0&&this.authSchemes.set(r,n)}getIdentityProvider(t){return this.authSchemes.get(t)}}const Hf=e=>t=>Hu(t)&&t.expiration.getTime()-Date.now()<e,qf=3e5,zf=Hf(qf),Hu=e=>e.expiration!==void 0,jf=(e,t,r)=>{if(e===void 0)return;const n=typeof e!="function"?async()=>Promise.resolve(e):e;let s,i,o,a=!1;const c=async u=>{i||(i=n(u));try{s=await i,o=!0,a=!1}finally{i=void 0}return s};return t===void 0?async u=>((!o||u!=null&&u.forceRefresh)&&(s=await c(u)),s):async u=>((!o||u!=null&&u.forceRefresh)&&(s=await c(u)),a?s:r(s)?(t(s)&&await c(u),s):(a=!0,s))},Wf=(e,t,r)=>{let n,s,i,o=!1;const a=async()=>{s||(s=e());try{n=await s,i=!0,o=!1}finally{s=void 0}return n};return async c=>((!i||c!=null&&c.forceRefresh)&&(n=await a()),n)},Kf=e=>(e.sigv4aSigningRegionSet=br(e.sigv4aSigningRegionSet),e),Vf="X-Amz-Algorithm",Gf="X-Amz-Credential",qu="X-Amz-Date",Xf="X-Amz-SignedHeaders",Zf="X-Amz-Expires",zu="X-Amz-Signature",ju="X-Amz-Security-Token",Wu="authorization",Ku=qu.toLowerCase(),Yf="date",Qf=[Wu,Ku,Yf],Jf=zu.toLowerCase(),Ii="x-amz-content-sha256",eh=ju.toLowerCase(),th={authorization:!0,"cache-control":!0,connection:!0,expect:!0,from:!0,"keep-alive":!0,"max-forwards":!0,pragma:!0,referer:!0,te:!0,trailer:!0,"transfer-encoding":!0,upgrade:!0,"user-agent":!0,"x-amzn-trace-id":!0},rh=/^proxy-/,nh=/^sec-/,hs="AWS4-HMAC-SHA256",sh="AWS4-HMAC-SHA256-PAYLOAD",ih="UNSIGNED-PAYLOAD",oh=50,Vu="aws4_request",ah=60*60*24*7,yn={},ps=[],gs=(e,t,r)=>`${e}/${t}/${r}/${Vu}`,ch=async(e,t,r,n,s)=>{const i=await Jo(e,t.secretAccessKey,t.accessKeyId),o=`${r}:${n}:${s}:${rt(i)}:${t.sessionToken}`;if(o in yn)return yn[o];for(ps.push(o);ps.length>oh;)delete yn[ps.shift()];let a=`AWS4${t.secretAccessKey}`;for(const c of[r,n,s,Vu])a=await Jo(e,a,c);return yn[o]=a},Jo=(e,t,r)=>{const n=new e(t);return n.update(vr(r)),n.digest()},ea=({headers:e},t,r)=>{const n={};for(const s of Object.keys(e).sort()){if(e[s]==null)continue;const i=s.toLowerCase();(i in th||t!=null&&t.has(i)||rh.test(i)||nh.test(i))&&(!r||r&&!r.has(i))||(n[i]=e[s].trim().replace(/\s+/g," "))}return n},uh=({query:e={}})=>{const t=[],r={};for(const n of Object.keys(e)){if(n.toLowerCase()===Jf)continue;const s=er(n);t.push(s);const i=e[n];typeof i=="string"?r[s]=`${s}=${er(i)}`:Array.isArray(i)&&(r[s]=i.slice(0).reduce((o,a)=>o.concat([`${s}=${er(a)}`]),[]).sort().join("&"))}return t.sort().map(n=>r[n]).filter(n=>n).join("&")},Gu=e=>typeof ArrayBuffer=="function"&&e instanceof ArrayBuffer||Object.prototype.toString.call(e)==="[object ArrayBuffer]",ms=async({headers:e,body:t},r)=>{for(const n of Object.keys(e))if(n.toLowerCase()===Ii)return e[n];if(t==null)return"e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855";if(typeof t=="string"||ArrayBuffer.isView(t)||Gu(t)){const n=new r;return n.update(vr(t)),rt(await n.digest())}return ih};class lh{format(t){const r=[];for(const i of Object.keys(t)){const o=rr(i);r.push(Uint8Array.from([o.byteLength]),o,this.formatHeaderValue(t[i]))}const n=new Uint8Array(r.reduce((i,o)=>i+o.byteLength,0));let s=0;for(const i of r)n.set(i,s),s+=i.byteLength;return n}formatHeaderValue(t){switch(t.type){case"boolean":return Uint8Array.from([t.value?0:1]);case"byte":return Uint8Array.from([2,t.value]);case"short":const r=new DataView(new ArrayBuffer(3));return r.setUint8(0,3),r.setInt16(1,t.value,!1),new Uint8Array(r.buffer);case"integer":const n=new DataView(new ArrayBuffer(5));return n.setUint8(0,4),n.setInt32(1,t.value,!1),new Uint8Array(n.buffer);case"long":const s=new Uint8Array(9);return s[0]=5,s.set(t.value.bytes,1),s;case"binary":const i=new DataView(new ArrayBuffer(3+t.value.byteLength));i.setUint8(0,6),i.setUint16(1,t.value.byteLength,!1);const o=new Uint8Array(i.buffer);return o.set(t.value,3),o;case"string":const a=rr(t.value),c=new DataView(new ArrayBuffer(3+a.byteLength));c.setUint8(0,7),c.setUint16(1,a.byteLength,!1);const u=new Uint8Array(c.buffer);return u.set(a,3),u;case"timestamp":const f=new Uint8Array(9);return f[0]=8,f.set(fh.fromNumber(t.value.valueOf()).bytes,1),f;case"uuid":if(!dh.test(t.value))throw new Error(`Invalid UUID received: ${t.value}`);const p=new Uint8Array(17);return p[0]=9,p.set($u(t.value.replace(/\-/g,"")),1),p}}}var ta;(function(e){e[e.boolTrue=0]="boolTrue",e[e.boolFalse=1]="boolFalse",e[e.byte=2]="byte",e[e.short=3]="short",e[e.integer=4]="integer",e[e.long=5]="long",e[e.byteArray=6]="byteArray",e[e.string=7]="string",e[e.timestamp=8]="timestamp",e[e.uuid=9]="uuid"})(ta||(ta={}));const dh=/^[a-f0-9]{8}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{12}$/;let fh=class Xu{constructor(t){if(this.bytes=t,t.byteLength!==8)throw new Error("Int64 buffers must be exactly 8 bytes")}static fromNumber(t){if(t>9223372036854776e3||t<-9223372036854776e3)throw new Error(`${t} is too large (or, if negative, too small) to represent as an Int64`);const r=new Uint8Array(8);for(let n=7,s=Math.abs(Math.round(t));n>-1&&s>0;n--,s/=256)r[n]=s;return t<0&&ra(r),new Xu(r)}valueOf(){const t=this.bytes.slice(0),r=t[0]&128;return r&&ra(t),parseInt(rt(t),16)*(r?-1:1)}toString(){return String(this.valueOf())}};function ra(e){for(let t=0;t<8;t++)e[t]^=255;for(let t=7;t>-1&&(e[t]++,e[t]===0);t--);}const hh=(e,t)=>{e=e.toLowerCase();for(const r of Object.keys(t))if(e===r.toLowerCase())return!0;return!1},ph=(e,t={})=>{var s,i;const{headers:r,query:n={}}=Ie.clone(e);for(const o of Object.keys(r)){const a=o.toLowerCase();(a.slice(0,6)==="x-amz-"&&!((s=t.unhoistableHeaders)!=null&&s.has(a))||(i=t.hoistableHeaders)!=null&&i.has(a))&&(n[o]=r[o],delete r[o])}return{...e,headers:r,query:n}},na=e=>{e=Ie.clone(e);for(const t of Object.keys(e.headers))Qf.indexOf(t.toLowerCase())>-1&&delete e.headers[t];return e},gh=e=>mh(e).toISOString().replace(/\.\d{3}Z$/,"Z"),mh=e=>typeof e=="number"?new Date(e*1e3):typeof e=="string"?Number(e)?new Date(Number(e)*1e3):new Date(e):e;class Pi{constructor({applyChecksum:t,credentials:r,region:n,service:s,sha256:i,uriEscapePath:o=!0}){this.headerFormatter=new lh,this.service=s,this.sha256=i,this.uriEscapePath=o,this.applyChecksum=typeof t=="boolean"?t:!0,this.regionProvider=Et(n),this.credentialProvider=Et(r)}async presign(t,r={}){const{signingDate:n=new Date,expiresIn:s=3600,unsignableHeaders:i,unhoistableHeaders:o,signableHeaders:a,hoistableHeaders:c,signingRegion:u,signingService:f}=r,p=await this.credentialProvider();this.validateResolvedCredentials(p);const g=u??await this.regionProvider(),{longDate:w,shortDate:R}=wn(n);if(s>ah)return Promise.reject("Signature version 4 presigned URLs must have an expiration date less than one week in the future");const k=gs(R,g,f??this.service),_=ph(na(t),{unhoistableHeaders:o,hoistableHeaders:c});p.sessionToken&&(_.query[ju]=p.sessionToken),_.query[Vf]=hs,_.query[Gf]=`${p.accessKeyId}/${k}`,_.query[qu]=w,_.query[Zf]=s.toString(10);const h=ea(_,i,a);return _.query[Xf]=sa(h),_.query[zu]=await this.getSignature(w,k,this.getSigningKey(p,g,R,f),this.createCanonicalRequest(_,h,await ms(t,this.sha256))),_}async sign(t,r){return typeof t=="string"?this.signString(t,r):t.headers&&t.payload?this.signEvent(t,r):t.message?this.signMessage(t,r):this.signRequest(t,r)}async signEvent({headers:t,payload:r},{signingDate:n=new Date,priorSignature:s,signingRegion:i,signingService:o}){const a=i??await this.regionProvider(),{shortDate:c,longDate:u}=wn(n),f=gs(c,a,o??this.service),p=await ms({headers:{},body:r},this.sha256),g=new this.sha256;g.update(t);const w=rt(await g.digest()),R=[sh,u,f,s,w,p].join(`
`);return this.signString(R,{signingDate:n,signingRegion:a,signingService:o})}async signMessage(t,{signingDate:r=new Date,signingRegion:n,signingService:s}){return this.signEvent({headers:this.headerFormatter.format(t.message.headers),payload:t.message.body},{signingDate:r,signingRegion:n,signingService:s,priorSignature:t.priorSignature}).then(o=>({message:t.message,signature:o}))}async signString(t,{signingDate:r=new Date,signingRegion:n,signingService:s}={}){const i=await this.credentialProvider();this.validateResolvedCredentials(i);const o=n??await this.regionProvider(),{shortDate:a}=wn(r),c=new this.sha256(await this.getSigningKey(i,o,a,s));return c.update(vr(t)),rt(await c.digest())}async signRequest(t,{signingDate:r=new Date,signableHeaders:n,unsignableHeaders:s,signingRegion:i,signingService:o}={}){const a=await this.credentialProvider();this.validateResolvedCredentials(a);const c=i??await this.regionProvider(),u=na(t),{longDate:f,shortDate:p}=wn(r),g=gs(p,c,o??this.service);u.headers[Ku]=f,a.sessionToken&&(u.headers[eh]=a.sessionToken);const w=await ms(u,this.sha256);!hh(Ii,u.headers)&&this.applyChecksum&&(u.headers[Ii]=w);const R=ea(u,s,n),k=await this.getSignature(f,g,this.getSigningKey(a,c,p,o),this.createCanonicalRequest(u,R,w));return u.headers[Wu]=`${hs} Credential=${a.accessKeyId}/${g}, SignedHeaders=${sa(R)}, Signature=${k}`,u}createCanonicalRequest(t,r,n){const s=Object.keys(r).sort();return`${t.method}
${this.getCanonicalPath(t)}
${uh(t)}
${s.map(i=>`${i}:${r[i]}`).join(`
`)}

${s.join(";")}
${n}`}async createStringToSign(t,r,n){const s=new this.sha256;s.update(vr(n));const i=await s.digest();return`${hs}
${t}
${r}
${rt(i)}`}getCanonicalPath({path:t}){if(this.uriEscapePath){const r=[];for(const i of t.split("/"))(i==null?void 0:i.length)!==0&&i!=="."&&(i===".."?r.pop():r.push(i));const n=`${t!=null&&t.startsWith("/")?"/":""}${r.join("/")}${r.length>0&&(t!=null&&t.endsWith("/"))?"/":""}`;return er(n).replace(/%2F/g,"/")}return t}async getSignature(t,r,n,s){const i=await this.createStringToSign(t,r,s),o=new this.sha256(await n);return o.update(vr(i)),rt(await o.digest())}getSigningKey(t,r,n,s){return ch(this.sha256,t,n,r,s||this.service)}validateResolvedCredentials(t){if(typeof t!="object"||typeof t.accessKeyId!="string"||typeof t.secretAccessKey!="string")throw new Error("Resolved credential object is not valid")}}const wn=e=>{const t=gh(e).replace(/[\-:]/g,"");return{longDate:t,shortDate:t.slice(0,8)}},sa=e=>Object.keys(e).sort().join(";"),yh=e=>{let t=!1,r;e.credentials&&(t=!0,r=jf(e.credentials,zf,Hu)),r||(e.credentialDefaultProvider?r=br(e.credentialDefaultProvider(Object.assign({},e,{parentClientConfig:e}))):r=async()=>{throw new Error("`credentials` is missing")});const n=async()=>r({callerClientConfig:e}),{signingEscapePath:s=!0,systemClockOffset:i=e.systemClockOffset||0,sha256:o}=e;let a;return e.signer?a=br(e.signer):e.regionInfoProvider?a=()=>br(e.region)().then(async c=>[await e.regionInfoProvider(c,{useFipsEndpoint:await e.useFipsEndpoint(),useDualstackEndpoint:await e.useDualstackEndpoint()})||{},c]).then(([c,u])=>{const{signingRegion:f,signingService:p}=c;e.signingRegion=e.signingRegion||f||u,e.signingName=e.signingName||p||e.serviceId;const g={...e,credentials:n,region:e.signingRegion,service:e.signingName,sha256:o,uriEscapePath:s},w=e.signerConstructor||Pi;return new w(g)}):a=async c=>{c=Object.assign({},{name:"sigv4",signingName:e.signingName||e.defaultSigningName,signingRegion:await br(e.region)(),properties:{}},c);const u=c.signingRegion,f=c.signingName;e.signingRegion=e.signingRegion||u,e.signingName=e.signingName||f||e.serviceId;const p={...e,credentials:n,region:e.signingRegion,service:e.signingName,sha256:o,uriEscapePath:s},g=e.signerConstructor||Pi;return new g(p)},{...e,systemClockOffset:i,signingEscapePath:s,credentials:t?async()=>n().then(c=>af(c,"CREDENTIALS_CODE","e")):n,signer:a}},Zt=(e,t)=>{const r=[];if(e&&r.push(e),t)for(const n of t)r.push(n);return r},It=(e,t)=>`${e||"anonymous"}${t&&t.length>0?` (a.k.a. ${t.join(",")})`:""}`,Dn=()=>{let e=[],t=[],r=!1;const n=new Set,s=p=>p.sort((g,w)=>ia[w.step]-ia[g.step]||oa[w.priority||"normal"]-oa[g.priority||"normal"]),i=p=>{let g=!1;const w=R=>{const k=Zt(R.name,R.aliases);if(k.includes(p)){g=!0;for(const _ of k)n.delete(_);return!1}return!0};return e=e.filter(w),t=t.filter(w),g},o=p=>{let g=!1;const w=R=>{if(R.middleware===p){g=!0;for(const k of Zt(R.name,R.aliases))n.delete(k);return!1}return!0};return e=e.filter(w),t=t.filter(w),g},a=p=>{var g;return e.forEach(w=>{p.add(w.middleware,{...w})}),t.forEach(w=>{p.addRelativeTo(w.middleware,{...w})}),(g=p.identifyOnResolve)==null||g.call(p,f.identifyOnResolve()),p},c=p=>{const g=[];return p.before.forEach(w=>{w.before.length===0&&w.after.length===0?g.push(w):g.push(...c(w))}),g.push(p),p.after.reverse().forEach(w=>{w.before.length===0&&w.after.length===0?g.push(w):g.push(...c(w))}),g},u=(p=!1)=>{const g=[],w=[],R={};return e.forEach(_=>{const h={..._,before:[],after:[]};for(const E of Zt(h.name,h.aliases))R[E]=h;g.push(h)}),t.forEach(_=>{const h={..._,before:[],after:[]};for(const E of Zt(h.name,h.aliases))R[E]=h;w.push(h)}),w.forEach(_=>{if(_.toMiddleware){const h=R[_.toMiddleware];if(h===void 0){if(p)return;throw new Error(`${_.toMiddleware} is not found when adding ${It(_.name,_.aliases)} middleware ${_.relation} ${_.toMiddleware}`)}_.relation==="after"&&h.after.push(_),_.relation==="before"&&h.before.push(_)}}),s(g).map(c).reduce((_,h)=>(_.push(...h),_),[])},f={add:(p,g={})=>{const{name:w,override:R,aliases:k}=g,_={step:"initialize",priority:"normal",middleware:p,...g},h=Zt(w,k);if(h.length>0){if(h.some(E=>n.has(E))){if(!R)throw new Error(`Duplicate middleware name '${It(w,k)}'`);for(const E of h){const B=e.findIndex(S=>{var b;return S.name===E||((b=S.aliases)==null?void 0:b.some(F=>F===E))});if(B===-1)continue;const m=e[B];if(m.step!==_.step||_.priority!==m.priority)throw new Error(`"${It(m.name,m.aliases)}" middleware with ${m.priority} priority in ${m.step} step cannot be overridden by "${It(w,k)}" middleware with ${_.priority} priority in ${_.step} step.`);e.splice(B,1)}}for(const E of h)n.add(E)}e.push(_)},addRelativeTo:(p,g)=>{const{name:w,override:R,aliases:k}=g,_={middleware:p,...g},h=Zt(w,k);if(h.length>0){if(h.some(E=>n.has(E))){if(!R)throw new Error(`Duplicate middleware name '${It(w,k)}'`);for(const E of h){const B=t.findIndex(S=>{var b;return S.name===E||((b=S.aliases)==null?void 0:b.some(F=>F===E))});if(B===-1)continue;const m=t[B];if(m.toMiddleware!==_.toMiddleware||m.relation!==_.relation)throw new Error(`"${It(m.name,m.aliases)}" middleware ${m.relation} "${m.toMiddleware}" middleware cannot be overridden by "${It(w,k)}" middleware ${_.relation} "${_.toMiddleware}" middleware.`);t.splice(B,1)}}for(const E of h)n.add(E)}t.push(_)},clone:()=>a(Dn()),use:p=>{p.applyToStack(f)},remove:p=>typeof p=="string"?i(p):o(p),removeByTag:p=>{let g=!1;const w=R=>{const{tags:k,name:_,aliases:h}=R;if(k&&k.includes(p)){const E=Zt(_,h);for(const B of E)n.delete(B);return g=!0,!1}return!0};return e=e.filter(w),t=t.filter(w),g},concat:p=>{var w;const g=a(Dn());return g.use(p),g.identifyOnResolve(r||g.identifyOnResolve()||(((w=p.identifyOnResolve)==null?void 0:w.call(p))??!1)),g},applyToStack:a,identify:()=>u(!0).map(p=>{const g=p.step??p.relation+" "+p.toMiddleware;return It(p.name,p.aliases)+" - "+g}),identifyOnResolve(p){return typeof p=="boolean"&&(r=p),r},resolve:(p,g)=>{for(const w of u().map(R=>R.middleware).reverse())p=w(p,g);return r&&console.log(f.identify()),p}};return f},ia={initialize:5,serialize:4,build:3,finalizeRequest:2,deserialize:1},oa={high:3,normal:2,low:1};class wh{constructor(t){this.config=t,this.middlewareStack=Dn()}send(t,r,n){const s=typeof r!="function"?r:void 0,i=typeof r=="function"?r:n,o=s===void 0&&this.config.cacheMiddleware===!0;let a;if(o){this.handlers||(this.handlers=new WeakMap);const c=this.handlers;c.has(t.constructor)?a=c.get(t.constructor):(a=t.resolveMiddleware(this.middlewareStack,this.config,s),c.set(t.constructor,a))}else delete this.handlers,a=t.resolveMiddleware(this.middlewareStack,this.config,s);if(i)a(t).then(c=>i(null,c.output),c=>i(c)).catch(()=>{});else return a(t).then(c=>c.output)}destroy(){var t,r,n;(n=(r=(t=this.config)==null?void 0:t.requestHandler)==null?void 0:r.destroy)==null||n.call(r),delete this.handlers}}class Wt{constructor(){this.middlewareStack=Dn()}static classBuilder(){return new bh}resolveMiddlewareWithContext(t,r,n,{middlewareFn:s,clientName:i,commandName:o,inputFilterSensitiveLog:a,outputFilterSensitiveLog:c,smithyContext:u,additionalContext:f,CommandCtor:p}){for(const _ of s.bind(this)(p,t,r,n))this.middlewareStack.use(_);const g=t.concat(this.middlewareStack),{logger:w}=r,R={logger:w,clientName:i,commandName:o,inputFilterSensitiveLog:a,outputFilterSensitiveLog:c,[ki]:{commandInstance:this,...u},...f},{requestHandler:k}=r;return g.resolve(_=>k.handle(_.request,n||{}),R)}}class bh{constructor(){this._init=()=>{},this._ep={},this._middlewareFn=()=>[],this._commandName="",this._clientName="",this._additionalContext={},this._smithyContext={},this._inputFilterSensitiveLog=t=>t,this._outputFilterSensitiveLog=t=>t,this._serializer=null,this._deserializer=null}init(t){this._init=t}ep(t){return this._ep=t,this}m(t){return this._middlewareFn=t,this}s(t,r,n={}){return this._smithyContext={service:t,operation:r,...n},this}c(t={}){return this._additionalContext=t,this}n(t,r){return this._clientName=t,this._commandName=r,this}f(t=n=>n,r=n=>n){return this._inputFilterSensitiveLog=t,this._outputFilterSensitiveLog=r,this}ser(t){return this._serializer=t,this}de(t){return this._deserializer=t,this}build(){const t=this;let r;return r=class extends Wt{static getEndpointParameterInstructions(){return t._ep}constructor(...[n]){super(),this.serialize=t._serializer,this.deserialize=t._deserializer,this.input=n??{},t._init(this)}resolveMiddleware(n,s,i){return this.resolveMiddlewareWithContext(n,s,i,{CommandCtor:r,middlewareFn:t._middlewareFn,clientName:t._clientName,commandName:t._commandName,inputFilterSensitiveLog:t._inputFilterSensitiveLog,outputFilterSensitiveLog:t._outputFilterSensitiveLog,smithyContext:t._smithyContext,additionalContext:t._additionalContext})}}}}const Ne="***SensitiveInformation***",an=e=>{switch(e){case"true":return!0;case"false":return!1;default:throw new Error(`Unable to parse boolean value "${e}"`)}},Eh=e=>{if(e!=null){if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return String(t)!==String(e)&&Qu.warn(Yu(`Expected number but observed string: ${e}`)),t}if(typeof e=="number")return e;throw new TypeError(`Expected number, got ${typeof e}: ${e}`)}},Sh=Math.ceil(2**127*(2-2**-23)),aa=e=>{const t=Eh(e);if(t!==void 0&&!Number.isNaN(t)&&t!==1/0&&t!==-1/0&&Math.abs(t)>Sh)throw new TypeError(`Expected 32-bit float, got ${e}`);return t},Fi=e=>{if(e!=null){if(Number.isInteger(e)&&!Number.isNaN(e))return e;throw new TypeError(`Expected integer, got ${typeof e}: ${e}`)}},ca=e=>Zu(e,16),ua=e=>Zu(e,8),Zu=(e,t)=>{const r=Fi(e);if(r!==void 0&&xh(r,t)!==r)throw new TypeError(`Expected ${t}-bit integer, got ${e}`);return r},xh=(e,t)=>{switch(t){case 32:return Int32Array.of(e)[0];case 16:return Int16Array.of(e)[0];case 8:return Int8Array.of(e)[0]}},Nt=(e,t)=>{if(e==null)throw t?new TypeError(`Expected a non-null value for ${t}`):new TypeError("Expected a non-null value");return e},Zi=e=>{if(e==null)return;if(typeof e=="object"&&!Array.isArray(e))return e;const t=Array.isArray(e)?"array":typeof e;throw new TypeError(`Expected object, got ${t}: ${e}`)},qe=e=>{if(e!=null){if(typeof e=="string")return e;if(["boolean","number","bigint"].includes(typeof e))return Qu.warn(Yu(`Expected string, got ${typeof e}: ${e}`)),String(e);throw new TypeError(`Expected string, got ${typeof e}: ${e}`)}},vh=e=>aa(typeof e=="string"?Jn(e):e),Ah=/(-?(?:0|[1-9]\d*)(?:\.\d+)?(?:[eE][+-]?\d+)?)|(-?Infinity)|(NaN)/g,Jn=e=>{const t=e.match(Ah);if(t===null||t[0].length!==e.length)throw new TypeError("Expected real number, got implicit NaN");return parseFloat(e)},Ch=e=>Fi(typeof e=="string"?Jn(e):e),Un=e=>ca(typeof e=="string"?Jn(e):e),Rh=e=>ua(typeof e=="string"?Jn(e):e),Yu=e=>String(new TypeError(e).stack||e).split(`
`).slice(0,5).filter(t=>!t.includes("stackTraceWarning")).join(`
`),Qu={warn:console.warn},_h=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],Yi=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function Qi(e){const t=e.getUTCFullYear(),r=e.getUTCMonth(),n=e.getUTCDay(),s=e.getUTCDate(),i=e.getUTCHours(),o=e.getUTCMinutes(),a=e.getUTCSeconds(),c=s<10?`0${s}`:`${s}`,u=i<10?`0${i}`:`${i}`,f=o<10?`0${o}`:`${o}`,p=a<10?`0${a}`:`${a}`;return`${_h[n]}, ${c} ${Yi[r]} ${t} ${u}:${f}:${p} GMT`}const Th=new RegExp(/^(\d{4})-(\d{2})-(\d{2})[tT](\d{2}):(\d{2}):(\d{2})(?:\.(\d+))?(([-+]\d{2}\:\d{2})|[zZ])$/),kh=e=>{if(e==null)return;if(typeof e!="string")throw new TypeError("RFC-3339 date-times must be expressed as strings");const t=Th.exec(e);if(!t)throw new TypeError("Invalid RFC-3339 date-time value");const[r,n,s,i,o,a,c,u,f]=t,p=Un(tn(n)),g=Lt(s,"month",1,12),w=Lt(i,"day",1,31),R=Bn(p,g,w,{hours:o,minutes:a,seconds:c,fractionalMilliseconds:u});return f.toUpperCase()!="Z"&&R.setTime(R.getTime()-Hh(f)),R},Bh=new RegExp(/^(?:Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d{2}) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d{1,2}):(\d{2}):(\d{2})(?:\.(\d+))? GMT$/),Nh=new RegExp(/^(?:Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday), (\d{2})-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d{2}) (\d{1,2}):(\d{2}):(\d{2})(?:\.(\d+))? GMT$/),Mh=new RegExp(/^(?:Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( [1-9]|\d{2}) (\d{1,2}):(\d{2}):(\d{2})(?:\.(\d+))? (\d{4})$/),Ih=e=>{if(e==null)return;if(typeof e!="string")throw new TypeError("RFC-7231 date-times must be expressed as strings");let t=Bh.exec(e);if(t){const[r,n,s,i,o,a,c,u]=t;return Bn(Un(tn(i)),ys(s),Lt(n,"day",1,31),{hours:o,minutes:a,seconds:c,fractionalMilliseconds:u})}if(t=Nh.exec(e),t){const[r,n,s,i,o,a,c,u]=t;return Oh(Bn(Ph(i),ys(s),Lt(n,"day",1,31),{hours:o,minutes:a,seconds:c,fractionalMilliseconds:u}))}if(t=Mh.exec(e),t){const[r,n,s,i,o,a,c,u]=t;return Bn(Un(tn(u)),ys(n),Lt(s.trimLeft(),"day",1,31),{hours:i,minutes:o,seconds:a,fractionalMilliseconds:c})}throw new TypeError("Invalid RFC-7231 date-time value")},Bn=(e,t,r,n)=>{const s=t-1;return Uh(e,s,r),new Date(Date.UTC(e,s,r,Lt(n.hours,"hour",0,23),Lt(n.minutes,"minute",0,59),Lt(n.seconds,"seconds",0,60),$h(n.fractionalMilliseconds)))},Ph=e=>{const t=new Date().getUTCFullYear(),r=Math.floor(t/100)*100+Un(tn(e));return r<t?r+100:r},Fh=50*365*24*60*60*1e3,Oh=e=>e.getTime()-new Date().getTime()>Fh?new Date(Date.UTC(e.getUTCFullYear()-100,e.getUTCMonth(),e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),e.getUTCMilliseconds())):e,ys=e=>{const t=Yi.indexOf(e);if(t<0)throw new TypeError(`Invalid month: ${e}`);return t+1},Dh=[31,28,31,30,31,30,31,31,30,31,30,31],Uh=(e,t,r)=>{let n=Dh[t];if(t===1&&Lh(e)&&(n=29),r>n)throw new TypeError(`Invalid day for ${Yi[t]} in ${e}: ${r}`)},Lh=e=>e%4===0&&(e%100!==0||e%400===0),Lt=(e,t,r,n)=>{const s=Rh(tn(e));if(s<r||s>n)throw new TypeError(`${t} must be between ${r} and ${n}, inclusive`);return s},$h=e=>e==null?0:vh("0."+e)*1e3,Hh=e=>{const t=e[0];let r=1;if(t=="+")r=1;else if(t=="-")r=-1;else throw new TypeError(`Offset direction, ${t}, must be "+" or "-"`);const n=Number(e.substring(1,3)),s=Number(e.substring(4,6));return r*(n*60+s)*60*1e3},tn=e=>{let t=0;for(;t<e.length-1&&e.charAt(t)==="0";)t++;return t===0?e:e.slice(t)};class Er extends Error{constructor(t){super(t.message),Object.setPrototypeOf(this,Object.getPrototypeOf(this).constructor.prototype),this.name=t.name,this.$fault=t.$fault,this.$metadata=t.$metadata}static isInstance(t){if(!t)return!1;const r=t;return Er.prototype.isPrototypeOf(r)||!!r.$fault&&!!r.$metadata&&(r.$fault==="client"||r.$fault==="server")}static[Symbol.hasInstance](t){if(!t)return!1;const r=t;return this===Er?Er.isInstance(t):Er.isInstance(t)?r.name&&this.name?this.prototype.isPrototypeOf(t)||r.name===this.name:this.prototype.isPrototypeOf(t):!1}}const st=(e,t={})=>{Object.entries(t).filter(([,n])=>n!==void 0).forEach(([n,s])=>{(e[n]==null||e[n]==="")&&(e[n]=s)});const r=e.message||e.Message||"UnknownError";return e.message=r,delete e.Message,e},qh=({output:e,parsedBody:t,exceptionCtor:r,errorCode:n})=>{const s=jh(e),i=s.httpStatusCode?s.httpStatusCode+"":void 0,o=new r({name:(t==null?void 0:t.code)||(t==null?void 0:t.Code)||n||i||"UnknownError",$fault:"client",$metadata:s});throw st(o,t)},zh=e=>({output:t,parsedBody:r,errorCode:n})=>{qh({output:t,parsedBody:r,exceptionCtor:e,errorCode:n})},jh=e=>({httpStatusCode:e.statusCode,requestId:e.headers["x-amzn-requestid"]??e.headers["x-amzn-request-id"]??e.headers["x-amz-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]}),Wh=e=>{switch(e){case"standard":return{retryMode:"standard",connectionTimeout:3100};case"in-region":return{retryMode:"standard",connectionTimeout:1100};case"cross-region":return{retryMode:"standard",connectionTimeout:3100};case"mobile":return{retryMode:"standard",connectionTimeout:3e4};default:return{}}},Kh=e=>{const t=[];for(const r in Fn){const n=Fn[r];e[n]!==void 0&&t.push({algorithmId:()=>n,checksumConstructor:()=>e[n]})}return{_checksumAlgorithms:t,addChecksumAlgorithm(r){this._checksumAlgorithms.push(r)},checksumAlgorithms(){return this._checksumAlgorithms}}},Vh=e=>{const t={};return e.checksumAlgorithms().forEach(r=>{t[r.algorithmId()]=r.checksumConstructor()}),t},Gh=e=>{let t=e.retryStrategy;return{setRetryStrategy(r){t=r},retryStrategy(){return t}}},Xh=e=>{const t={};return t.retryStrategy=e.retryStrategy(),t},Zh=e=>({...Kh(e),...Gh(e)}),Yh=e=>({...Vh(e),...Xh(e)}),Ju=e=>{const t="#text";for(const r in e)e.hasOwnProperty(r)&&e[r][t]!==void 0?e[r]=e[r][t]:typeof e[r]=="object"&&e[r]!==null&&(e[r]=Ju(e[r]));return e},ze=e=>e!=null;class Ji{trace(){}debug(){}info(){}warn(){}error(){}}function fe(e,t,r){let n,s,i;if(typeof t>"u"&&typeof r>"u")n={},i=e;else{if(n=e,typeof t=="function")return s=t,i=r,Qh(n,s,i);i=t}for(const o of Object.keys(i)){if(!Array.isArray(i[o])){n[o]=i[o];continue}Jh(n,null,i,o)}return n}const Qh=(e,t,r)=>fe(e,Object.entries(r).reduce((n,[s,i])=>(Array.isArray(i)?n[s]=i:typeof i=="function"?n[s]=[t,i()]:n[s]=[t,i],n),{})),Jh=(e,t,r,n)=>{let[s,i]=r[n];if(typeof i=="function"){let o;const a=s===void 0&&(o=i())!=null,c=typeof s=="function"&&!!s(void 0)||typeof s!="function"&&!!s;a?e[n]=o:c&&(e[n]=i())}else{const o=s===void 0&&i!=null,a=typeof s=="function"&&!!s(i)||typeof s!="function"&&!!s;(o||a)&&(e[n]=i)}},el=e=>e.toISOString().replace(".000Z","Z"),ep=(e,t)=>on(e,t).then(r=>t.utf8Encoder(r));var ws={},bs={},la;function eo(){return la||(la=1,function(e){const t=":A-Za-z_\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",r=t+"\\-.\\d\\u00B7\\u0300-\\u036F\\u203F-\\u2040",n="["+t+"]["+r+"]*",s=new RegExp("^"+n+"$"),i=function(a,c){const u=[];let f=c.exec(a);for(;f;){const p=[];p.startIndex=c.lastIndex-f[0].length;const g=f.length;for(let w=0;w<g;w++)p.push(f[w]);u.push(p),f=c.exec(a)}return u},o=function(a){const c=s.exec(a);return!(c===null||typeof c>"u")};e.isExist=function(a){return typeof a<"u"},e.isEmptyObject=function(a){return Object.keys(a).length===0},e.merge=function(a,c,u){if(c){const f=Object.keys(c),p=f.length;for(let g=0;g<p;g++)u==="strict"?a[f[g]]=[c[f[g]]]:a[f[g]]=c[f[g]]}},e.getValue=function(a){return e.isExist(a)?a:""},e.isName=o,e.getAllMatches=i,e.nameRegexp=n}(bs)),bs}var da;function tl(){if(da)return ws;da=1;const e=eo(),t={allowBooleanAttributes:!1,unpairedTags:[]};ws.validate=function(h,E){E=Object.assign({},t,E);const B=[];let m=!1,S=!1;h[0]==="\uFEFF"&&(h=h.substr(1));for(let b=0;b<h.length;b++)if(h[b]==="<"&&h[b+1]==="?"){if(b+=2,b=n(h,b),b.err)return b}else if(h[b]==="<"){let F=b;if(b++,h[b]==="!"){b=s(h,b);continue}else{let I=!1;h[b]==="/"&&(I=!0,b++);let M="";for(;b<h.length&&h[b]!==">"&&h[b]!==" "&&h[b]!=="	"&&h[b]!==`
`&&h[b]!=="\r";b++)M+=h[b];if(M=M.trim(),M[M.length-1]==="/"&&(M=M.substring(0,M.length-1),b--),!R(M)){let q;return M.trim().length===0?q="Invalid space after '<'.":q="Tag '"+M+"' is an invalid name.",g("InvalidTag",q,k(h,b))}const V=a(h,b);if(V===!1)return g("InvalidAttr","Attributes for '"+M+"' have open quote.",k(h,b));let G=V.value;if(b=V.index,G[G.length-1]==="/"){const q=b-G.length;G=G.substring(0,G.length-1);const ie=u(G,E);if(ie===!0)m=!0;else return g(ie.err.code,ie.err.msg,k(h,q+ie.err.line))}else if(I)if(V.tagClosed){if(G.trim().length>0)return g("InvalidTag","Closing tag '"+M+"' can't have attributes or invalid starting.",k(h,F));if(B.length===0)return g("InvalidTag","Closing tag '"+M+"' has not been opened.",k(h,F));{const q=B.pop();if(M!==q.tagName){let ie=k(h,q.tagStartPos);return g("InvalidTag","Expected closing tag '"+q.tagName+"' (opened in line "+ie.line+", col "+ie.col+") instead of closing tag '"+M+"'.",k(h,F))}B.length==0&&(S=!0)}}else return g("InvalidTag","Closing tag '"+M+"' doesn't have proper closing.",k(h,b));else{const q=u(G,E);if(q!==!0)return g(q.err.code,q.err.msg,k(h,b-G.length+q.err.line));if(S===!0)return g("InvalidXml","Multiple possible root nodes found.",k(h,b));E.unpairedTags.indexOf(M)!==-1||B.push({tagName:M,tagStartPos:F}),m=!0}for(b++;b<h.length;b++)if(h[b]==="<")if(h[b+1]==="!"){b++,b=s(h,b);continue}else if(h[b+1]==="?"){if(b=n(h,++b),b.err)return b}else break;else if(h[b]==="&"){const q=p(h,b);if(q==-1)return g("InvalidChar","char '&' is not expected.",k(h,b));b=q}else if(S===!0&&!r(h[b]))return g("InvalidXml","Extra text at the end",k(h,b));h[b]==="<"&&b--}}else{if(r(h[b]))continue;return g("InvalidChar","char '"+h[b]+"' is not expected.",k(h,b))}if(m){if(B.length==1)return g("InvalidTag","Unclosed tag '"+B[0].tagName+"'.",k(h,B[0].tagStartPos));if(B.length>0)return g("InvalidXml","Invalid '"+JSON.stringify(B.map(b=>b.tagName),null,4).replace(/\r?\n/g,"")+"' found.",{line:1,col:1})}else return g("InvalidXml","Start tag expected.",1);return!0};function r(h){return h===" "||h==="	"||h===`
`||h==="\r"}function n(h,E){const B=E;for(;E<h.length;E++)if(h[E]=="?"||h[E]==" "){const m=h.substr(B,E-B);if(E>5&&m==="xml")return g("InvalidXml","XML declaration allowed only at the start of the document.",k(h,E));if(h[E]=="?"&&h[E+1]==">"){E++;break}else continue}return E}function s(h,E){if(h.length>E+5&&h[E+1]==="-"&&h[E+2]==="-"){for(E+=3;E<h.length;E++)if(h[E]==="-"&&h[E+1]==="-"&&h[E+2]===">"){E+=2;break}}else if(h.length>E+8&&h[E+1]==="D"&&h[E+2]==="O"&&h[E+3]==="C"&&h[E+4]==="T"&&h[E+5]==="Y"&&h[E+6]==="P"&&h[E+7]==="E"){let B=1;for(E+=8;E<h.length;E++)if(h[E]==="<")B++;else if(h[E]===">"&&(B--,B===0))break}else if(h.length>E+9&&h[E+1]==="["&&h[E+2]==="C"&&h[E+3]==="D"&&h[E+4]==="A"&&h[E+5]==="T"&&h[E+6]==="A"&&h[E+7]==="["){for(E+=8;E<h.length;E++)if(h[E]==="]"&&h[E+1]==="]"&&h[E+2]===">"){E+=2;break}}return E}const i='"',o="'";function a(h,E){let B="",m="",S=!1;for(;E<h.length;E++){if(h[E]===i||h[E]===o)m===""?m=h[E]:m!==h[E]||(m="");else if(h[E]===">"&&m===""){S=!0;break}B+=h[E]}return m!==""?!1:{value:B,index:E,tagClosed:S}}const c=new RegExp(`(\\s*)([^\\s=]+)(\\s*=)?(\\s*(['"])(([\\s\\S])*?)\\5)?`,"g");function u(h,E){const B=e.getAllMatches(h,c),m={};for(let S=0;S<B.length;S++){if(B[S][1].length===0)return g("InvalidAttr","Attribute '"+B[S][2]+"' has no space in starting.",_(B[S]));if(B[S][3]!==void 0&&B[S][4]===void 0)return g("InvalidAttr","Attribute '"+B[S][2]+"' is without value.",_(B[S]));if(B[S][3]===void 0&&!E.allowBooleanAttributes)return g("InvalidAttr","boolean attribute '"+B[S][2]+"' is not allowed.",_(B[S]));const b=B[S][2];if(!w(b))return g("InvalidAttr","Attribute '"+b+"' is an invalid name.",_(B[S]));if(!m.hasOwnProperty(b))m[b]=1;else return g("InvalidAttr","Attribute '"+b+"' is repeated.",_(B[S]))}return!0}function f(h,E){let B=/\d/;for(h[E]==="x"&&(E++,B=/[\da-fA-F]/);E<h.length;E++){if(h[E]===";")return E;if(!h[E].match(B))break}return-1}function p(h,E){if(E++,h[E]===";")return-1;if(h[E]==="#")return E++,f(h,E);let B=0;for(;E<h.length;E++,B++)if(!(h[E].match(/\w/)&&B<20)){if(h[E]===";")break;return-1}return E}function g(h,E,B){return{err:{code:h,msg:E,line:B.line||B,col:B.col}}}function w(h){return e.isName(h)}function R(h){return e.isName(h)}function k(h,E){const B=h.substring(0,E).split(/\r?\n/);return{line:B.length,col:B[B.length-1].length+1}}function _(h){return h.startIndex+h[1].length}return ws}var bn={},fa;function tp(){if(fa)return bn;fa=1;const e={preserveOrder:!1,attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,removeNSPrefix:!1,allowBooleanAttributes:!1,parseTagValue:!0,parseAttributeValue:!1,trimValues:!0,cdataPropName:!1,numberParseOptions:{hex:!0,leadingZeros:!0,eNotation:!0},tagValueProcessor:function(r,n){return n},attributeValueProcessor:function(r,n){return n},stopNodes:[],alwaysCreateTextNode:!1,isArray:()=>!1,commentPropName:!1,unpairedTags:[],processEntities:!0,htmlEntities:!1,ignoreDeclaration:!1,ignorePiTags:!1,transformTagName:!1,transformAttributeName:!1,updateTag:function(r,n,s){return r}},t=function(r){return Object.assign({},e,r)};return bn.buildOptions=t,bn.defaultOptions=e,bn}var Es,ha;function rp(){if(ha)return Es;ha=1;class e{constructor(r){this.tagname=r,this.child=[],this[":@"]={}}add(r,n){r==="__proto__"&&(r="#__proto__"),this.child.push({[r]:n})}addChild(r){r.tagname==="__proto__"&&(r.tagname="#__proto__"),r[":@"]&&Object.keys(r[":@"]).length>0?this.child.push({[r.tagname]:r.child,":@":r[":@"]}):this.child.push({[r.tagname]:r.child})}}return Es=e,Es}var Ss,pa;function np(){if(pa)return Ss;pa=1;const e=eo();function t(c,u){const f={};if(c[u+3]==="O"&&c[u+4]==="C"&&c[u+5]==="T"&&c[u+6]==="Y"&&c[u+7]==="P"&&c[u+8]==="E"){u=u+9;let p=1,g=!1,w=!1,R="";for(;u<c.length;u++)if(c[u]==="<"&&!w)g&&n(c,u)?(u+=7,[entityName,val,u]=r(c,u+1),val.indexOf("&")===-1&&(f[a(entityName)]={regx:RegExp(`&${entityName};`,"g"),val})):g&&s(c,u)||g&&i(c,u)?u+=8:g&&o(c,u)?u+=9:w=!0,p++,R="";else if(c[u]===">"){if(w?c[u-1]==="-"&&c[u-2]==="-"&&(w=!1,p--):p--,p===0)break}else c[u]==="["?g=!0:R+=c[u];if(p!==0)throw new Error("Unclosed DOCTYPE")}else throw new Error("Invalid Tag instead of DOCTYPE");return{entities:f,i:u}}function r(c,u){let f="";for(;u<c.length&&c[u]!=="'"&&c[u]!=='"';u++)f+=c[u];if(f=f.trim(),f.indexOf(" ")!==-1)throw new Error("External entites are not supported");const p=c[u++];let g="";for(;u<c.length&&c[u]!==p;u++)g+=c[u];return[f,g,u]}function n(c,u){return c[u+1]==="!"&&c[u+2]==="E"&&c[u+3]==="N"&&c[u+4]==="T"&&c[u+5]==="I"&&c[u+6]==="T"&&c[u+7]==="Y"}function s(c,u){return c[u+1]==="!"&&c[u+2]==="E"&&c[u+3]==="L"&&c[u+4]==="E"&&c[u+5]==="M"&&c[u+6]==="E"&&c[u+7]==="N"&&c[u+8]==="T"}function i(c,u){return c[u+1]==="!"&&c[u+2]==="A"&&c[u+3]==="T"&&c[u+4]==="T"&&c[u+5]==="L"&&c[u+6]==="I"&&c[u+7]==="S"&&c[u+8]==="T"}function o(c,u){return c[u+1]==="!"&&c[u+2]==="N"&&c[u+3]==="O"&&c[u+4]==="T"&&c[u+5]==="A"&&c[u+6]==="T"&&c[u+7]==="I"&&c[u+8]==="O"&&c[u+9]==="N"}function a(c){if(e.isName(c))return c;throw new Error(`Invalid entity name ${c}`)}return Ss=t,Ss}var xs,ga;function sp(){if(ga)return xs;ga=1;const e=/^[-+]?0x[a-fA-F0-9]+$/,t=/^([\-\+])?(0*)(\.[0-9]+([eE]\-?[0-9]+)?|[0-9]+(\.[0-9]+([eE]\-?[0-9]+)?)?)$/;!Number.parseInt&&window.parseInt&&(Number.parseInt=window.parseInt),!Number.parseFloat&&window.parseFloat&&(Number.parseFloat=window.parseFloat);const r={hex:!0,leadingZeros:!0,decimalPoint:".",eNotation:!0};function n(i,o={}){if(o=Object.assign({},r,o),!i||typeof i!="string")return i;let a=i.trim();if(o.skipLike!==void 0&&o.skipLike.test(a))return i;if(o.hex&&e.test(a))return Number.parseInt(a,16);{const c=t.exec(a);if(c){const u=c[1],f=c[2];let p=s(c[3]);const g=c[4]||c[6];if(!o.leadingZeros&&f.length>0&&u&&a[2]!==".")return i;if(!o.leadingZeros&&f.length>0&&!u&&a[1]!==".")return i;{const w=Number(a),R=""+w;return R.search(/[eE]/)!==-1||g?o.eNotation?w:i:a.indexOf(".")!==-1?R==="0"&&p===""||R===p||u&&R==="-"+p?w:i:f?p===R||u+p===R?w:i:a===R||a===u+R?w:i}}else return i}}function s(i){return i&&i.indexOf(".")!==-1&&(i=i.replace(/0+$/,""),i==="."?i="0":i[0]==="."?i="0"+i:i[i.length-1]==="."&&(i=i.substr(0,i.length-1))),i}return xs=n,xs}var vs,ma;function ip(){if(ma)return vs;ma=1;const e=eo(),t=rp(),r=np(),n=sp();class s{constructor(S){this.options=S,this.currentNode=null,this.tagsNodeStack=[],this.docTypeEntities={},this.lastEntities={apos:{regex:/&(apos|#39|#x27);/g,val:"'"},gt:{regex:/&(gt|#62|#x3E);/g,val:">"},lt:{regex:/&(lt|#60|#x3C);/g,val:"<"},quot:{regex:/&(quot|#34|#x22);/g,val:'"'}},this.ampEntity={regex:/&(amp|#38|#x26);/g,val:"&"},this.htmlEntities={space:{regex:/&(nbsp|#160);/g,val:" "},cent:{regex:/&(cent|#162);/g,val:"¢"},pound:{regex:/&(pound|#163);/g,val:"£"},yen:{regex:/&(yen|#165);/g,val:"¥"},euro:{regex:/&(euro|#8364);/g,val:"€"},copyright:{regex:/&(copy|#169);/g,val:"©"},reg:{regex:/&(reg|#174);/g,val:"®"},inr:{regex:/&(inr|#8377);/g,val:"₹"},num_dec:{regex:/&#([0-9]{1,7});/g,val:(b,F)=>String.fromCharCode(Number.parseInt(F,10))},num_hex:{regex:/&#x([0-9a-fA-F]{1,6});/g,val:(b,F)=>String.fromCharCode(Number.parseInt(F,16))}},this.addExternalEntities=i,this.parseXml=f,this.parseTextData=o,this.resolveNameSpace=a,this.buildAttributesMap=u,this.isItStopNode=R,this.replaceEntitiesValue=g,this.readStopNodeData=E,this.saveTextToParentTag=w,this.addChild=p}}function i(m){const S=Object.keys(m);for(let b=0;b<S.length;b++){const F=S[b];this.lastEntities[F]={regex:new RegExp("&"+F+";","g"),val:m[F]}}}function o(m,S,b,F,I,M,V){if(m!==void 0&&(this.options.trimValues&&!F&&(m=m.trim()),m.length>0)){V||(m=this.replaceEntitiesValue(m));const G=this.options.tagValueProcessor(S,m,b,I,M);return G==null?m:typeof G!=typeof m||G!==m?G:this.options.trimValues?B(m,this.options.parseTagValue,this.options.numberParseOptions):m.trim()===m?B(m,this.options.parseTagValue,this.options.numberParseOptions):m}}function a(m){if(this.options.removeNSPrefix){const S=m.split(":"),b=m.charAt(0)==="/"?"/":"";if(S[0]==="xmlns")return"";S.length===2&&(m=b+S[1])}return m}const c=new RegExp(`([^\\s=]+)\\s*(=\\s*(['"])([\\s\\S]*?)\\3)?`,"gm");function u(m,S,b){if(!this.options.ignoreAttributes&&typeof m=="string"){const F=e.getAllMatches(m,c),I=F.length,M={};for(let V=0;V<I;V++){const G=this.resolveNameSpace(F[V][1]);let q=F[V][4],ie=this.options.attributeNamePrefix+G;if(G.length)if(this.options.transformAttributeName&&(ie=this.options.transformAttributeName(ie)),ie==="__proto__"&&(ie="#__proto__"),q!==void 0){this.options.trimValues&&(q=q.trim()),q=this.replaceEntitiesValue(q);const oe=this.options.attributeValueProcessor(G,q,S);oe==null?M[ie]=q:typeof oe!=typeof q||oe!==q?M[ie]=oe:M[ie]=B(q,this.options.parseAttributeValue,this.options.numberParseOptions)}else this.options.allowBooleanAttributes&&(M[ie]=!0)}if(!Object.keys(M).length)return;if(this.options.attributesGroupName){const V={};return V[this.options.attributesGroupName]=M,V}return M}}const f=function(m){m=m.replace(/\r\n?/g,`
`);const S=new t("!xml");let b=S,F="",I="";for(let M=0;M<m.length;M++)if(m[M]==="<")if(m[M+1]==="/"){const G=_(m,">",M,"Closing Tag is not closed.");let q=m.substring(M+2,G).trim();if(this.options.removeNSPrefix){const Fe=q.indexOf(":");Fe!==-1&&(q=q.substr(Fe+1))}this.options.transformTagName&&(q=this.options.transformTagName(q)),b&&(F=this.saveTextToParentTag(F,b,I));const ie=I.substring(I.lastIndexOf(".")+1);if(q&&this.options.unpairedTags.indexOf(q)!==-1)throw new Error(`Unpaired tag can not be used as closing tag: </${q}>`);let oe=0;ie&&this.options.unpairedTags.indexOf(ie)!==-1?(oe=I.lastIndexOf(".",I.lastIndexOf(".")-1),this.tagsNodeStack.pop()):oe=I.lastIndexOf("."),I=I.substring(0,oe),b=this.tagsNodeStack.pop(),F="",M=G}else if(m[M+1]==="?"){let G=h(m,M,!1,"?>");if(!G)throw new Error("Pi Tag is not closed.");if(F=this.saveTextToParentTag(F,b,I),!(this.options.ignoreDeclaration&&G.tagName==="?xml"||this.options.ignorePiTags)){const q=new t(G.tagName);q.add(this.options.textNodeName,""),G.tagName!==G.tagExp&&G.attrExpPresent&&(q[":@"]=this.buildAttributesMap(G.tagExp,I,G.tagName)),this.addChild(b,q,I)}M=G.closeIndex+1}else if(m.substr(M+1,3)==="!--"){const G=_(m,"-->",M+4,"Comment is not closed.");if(this.options.commentPropName){const q=m.substring(M+4,G-2);F=this.saveTextToParentTag(F,b,I),b.add(this.options.commentPropName,[{[this.options.textNodeName]:q}])}M=G}else if(m.substr(M+1,2)==="!D"){const G=r(m,M);this.docTypeEntities=G.entities,M=G.i}else if(m.substr(M+1,2)==="!["){const G=_(m,"]]>",M,"CDATA is not closed.")-2,q=m.substring(M+9,G);F=this.saveTextToParentTag(F,b,I);let ie=this.parseTextData(q,b.tagname,I,!0,!1,!0,!0);ie==null&&(ie=""),this.options.cdataPropName?b.add(this.options.cdataPropName,[{[this.options.textNodeName]:q}]):b.add(this.options.textNodeName,ie),M=G+2}else{let G=h(m,M,this.options.removeNSPrefix),q=G.tagName;const ie=G.rawTagName;let oe=G.tagExp,Fe=G.attrExpPresent,Mt=G.closeIndex;this.options.transformTagName&&(q=this.options.transformTagName(q)),b&&F&&b.tagname!=="!xml"&&(F=this.saveTextToParentTag(F,b,I,!1));const ut=b;if(ut&&this.options.unpairedTags.indexOf(ut.tagname)!==-1&&(b=this.tagsNodeStack.pop(),I=I.substring(0,I.lastIndexOf("."))),q!==S.tagname&&(I+=I?"."+q:q),this.isItStopNode(this.options.stopNodes,I,q)){let Oe="";if(oe.length>0&&oe.lastIndexOf("/")===oe.length-1)q[q.length-1]==="/"?(q=q.substr(0,q.length-1),I=I.substr(0,I.length-1),oe=q):oe=oe.substr(0,oe.length-1),M=G.closeIndex;else if(this.options.unpairedTags.indexOf(q)!==-1)M=G.closeIndex;else{const wt=this.readStopNodeData(m,ie,Mt+1);if(!wt)throw new Error(`Unexpected end of ${ie}`);M=wt.i,Oe=wt.tagContent}const lt=new t(q);q!==oe&&Fe&&(lt[":@"]=this.buildAttributesMap(oe,I,q)),Oe&&(Oe=this.parseTextData(Oe,q,I,!0,Fe,!0,!0)),I=I.substr(0,I.lastIndexOf(".")),lt.add(this.options.textNodeName,Oe),this.addChild(b,lt,I)}else{if(oe.length>0&&oe.lastIndexOf("/")===oe.length-1){q[q.length-1]==="/"?(q=q.substr(0,q.length-1),I=I.substr(0,I.length-1),oe=q):oe=oe.substr(0,oe.length-1),this.options.transformTagName&&(q=this.options.transformTagName(q));const Oe=new t(q);q!==oe&&Fe&&(Oe[":@"]=this.buildAttributesMap(oe,I,q)),this.addChild(b,Oe,I),I=I.substr(0,I.lastIndexOf("."))}else{const Oe=new t(q);this.tagsNodeStack.push(b),q!==oe&&Fe&&(Oe[":@"]=this.buildAttributesMap(oe,I,q)),this.addChild(b,Oe,I),b=Oe}F="",M=Mt}}else F+=m[M];return S.child};function p(m,S,b){const F=this.options.updateTag(S.tagname,b,S[":@"]);F===!1||(typeof F=="string"&&(S.tagname=F),m.addChild(S))}const g=function(m){if(this.options.processEntities){for(let S in this.docTypeEntities){const b=this.docTypeEntities[S];m=m.replace(b.regx,b.val)}for(let S in this.lastEntities){const b=this.lastEntities[S];m=m.replace(b.regex,b.val)}if(this.options.htmlEntities)for(let S in this.htmlEntities){const b=this.htmlEntities[S];m=m.replace(b.regex,b.val)}m=m.replace(this.ampEntity.regex,this.ampEntity.val)}return m};function w(m,S,b,F){return m&&(F===void 0&&(F=Object.keys(S.child).length===0),m=this.parseTextData(m,S.tagname,b,!1,S[":@"]?Object.keys(S[":@"]).length!==0:!1,F),m!==void 0&&m!==""&&S.add(this.options.textNodeName,m),m=""),m}function R(m,S,b){const F="*."+b;for(const I in m){const M=m[I];if(F===M||S===M)return!0}return!1}function k(m,S,b=">"){let F,I="";for(let M=S;M<m.length;M++){let V=m[M];if(F)V===F&&(F="");else if(V==='"'||V==="'")F=V;else if(V===b[0])if(b[1]){if(m[M+1]===b[1])return{data:I,index:M}}else return{data:I,index:M};else V==="	"&&(V=" ");I+=V}}function _(m,S,b,F){const I=m.indexOf(S,b);if(I===-1)throw new Error(F);return I+S.length-1}function h(m,S,b,F=">"){const I=k(m,S+1,F);if(!I)return;let M=I.data;const V=I.index,G=M.search(/\s/);let q=M,ie=!0;G!==-1&&(q=M.substring(0,G),M=M.substring(G+1).trimStart());const oe=q;if(b){const Fe=q.indexOf(":");Fe!==-1&&(q=q.substr(Fe+1),ie=q!==I.data.substr(Fe+1))}return{tagName:q,tagExp:M,closeIndex:V,attrExpPresent:ie,rawTagName:oe}}function E(m,S,b){const F=b;let I=1;for(;b<m.length;b++)if(m[b]==="<")if(m[b+1]==="/"){const M=_(m,">",b,`${S} is not closed`);if(m.substring(b+2,M).trim()===S&&(I--,I===0))return{tagContent:m.substring(F,b),i:M};b=M}else if(m[b+1]==="?")b=_(m,"?>",b+1,"StopNode is not closed.");else if(m.substr(b+1,3)==="!--")b=_(m,"-->",b+3,"StopNode is not closed.");else if(m.substr(b+1,2)==="![")b=_(m,"]]>",b,"StopNode is not closed.")-2;else{const M=h(m,b,">");M&&((M&&M.tagName)===S&&M.tagExp[M.tagExp.length-1]!=="/"&&I++,b=M.closeIndex)}}function B(m,S,b){if(S&&typeof m=="string"){const F=m.trim();return F==="true"?!0:F==="false"?!1:n(m,b)}else return e.isExist(m)?m:""}return vs=s,vs}var As={},ya;function op(){if(ya)return As;ya=1;function e(i,o){return t(i,o)}function t(i,o,a){let c;const u={};for(let f=0;f<i.length;f++){const p=i[f],g=r(p);let w="";if(a===void 0?w=g:w=a+"."+g,g===o.textNodeName)c===void 0?c=p[g]:c+=""+p[g];else{if(g===void 0)continue;if(p[g]){let R=t(p[g],o,w);const k=s(R,o);p[":@"]?n(R,p[":@"],w,o):Object.keys(R).length===1&&R[o.textNodeName]!==void 0&&!o.alwaysCreateTextNode?R=R[o.textNodeName]:Object.keys(R).length===0&&(o.alwaysCreateTextNode?R[o.textNodeName]="":R=""),u[g]!==void 0&&u.hasOwnProperty(g)?(Array.isArray(u[g])||(u[g]=[u[g]]),u[g].push(R)):o.isArray(g,w,k)?u[g]=[R]:u[g]=R}}}return typeof c=="string"?c.length>0&&(u[o.textNodeName]=c):c!==void 0&&(u[o.textNodeName]=c),u}function r(i){const o=Object.keys(i);for(let a=0;a<o.length;a++){const c=o[a];if(c!==":@")return c}}function n(i,o,a,c){if(o){const u=Object.keys(o),f=u.length;for(let p=0;p<f;p++){const g=u[p];c.isArray(g,a+"."+g,!0,!0)?i[g]=[o[g]]:i[g]=o[g]}}}function s(i,o){const{textNodeName:a}=o,c=Object.keys(i).length;return!!(c===0||c===1&&(i[a]||typeof i[a]=="boolean"||i[a]===0))}return As.prettify=e,As}var Cs,wa;function ap(){if(wa)return Cs;wa=1;const{buildOptions:e}=tp(),t=ip(),{prettify:r}=op(),n=tl();class s{constructor(o){this.externalEntities={},this.options=e(o)}parse(o,a){if(typeof o!="string")if(o.toString)o=o.toString();else throw new Error("XML data is accepted in String or Bytes[] form.");if(a){a===!0&&(a={});const f=n.validate(o,a);if(f!==!0)throw Error(`${f.err.msg}:${f.err.line}:${f.err.col}`)}const c=new t(this.options);c.addExternalEntities(this.externalEntities);const u=c.parseXml(o);return this.options.preserveOrder||u===void 0?u:r(u,this.options)}addEntity(o,a){if(a.indexOf("&")!==-1)throw new Error("Entity value can't have '&'");if(o.indexOf("&")!==-1||o.indexOf(";")!==-1)throw new Error("An entity must be set without '&' and ';'. Eg. use '#xD' for '&#xD;'");if(a==="&")throw new Error("An entity with value '&' is not permitted");this.externalEntities[o]=a}}return Cs=s,Cs}var Rs,ba;function cp(){if(ba)return Rs;ba=1;const e=`
`;function t(a,c){let u="";return c.format&&c.indentBy.length>0&&(u=e),r(a,c,"",u)}function r(a,c,u,f){let p="",g=!1;for(let w=0;w<a.length;w++){const R=a[w],k=n(R);if(k===void 0)continue;let _="";if(u.length===0?_=k:_=`${u}.${k}`,k===c.textNodeName){let S=R[k];i(_,c)||(S=c.tagValueProcessor(k,S),S=o(S,c)),g&&(p+=f),p+=S,g=!1;continue}else if(k===c.cdataPropName){g&&(p+=f),p+=`<![CDATA[${R[k][0][c.textNodeName]}]]>`,g=!1;continue}else if(k===c.commentPropName){p+=f+`<!--${R[k][0][c.textNodeName]}-->`,g=!0;continue}else if(k[0]==="?"){const S=s(R[":@"],c),b=k==="?xml"?"":f;let F=R[k][0][c.textNodeName];F=F.length!==0?" "+F:"",p+=b+`<${k}${F}${S}?>`,g=!0;continue}let h=f;h!==""&&(h+=c.indentBy);const E=s(R[":@"],c),B=f+`<${k}${E}`,m=r(R[k],c,_,h);c.unpairedTags.indexOf(k)!==-1?c.suppressUnpairedNode?p+=B+">":p+=B+"/>":(!m||m.length===0)&&c.suppressEmptyNode?p+=B+"/>":m&&m.endsWith(">")?p+=B+`>${m}${f}</${k}>`:(p+=B+">",m&&f!==""&&(m.includes("/>")||m.includes("</"))?p+=f+c.indentBy+m+f:p+=m,p+=`</${k}>`),g=!0}return p}function n(a){const c=Object.keys(a);for(let u=0;u<c.length;u++){const f=c[u];if(a.hasOwnProperty(f)&&f!==":@")return f}}function s(a,c){let u="";if(a&&!c.ignoreAttributes)for(let f in a){if(!a.hasOwnProperty(f))continue;let p=c.attributeValueProcessor(f,a[f]);p=o(p,c),p===!0&&c.suppressBooleanAttributes?u+=` ${f.substr(c.attributeNamePrefix.length)}`:u+=` ${f.substr(c.attributeNamePrefix.length)}="${p}"`}return u}function i(a,c){a=a.substr(0,a.length-c.textNodeName.length-1);let u=a.substr(a.lastIndexOf(".")+1);for(let f in c.stopNodes)if(c.stopNodes[f]===a||c.stopNodes[f]==="*."+u)return!0;return!1}function o(a,c){if(a&&a.length>0&&c.processEntities)for(let u=0;u<c.entities.length;u++){const f=c.entities[u];a=a.replace(f.regex,f.val)}return a}return Rs=t,Rs}var _s,Ea;function up(){if(Ea)return _s;Ea=1;const e=cp(),t={attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,cdataPropName:!1,format:!1,indentBy:"  ",suppressEmptyNode:!1,suppressUnpairedNode:!0,suppressBooleanAttributes:!0,tagValueProcessor:function(o,a){return a},attributeValueProcessor:function(o,a){return a},preserveOrder:!1,commentPropName:!1,unpairedTags:[],entities:[{regex:new RegExp("&","g"),val:"&amp;"},{regex:new RegExp(">","g"),val:"&gt;"},{regex:new RegExp("<","g"),val:"&lt;"},{regex:new RegExp("'","g"),val:"&apos;"},{regex:new RegExp('"',"g"),val:"&quot;"}],processEntities:!0,stopNodes:[],oneListGroup:!1};function r(o){this.options=Object.assign({},t,o),this.options.ignoreAttributes||this.options.attributesGroupName?this.isAttribute=function(){return!1}:(this.attrPrefixLen=this.options.attributeNamePrefix.length,this.isAttribute=i),this.processTextOrObjNode=n,this.options.format?(this.indentate=s,this.tagEndChar=`>
`,this.newLine=`
`):(this.indentate=function(){return""},this.tagEndChar=">",this.newLine="")}r.prototype.build=function(o){return this.options.preserveOrder?e(o,this.options):(Array.isArray(o)&&this.options.arrayNodeName&&this.options.arrayNodeName.length>1&&(o={[this.options.arrayNodeName]:o}),this.j2x(o,0).val)},r.prototype.j2x=function(o,a){let c="",u="";for(let f in o)if(Object.prototype.hasOwnProperty.call(o,f))if(typeof o[f]>"u")this.isAttribute(f)&&(u+="");else if(o[f]===null)this.isAttribute(f)?u+="":f[0]==="?"?u+=this.indentate(a)+"<"+f+"?"+this.tagEndChar:u+=this.indentate(a)+"<"+f+"/"+this.tagEndChar;else if(o[f]instanceof Date)u+=this.buildTextValNode(o[f],f,"",a);else if(typeof o[f]!="object"){const p=this.isAttribute(f);if(p)c+=this.buildAttrPairStr(p,""+o[f]);else if(f===this.options.textNodeName){let g=this.options.tagValueProcessor(f,""+o[f]);u+=this.replaceEntitiesValue(g)}else u+=this.buildTextValNode(o[f],f,"",a)}else if(Array.isArray(o[f])){const p=o[f].length;let g="",w="";for(let R=0;R<p;R++){const k=o[f][R];if(!(typeof k>"u"))if(k===null)f[0]==="?"?u+=this.indentate(a)+"<"+f+"?"+this.tagEndChar:u+=this.indentate(a)+"<"+f+"/"+this.tagEndChar;else if(typeof k=="object")if(this.options.oneListGroup){const _=this.j2x(k,a+1);g+=_.val,this.options.attributesGroupName&&k.hasOwnProperty(this.options.attributesGroupName)&&(w+=_.attrStr)}else g+=this.processTextOrObjNode(k,f,a);else if(this.options.oneListGroup){let _=this.options.tagValueProcessor(f,k);_=this.replaceEntitiesValue(_),g+=_}else g+=this.buildTextValNode(k,f,"",a)}this.options.oneListGroup&&(g=this.buildObjectNode(g,f,w,a)),u+=g}else if(this.options.attributesGroupName&&f===this.options.attributesGroupName){const p=Object.keys(o[f]),g=p.length;for(let w=0;w<g;w++)c+=this.buildAttrPairStr(p[w],""+o[f][p[w]])}else u+=this.processTextOrObjNode(o[f],f,a);return{attrStr:c,val:u}},r.prototype.buildAttrPairStr=function(o,a){return a=this.options.attributeValueProcessor(o,""+a),a=this.replaceEntitiesValue(a),this.options.suppressBooleanAttributes&&a==="true"?" "+o:" "+o+'="'+a+'"'};function n(o,a,c){const u=this.j2x(o,c+1);return o[this.options.textNodeName]!==void 0&&Object.keys(o).length===1?this.buildTextValNode(o[this.options.textNodeName],a,u.attrStr,c):this.buildObjectNode(u.val,a,u.attrStr,c)}r.prototype.buildObjectNode=function(o,a,c,u){if(o==="")return a[0]==="?"?this.indentate(u)+"<"+a+c+"?"+this.tagEndChar:this.indentate(u)+"<"+a+c+this.closeTag(a)+this.tagEndChar;{let f="</"+a+this.tagEndChar,p="";return a[0]==="?"&&(p="?",f=""),(c||c==="")&&o.indexOf("<")===-1?this.indentate(u)+"<"+a+c+p+">"+o+f:this.options.commentPropName!==!1&&a===this.options.commentPropName&&p.length===0?this.indentate(u)+`<!--${o}-->`+this.newLine:this.indentate(u)+"<"+a+c+p+this.tagEndChar+o+this.indentate(u)+f}},r.prototype.closeTag=function(o){let a="";return this.options.unpairedTags.indexOf(o)!==-1?this.options.suppressUnpairedNode||(a="/"):this.options.suppressEmptyNode?a="/":a=`></${o}`,a},r.prototype.buildTextValNode=function(o,a,c,u){if(this.options.cdataPropName!==!1&&a===this.options.cdataPropName)return this.indentate(u)+`<![CDATA[${o}]]>`+this.newLine;if(this.options.commentPropName!==!1&&a===this.options.commentPropName)return this.indentate(u)+`<!--${o}-->`+this.newLine;if(a[0]==="?")return this.indentate(u)+"<"+a+c+"?"+this.tagEndChar;{let f=this.options.tagValueProcessor(a,o);return f=this.replaceEntitiesValue(f),f===""?this.indentate(u)+"<"+a+c+this.closeTag(a)+this.tagEndChar:this.indentate(u)+"<"+a+c+">"+f+"</"+a+this.tagEndChar}},r.prototype.replaceEntitiesValue=function(o){if(o&&o.length>0&&this.options.processEntities)for(let a=0;a<this.options.entities.length;a++){const c=this.options.entities[a];o=o.replace(c.regex,c.val)}return o};function s(o){return this.options.indentBy.repeat(o)}function i(o){return o.startsWith(this.options.attributeNamePrefix)&&o!==this.options.textNodeName?o.substr(this.attrPrefixLen):!1}return _s=r,_s}var Ts,Sa;function lp(){if(Sa)return Ts;Sa=1;const e=tl(),t=ap(),r=up();return Ts={XMLParser:t,XMLValidator:e,XMLBuilder:r},Ts}var dp=lp();const es=(e,t)=>ep(e,t).then(r=>{if(r.length){const n=new dp.XMLParser({attributeNamePrefix:"",htmlEntities:!0,ignoreAttributes:!1,ignoreDeclaration:!0,parseTagValue:!1,trimValues:!1,tagValueProcessor:(c,u)=>u.trim()===""&&u.includes(`
`)?"":void 0});n.addEntity("#xD","\r"),n.addEntity("#10",`
`);let s;try{s=n.parse(r,!0)}catch(c){throw c&&typeof c=="object"&&Object.defineProperty(c,"$responseBodyText",{value:r}),c}const i="#text",o=Object.keys(s)[0],a=s[o];return a[i]&&(a[o]=a[i],delete a[i]),Ju(a)}return{}}),fp=async(e,t)=>{const r=await es(e,t);return r.Error&&(r.Error.message=r.Error.message??r.Error.Message),r},hp=(e,t)=>{var r;if(((r=t==null?void 0:t.Error)==null?void 0:r.Code)!==void 0)return t.Error.Code;if((t==null?void 0:t.Code)!==void 0)return t.Code;if(e.statusCode==404)return"NotFound"},Oi=[Se.CRC32,Se.CRC32C,Se.CRC64NVME,Se.SHA1,Se.SHA256],pp=[Se.SHA256,Se.SHA1,Se.CRC32,Se.CRC32C,Se.CRC64NVME],gp=(e,{requestChecksumRequired:t,requestAlgorithmMember:r,requestChecksumCalculation:n})=>{if(!r)return n===Tr.WHEN_SUPPORTED||t?Bi:void 0;if(!e[r])return;const s=e[r];if(!Oi.includes(s))throw new Error(`The checksum algorithm "${s}" is not supported by the client. Select one of ${Oi}.`);return s},to=e=>e===Se.MD5?"content-md5":`x-amz-checksum-${e.toLowerCase()}`,mp=(e,t)=>{const r=e.toLowerCase();for(const n of Object.keys(t))if(r===n.toLowerCase())return!0;return!1},yp=(e,t)=>{const r=e.toLowerCase();for(const n of Object.keys(t))if(n.toLowerCase().startsWith(r))return!0;return!1},ro=e=>e!==void 0&&typeof e!="string"&&!ArrayBuffer.isView(e)&&!Gu(e);function no(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(f){try{u(n.next(f))}catch(p){o(p)}}function c(f){try{u(n.throw(f))}catch(p){o(p)}}function u(f){f.done?i(f.value):s(f.value).then(a,c)}u((n=n.apply(e,t||[])).next())})}function so(e,t){var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,s,i,o=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return o.next=a(0),o.throw=a(1),o.return=a(2),typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(u){return function(f){return c([u,f])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,u[0]&&(r=0)),r;)try{if(n=1,s&&(i=u[0]&2?s.return:u[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,u[1])).done)return i;switch(s=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return r.label++,{value:u[1],done:!1};case 5:r.label++,s=u[1],u=[0];continue;case 7:u=r.ops.pop(),r.trys.pop();continue;default:if(i=r.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){r=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){r.label=u[1];break}if(u[0]===6&&r.label<i[1]){r.label=i[1],i=u;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(u);break}i[2]&&r.ops.pop(),r.trys.pop();continue}u=t.call(e,r)}catch(f){u=[6,f],s=0}finally{n=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}function rl(e){var t=typeof Symbol=="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}const wp=e=>new TextEncoder().encode(e);var bp=typeof Buffer<"u"&&Buffer.from?function(e){return Buffer.from(e,"utf8")}:wp;function qt(e){return e instanceof Uint8Array?e:typeof e=="string"?bp(e):ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(e)}function rn(e){return typeof e=="string"?e.length===0:e.byteLength===0}function nl(e){return new Uint8Array([(e&4278190080)>>24,(e&16711680)>>16,(e&65280)>>8,e&255])}function sl(e){if(!Uint32Array.from){for(var t=new Uint32Array(e.length),r=0;r<e.length;)t[r]=e[r],r+=1;return t}return Uint32Array.from(e)}var Ep=function(){function e(){this.crc32c=new xa}return e.prototype.update=function(t){rn(t)||this.crc32c.update(qt(t))},e.prototype.digest=function(){return no(this,void 0,void 0,function(){return so(this,function(t){return[2,nl(this.crc32c.digest())]})})},e.prototype.reset=function(){this.crc32c=new xa},e}(),xa=function(){function e(){this.checksum=4294967295}return e.prototype.update=function(t){var r,n;try{for(var s=rl(t),i=s.next();!i.done;i=s.next()){var o=i.value;this.checksum=this.checksum>>>8^xp[(this.checksum^o)&255]}}catch(a){r={error:a}}finally{try{i&&!i.done&&(n=s.return)&&n.call(s)}finally{if(r)throw r.error}}return this},e.prototype.digest=function(){return(this.checksum^4294967295)>>>0},e}(),Sp=[0,4067132163,3778769143,324072436,3348797215,904991772,648144872,3570033899,2329499855,2024987596,1809983544,2575936315,1296289744,3207089363,2893594407,1578318884,274646895,3795141740,4049975192,51262619,3619967088,632279923,922689671,3298075524,2592579488,1760304291,2075979607,2312596564,1562183871,2943781820,3156637768,1313733451,549293790,3537243613,3246849577,871202090,3878099393,357341890,102525238,4101499445,2858735121,1477399826,1264559846,3107202533,1845379342,2677391885,2361733625,2125378298,820201905,3263744690,3520608582,598981189,4151959214,85089709,373468761,3827903834,3124367742,1213305469,1526817161,2842354314,2107672161,2412447074,2627466902,1861252501,1098587580,3004210879,2688576843,1378610760,2262928035,1955203488,1742404180,2511436119,3416409459,969524848,714683780,3639785095,205050476,4266873199,3976438427,526918040,1361435347,2739821008,2954799652,1114974503,2529119692,1691668175,2005155131,2247081528,3690758684,697762079,986182379,3366744552,476452099,3993867776,4250756596,255256311,1640403810,2477592673,2164122517,1922457750,2791048317,1412925310,1197962378,3037525897,3944729517,427051182,170179418,4165941337,746937522,3740196785,3451792453,1070968646,1905808397,2213795598,2426610938,1657317369,3053634322,1147748369,1463399397,2773627110,4215344322,153784257,444234805,3893493558,1021025245,3467647198,3722505002,797665321,2197175160,1889384571,1674398607,2443626636,1164749927,3070701412,2757221520,1446797203,137323447,4198817972,3910406976,461344835,3484808360,1037989803,781091935,3705997148,2460548119,1623424788,1939049696,2180517859,1429367560,2807687179,3020495871,1180866812,410100952,3927582683,4182430767,186734380,3756733383,763408580,1053836080,3434856499,2722870694,1344288421,1131464017,2971354706,1708204729,2545590714,2229949006,1988219213,680717673,3673779818,3383336350,1002577565,4010310262,493091189,238226049,4233660802,2987750089,1082061258,1395524158,2705686845,1972364758,2279892693,2494862625,1725896226,952904198,3399985413,3656866545,731699698,4283874585,222117402,510512622,3959836397,3280807620,837199303,582374963,3504198960,68661723,4135334616,3844915500,390545967,1230274059,3141532936,2825850620,1510247935,2395924756,2091215383,1878366691,2644384480,3553878443,565732008,854102364,3229815391,340358836,3861050807,4117890627,119113024,1493875044,2875275879,3090270611,1247431312,2660249211,1828433272,2141937292,2378227087,3811616794,291187481,34330861,4032846830,615137029,3603020806,3314634738,939183345,1776939221,2609017814,2295496738,2058945313,2926798794,1545135305,1330124605,3173225534,4084100981,17165430,307568514,3762199681,888469610,3332340585,3587147933,665062302,2042050490,2346497209,2559330125,1793573966,3190661285,1279665062,1595330642,2910671697],xp=sl(Sp),vp=function(){function e(){this.crc32=new Ln}return e.prototype.update=function(t){rn(t)||this.crc32.update(qt(t))},e.prototype.digest=function(){return no(this,void 0,void 0,function(){return so(this,function(t){return[2,nl(this.crc32.digest())]})})},e.prototype.reset=function(){this.crc32=new Ln},e}(),Ln=function(){function e(){this.checksum=4294967295}return e.prototype.update=function(t){var r,n;try{for(var s=rl(t),i=s.next();!i.done;i=s.next()){var o=i.value;this.checksum=this.checksum>>>8^Cp[(this.checksum^o)&255]}}catch(a){r={error:a}}finally{try{i&&!i.done&&(n=s.return)&&n.call(s)}finally{if(r)throw r.error}}return this},e.prototype.digest=function(){return(this.checksum^4294967295)>>>0},e}(),Ap=[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117],Cp=sl(Ap);const Rp=()=>vp,il=(e,t)=>{switch(e){case Se.MD5:return t.md5;case Se.CRC32:return Rp();case Se.CRC32C:return Ep;case Se.CRC64NVME:throw new Error(`Please check whether you have installed the "@aws-sdk/crc64-nvme-crt" package explicitly. 
You must also register the package by calling [require("@aws-sdk/crc64-nvme-crt");] or an ESM equivalent such as [import "@aws-sdk/crc64-nvme-crt";]. 
For more information please go to https://github.com/aws/aws-sdk-js-v3#functionality-requiring-aws-common-runtime-crt`);case Se.SHA1:return t.sha1;case Se.SHA256:return t.sha256;default:throw new Error(`Unsupported checksum algorithm: ${e}`)}},ol=(e,t)=>{const r=new e;return r.update(vr(t||"")),r.digest()},_p={name:"flexibleChecksumsMiddleware",step:"build",tags:["BODY_CHECKSUM"],override:!0},Tp=(e,t)=>(r,n)=>async s=>{if(!Ie.isInstance(s.request)||yp("x-amz-checksum-",s.request.headers))return r(s);const{request:i,input:o}=s,{body:a,headers:c}=i,{base64Encoder:u,streamHasher:f}=e,{requestChecksumRequired:p,requestAlgorithmMember:g}=t,w=await e.requestChecksumCalculation(),R=g==null?void 0:g.name,k=g==null?void 0:g.httpHeader;R&&!o[R]&&(w===Tr.WHEN_SUPPORTED||p)&&(o[R]=Bi,k&&(c[k]=Bi));const _=gp(o,{requestChecksumRequired:p,requestAlgorithmMember:g==null?void 0:g.name,requestChecksumCalculation:w});let h=a,E=c;if(_){switch(_){case Se.CRC32:Be(n,"FLEXIBLE_CHECKSUMS_REQ_CRC32","U");break;case Se.CRC32C:Be(n,"FLEXIBLE_CHECKSUMS_REQ_CRC32C","V");break;case Se.CRC64NVME:Be(n,"FLEXIBLE_CHECKSUMS_REQ_CRC64","W");break;case Se.SHA1:Be(n,"FLEXIBLE_CHECKSUMS_REQ_SHA1","X");break;case Se.SHA256:Be(n,"FLEXIBLE_CHECKSUMS_REQ_SHA256","Y");break}const m=to(_),S=il(_,e);if(ro(a)){const{getAwsChunkedEncodingStream:b,bodyLengthChecker:F}=e;h=b(a,{base64Encoder:u,bodyLengthChecker:F,checksumLocationName:m,checksumAlgorithmFn:S,streamHasher:f}),E={...c,"content-encoding":c["content-encoding"]?`${c["content-encoding"]},aws-chunked`:"aws-chunked","transfer-encoding":"chunked","x-amz-decoded-content-length":c["content-length"],"x-amz-content-sha256":"STREAMING-UNSIGNED-PAYLOAD-TRAILER","x-amz-trailer":m},delete E["content-length"]}else if(!mp(m,c)){const b=await ol(S,a);E={...c,[m]:u(b)}}}return await r({...s,request:{...i,headers:E,body:h}})},kp={name:"flexibleChecksumsInputMiddleware",toMiddleware:"serializerMiddleware",relation:"before",tags:["BODY_CHECKSUM"],override:!0},Bp=(e,t)=>(r,n)=>async s=>{const i=s.input,{requestValidationModeMember:o}=t,a=await e.requestChecksumCalculation(),c=await e.responseChecksumValidation();switch(a){case Tr.WHEN_REQUIRED:Be(n,"FLEXIBLE_CHECKSUMS_REQ_WHEN_REQUIRED","a");break;case Tr.WHEN_SUPPORTED:Be(n,"FLEXIBLE_CHECKSUMS_REQ_WHEN_SUPPORTED","Z");break}switch(c){case ds.WHEN_REQUIRED:Be(n,"FLEXIBLE_CHECKSUMS_RES_WHEN_REQUIRED","c");break;case ds.WHEN_SUPPORTED:Be(n,"FLEXIBLE_CHECKSUMS_RES_WHEN_SUPPORTED","b");break}return o&&!i[o]&&c===ds.WHEN_SUPPORTED&&(i[o]="ENABLED"),r(s)},al=(e=[])=>{const t=[];for(const r of pp)!e.includes(r)||!Oi.includes(r)||t.push(r);return t},Np=e=>{const t=e.lastIndexOf("-");if(t!==-1){const r=e.slice(t+1);if(!r.startsWith("0")){const n=parseInt(r,10);if(!isNaN(n)&&n>=1&&n<=1e4)return!0}}return!1};function va(e){return new Blob([e]).stream()}const Mp=async(e,{checksumAlgorithmFn:t,base64Encoder:r})=>r(await ol(t,e)),Ip=async(e,{config:t,responseAlgorithms:r})=>{const n=al(r),{body:s,headers:i}=e;for(const o of n){const a=to(o),c=i[a];if(c){const u=il(o,t),{base64Encoder:f}=t;if(ro(s)){e.body=Of({expectedChecksum:c,checksumSourceLocation:a,checksum:new u,source:s,base64Encoder:f});return}const p=await Mp(s,{checksumAlgorithmFn:u,base64Encoder:f});if(p===c)break;throw new Error(`Checksum mismatch: expected "${p}" but received "${c}" in response header "${a}".`)}}},Pp={name:"flexibleChecksumsResponseMiddleware",toMiddleware:"deserializerMiddleware",relation:"after",tags:["BODY_CHECKSUM"],override:!0},Fp=(e,t)=>(r,n)=>async s=>{if(!Ie.isInstance(s.request))return r(s);const i=s.input,o=await r(s),a=o.response;let c;const{requestValidationModeMember:u,responseAlgorithms:f}=t;if(u&&i[u]==="ENABLED"){const{clientName:p,commandName:g}=n;if(p==="S3Client"&&g==="GetObjectCommand"&&al(f).every(k=>{const _=to(k),h=a.headers[_];return!h||Np(h)}))return o;const R=ro(a.body);R&&(c=await e.streamCollector(a.body),a.body=va(c)),await Ip(o.response,{config:e,responseAlgorithms:f}),R&&c&&(a.body=va(c))}return o},io=(e,t)=>({applyToStack:r=>{r.add(Tp(e,t),_p),r.addRelativeTo(Bp(e,t),kp),r.addRelativeTo(Fp(e,t),Pp)}}),Op=e=>({...e,requestChecksumCalculation:Et(e.requestChecksumCalculation??sf),responseChecksumValidation:Et(e.responseChecksumValidation??of)});const Dp=e=>t=>async r=>{if(!Ie.isInstance(r.request))return t(r);const{request:n}=r,{handlerProtocol:s=""}=e.requestHandler.metadata||{};if(s.indexOf("h2")>=0&&!n.headers[":authority"])delete n.headers.host,n.headers[":authority"]=n.hostname+(n.port?":"+n.port:"");else if(!n.headers.host){let i=n.hostname;n.port!=null&&(i+=`:${n.port}`),n.headers.host=i}return t(r)},Up={name:"hostHeaderMiddleware",step:"build",priority:"low",tags:["HOST"],override:!0},Lp=e=>({applyToStack:t=>{t.add(Dp(e),Up)}}),$p=()=>(e,t)=>async r=>{var n,s;try{const i=await e(r),{clientName:o,commandName:a,logger:c,dynamoDbDocumentClientOptions:u={}}=t,{overrideInputFilterSensitiveLog:f,overrideOutputFilterSensitiveLog:p}=u,g=f??t.inputFilterSensitiveLog,w=p??t.outputFilterSensitiveLog,{$metadata:R,...k}=i.output;return(n=c==null?void 0:c.info)==null||n.call(c,{clientName:o,commandName:a,input:g(r.input),output:w(k),metadata:R}),i}catch(i){const{clientName:o,commandName:a,logger:c,dynamoDbDocumentClientOptions:u={}}=t,{overrideInputFilterSensitiveLog:f}=u,p=f??t.inputFilterSensitiveLog;throw(s=c==null?void 0:c.error)==null||s.call(c,{clientName:o,commandName:a,input:p(r.input),error:i,metadata:i.$metadata}),i}},Hp={name:"loggerMiddleware",tags:["LOGGER"],step:"initialize",override:!0},qp=e=>({applyToStack:t=>{t.add($p(),Hp)}});var Aa={};const Ca="X-Amzn-Trace-Id",zp="AWS_LAMBDA_FUNCTION_NAME",jp="_X_AMZN_TRACE_ID",Wp=e=>t=>async r=>{const{request:n}=r;if(!Ie.isInstance(n)||e.runtime!=="node"||n.headers.hasOwnProperty(Ca))return t(r);const s=Aa[zp],i=Aa[jp],o=a=>typeof a=="string"&&a.length>0;return o(s)&&o(i)&&(n.headers[Ca]=i),t({...r,request:n})},Kp={step:"build",tags:["RECURSION_DETECTION"],name:"recursionDetectionMiddleware",override:!0,priority:"low"},Vp=e=>({applyToStack:t=>{t.add(Wp(e),Kp)}}),Gp="content-length";function Xp(){return(e,t)=>async r=>{var s;const{request:n}=r;if(Ie.isInstance(n)&&!(Gp in n.headers)){const i="Are you using a Stream of unknown length as the Body of a PutObject request? Consider using Upload instead from @aws-sdk/lib-storage.";typeof((s=t==null?void 0:t.logger)==null?void 0:s.warn)=="function"&&!(t.logger instanceof Ji)?t.logger.warn(i):console.warn(i)}return e({...r})}}const Zp={step:"finalizeRequest",tags:["CHECK_CONTENT_LENGTH_HEADER"],name:"getCheckContentLengthHeaderPlugin",override:!0},Yp=e=>({applyToStack:t=>{t.add(Xp(),Zp)}}),Qp=e=>(t,r)=>async n=>{const s=await e.region(),i=e.region;let o=()=>{};r.__s3RegionRedirect&&(Object.defineProperty(e,"region",{writable:!1,value:async()=>r.__s3RegionRedirect}),o=()=>Object.defineProperty(e,"region",{writable:!0,value:i}));try{const a=await t(n);if(r.__s3RegionRedirect){o();const c=await e.region();if(s!==c)throw new Error("Region was not restored following S3 region redirect.")}return a}catch(a){throw o(),a}},Jp={tags:["REGION_REDIRECT","S3"],name:"regionRedirectEndpointMiddleware",override:!0,relation:"before",toMiddleware:"endpointV2Middleware"};function eg(e){return(t,r)=>async n=>{var s,i,o;try{return await t(n)}catch(a){if(e.followRegionRedirects&&(((s=a==null?void 0:a.$metadata)==null?void 0:s.httpStatusCode)===301||((i=a==null?void 0:a.$metadata)==null?void 0:i.httpStatusCode)===400&&(a==null?void 0:a.name)==="IllegalLocationConstraintException")){try{const c=a.$response.headers["x-amz-bucket-region"];(o=r.logger)==null||o.debug(`Redirecting from ${await e.region()} to ${c}`),r.__s3RegionRedirect=c}catch(c){throw new Error("Region redirect failed: "+c)}return t(n)}throw a}}}const tg={step:"initialize",tags:["REGION_REDIRECT","S3"],name:"regionRedirectMiddleware",override:!0},rg=e=>({applyToStack:t=>{t.add(eg(e),tg),t.addRelativeTo(Qp(e),Jp)}}),Zn=class Zn{constructor(t={}){X(this,"data");X(this,"lastPurgeTime",Date.now());this.data=t}get(t){const r=this.data[t];if(r)return r}set(t,r){return this.data[t]=r,r}delete(t){delete this.data[t]}async purgeExpired(){const t=Date.now();if(!(this.lastPurgeTime+Zn.EXPIRED_CREDENTIAL_PURGE_INTERVAL_MS>t))for(const r in this.data){const n=this.data[r];if(!n.isRefreshing){const s=await n.identity;s.expiration&&s.expiration.getTime()<t&&delete this.data[r]}}}};X(Zn,"EXPIRED_CREDENTIAL_PURGE_INTERVAL_MS",3e4);let Di=Zn;class ks{constructor(t,r=!1,n=Date.now()){X(this,"_identity");X(this,"isRefreshing");X(this,"accessed");this._identity=t,this.isRefreshing=r,this.accessed=n}get identity(){return this.accessed=Date.now(),this._identity}}const Yn=class Yn{constructor(t,r=new Di){X(this,"createSessionFn");X(this,"cache");this.createSessionFn=t,this.cache=r}async getS3ExpressIdentity(t,r){const n=r.Bucket,{cache:s}=this,i=s.get(n);return i?i.identity.then(o=>{var u,f;return(((u=o.expiration)==null?void 0:u.getTime())??0)<Date.now()?s.set(n,new ks(this.getIdentity(n))).identity:((((f=o.expiration)==null?void 0:f.getTime())??0)<Date.now()+Yn.REFRESH_WINDOW_MS&&!i.isRefreshing&&(i.isRefreshing=!0,this.getIdentity(n).then(p=>{s.set(n,new ks(Promise.resolve(p)))})),o)}):s.set(n,new ks(this.getIdentity(n))).identity}async getIdentity(t){var s,i;await this.cache.purgeExpired().catch(o=>{console.warn(`Error while clearing expired entries in S3ExpressIdentityCache: 
`+o)});const r=await this.createSessionFn(t);if(!((s=r.Credentials)!=null&&s.AccessKeyId)||!((i=r.Credentials)!=null&&i.SecretAccessKey))throw new Error("s3#createSession response credential missing AccessKeyId or SecretAccessKey.");return{accessKeyId:r.Credentials.AccessKeyId,secretAccessKey:r.Credentials.SecretAccessKey,sessionToken:r.Credentials.SessionToken,expiration:r.Credentials.Expiration?new Date(r.Credentials.Expiration):void 0}}};X(Yn,"REFRESH_WINDOW_MS",6e4);let Ui=Yn;var Ra;(function(e){e.ENV="env",e.CONFIG="shared config entry"})(Ra||(Ra={}));const ng="Directory",sg="S3Express",ig="sigv4-s3express",Li="X-Amz-S3session-Token",$i=Li.toLowerCase();class og extends Pi{async signWithCredentials(t,r,n){const s=_a(r);t.headers[$i]=r.sessionToken;const i=this;return Ta(i,s),i.signRequest(t,n??{})}async presignWithCredentials(t,r,n){const s=_a(r);return delete t.headers[$i],t.headers[Li]=r.sessionToken,t.query=t.query??{},t.query[Li]=r.sessionToken,Ta(this,s),this.presign(t,n)}}function _a(e){return{accessKeyId:e.accessKeyId,secretAccessKey:e.secretAccessKey,expiration:e.expiration}}function Ta(e,t){const r=setTimeout(()=>{throw new Error("SignatureV4S3Express credential override was created but not called.")},10),n=e.credentialProvider,s=()=>(clearTimeout(r),e.credentialProvider=n,Promise.resolve(t));e.credentialProvider=s}const ag=e=>(t,r)=>async n=>{var s,i,o,a,c;if(r.endpointV2){const u=r.endpointV2,f=((o=(i=(s=u.properties)==null?void 0:s.authSchemes)==null?void 0:i[0])==null?void 0:o.name)===ig;if((((a=u.properties)==null?void 0:a.backend)===sg||((c=u.properties)==null?void 0:c.bucketType)===ng)&&(Be(r,"S3_EXPRESS_BUCKET","J"),r.isS3ExpressBucket=!0),f){const g=n.input.Bucket;if(g){const w=await e.s3ExpressIdentityProvider.getS3ExpressIdentity(await e.credentials(),{Bucket:g});r.s3ExpressIdentity=w,Ie.isInstance(n.request)&&w.sessionToken&&(n.request.headers[$i]=w.sessionToken)}}}return t(n)},cg={name:"s3ExpressMiddleware",step:"build",tags:["S3","S3_EXPRESS"],override:!0},ug=e=>({applyToStack:t=>{t.add(ag(e),cg)}}),lg=async(e,t,r,n)=>{const s=await n.signWithCredentials(r,e,{});if(s.headers["X-Amz-Security-Token"]||s.headers["x-amz-security-token"])throw new Error("X-Amz-Security-Token must not be set for s3-express requests.");return s},dg=e=>t=>{throw t},fg=(e,t)=>{},hg=e=>(t,r)=>async n=>{if(!Ie.isInstance(n.request))return t(n);const i=Mr(r).selectedHttpAuthScheme;if(!i)throw new Error("No HttpAuthScheme was selected: unable to sign request");const{httpAuthOption:{signingProperties:o={}},identity:a,signer:c}=i;let u;r.s3ExpressIdentity?u=await lg(r.s3ExpressIdentity,o,n.request,await e.signer()):u=await c.sign(n.request,a,o);const f=await t({...n,request:u}).catch((c.errorHandler||dg)(o));return(c.successHandler||fg)(f.response,o),f},pg=e=>({applyToStack:t=>{t.addRelativeTo(hg(e),Du)}}),gg=(e,{session:t})=>{const[r,n]=t;return{...e,forcePathStyle:e.forcePathStyle??!1,useAccelerateEndpoint:e.useAccelerateEndpoint??!1,disableMultiregionAccessPoints:e.disableMultiregionAccessPoints??!1,followRegionRedirects:e.followRegionRedirects??!1,s3ExpressIdentityProvider:e.s3ExpressIdentityProvider??new Ui(async s=>r().send(new n({Bucket:s,SessionMode:"ReadWrite"}))),bucketEndpoint:e.bucketEndpoint??!1}},mg={CopyObjectCommand:!0,UploadPartCopyCommand:!0,CompleteMultipartUploadCommand:!0},yg=3e3,wg=e=>(t,r)=>async n=>{const s=await t(n),{response:i}=s;if(!en.isInstance(i))return s;const{statusCode:o,body:a}=i;if(o<200||o>=300||!(typeof(a==null?void 0:a.stream)=="function"||typeof(a==null?void 0:a.pipe)=="function"||typeof(a==null?void 0:a.tee)=="function"))return s;let u=a,f=a;a&&typeof a=="object"&&!(a instanceof Uint8Array)&&([u,f]=await Mf(a)),i.body=f;const p=await bg(u,{streamCollector:async w=>If(w,yg)});typeof(u==null?void 0:u.destroy)=="function"&&u.destroy();const g=e.utf8Encoder(p.subarray(p.length-16));if(p.length===0&&mg[r.commandName]){const w=new Error("S3 aborted request");throw w.name="InternalError",w}return g&&g.endsWith("</Error>")&&(i.statusCode=400),s},bg=(e=new Uint8Array,t)=>e instanceof Uint8Array?Promise.resolve(e):t.streamCollector(e)||Promise.resolve(new Uint8Array),Eg={relation:"after",toMiddleware:"deserializerMiddleware",tags:["THROW_200_EXCEPTIONS","S3"],name:"throw200ExceptionsMiddleware",override:!0},ir=e=>({applyToStack:t=>{t.addRelativeTo(wg(e),Eg)}}),Sg=e=>typeof e=="string"&&e.indexOf("arn:")===0&&e.split(":").length>=6;function xg(e){return(t,r)=>async n=>{var s,i,o,a;if(e.bucketEndpoint){const c=r.endpointV2;if(c){const u=n.input.Bucket;if(typeof u=="string")try{const f=new URL(u);r.endpointV2={...c,url:f}}catch(f){const p=`@aws-sdk/middleware-sdk-s3: bucketEndpoint=true was set but Bucket=${u} could not be parsed as URL.`;throw((i=(s=r.logger)==null?void 0:s.constructor)==null?void 0:i.name)==="NoOpLogger"?console.warn(p):(a=(o=r.logger)==null?void 0:o.warn)==null||a.call(o,p),f}}}return t(n)}}const vg={name:"bucketEndpointMiddleware",override:!0,relation:"after",toMiddleware:"endpointV2Middleware"};function Ag({bucketEndpoint:e}){return t=>async r=>{const{input:{Bucket:n}}=r;if(!e&&typeof n=="string"&&!Sg(n)&&n.indexOf("/")>=0){const s=new Error(`Bucket name shouldn't contain '/', received '${n}'`);throw s.name="InvalidBucketName",s}return t({...r})}}const Cg={step:"initialize",tags:["VALIDATE_BUCKET_NAME"],name:"validateBucketNameMiddleware",override:!0},Rg=e=>({applyToStack:t=>{t.add(Ag(e),Cg),t.addRelativeTo(xg(e),vg)}}),_g=void 0;function Tg(e){return e===void 0?!0:typeof e=="string"&&e.length<=50}function kg(e){const t=br(e.userAgentAppId??_g);return{...e,customUserAgent:typeof e.customUserAgent=="string"?[[e.customUserAgent]]:e.customUserAgent,userAgentAppId:async()=>{var n,s;const r=await t();if(!Tg(r)){const i=((s=(n=e.logger)==null?void 0:n.constructor)==null?void 0:s.name)==="NoOpLogger"||!e.logger?console:e.logger;typeof r!="string"?i==null||i.warn("userAgentAppId must be a string or undefined."):r.length>50&&(i==null||i.warn("The provided userAgentAppId exceeds the maximum length of 50 characters."))}return r}}}class Bg{constructor({size:t,params:r}){this.data=new Map,this.parameters=[],this.capacity=t??50,r&&(this.parameters=r)}get(t,r){const n=this.hash(t);if(n===!1)return r();if(!this.data.has(n)){if(this.data.size>this.capacity+10){const s=this.data.keys();let i=0;for(;;){const{value:o,done:a}=s.next();if(this.data.delete(o),a||++i>10)break}}this.data.set(n,r())}return this.data.get(n)}size(){return this.data.size}hash(t){let r="";const{parameters:n}=this;if(n.length===0)return!1;for(const s of n){const i=String(t[s]??"");if(i.includes("|;"))return!1;r+=i+"|;"}return r}}const Ng=new RegExp("^(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}$"),cl=e=>Ng.test(e)||e.startsWith("[")&&e.endsWith("]"),Mg=new RegExp("^(?!.*-$)(?!-)[a-zA-Z0-9-]{1,63}$"),oo=(e,t=!1)=>{if(!t)return Mg.test(e);const r=e.split(".");for(const n of r)if(!oo(n))return!1;return!0},$n={},nn="endpoints";function zt(e){return typeof e!="object"||e==null?e:"ref"in e?`$${zt(e.ref)}`:"fn"in e?`${e.fn}(${(e.argv||[]).map(zt).join(", ")})`:JSON.stringify(e,null,2)}class it extends Error{constructor(t){super(t),this.name="EndpointError"}}const Ig=(e,t)=>e===t,Pg=e=>{const t=e.split("."),r=[];for(const n of t){const s=n.indexOf("[");if(s!==-1){if(n.indexOf("]")!==n.length-1)throw new it(`Path: '${e}' does not end with ']'`);const i=n.slice(s+1,-1);if(Number.isNaN(parseInt(i)))throw new it(`Invalid array index: '${i}' in path: '${e}'`);s!==0&&r.push(n.slice(0,s)),r.push(i)}else r.push(n)}return r},ul=(e,t)=>Pg(t).reduce((r,n)=>{if(typeof r!="object")throw new it(`Index '${n}' in '${t}' not found in '${JSON.stringify(e)}'`);return Array.isArray(r)?r[parseInt(n)]:r[n]},e),Fg=e=>e!=null,Og=e=>!e,Bs={[Jr.HTTP]:80,[Jr.HTTPS]:443},Dg=e=>{const t=(()=>{try{if(e instanceof URL)return e;if(typeof e=="object"&&"hostname"in e){const{hostname:g,port:w,protocol:R="",path:k="",query:_={}}=e,h=new URL(`${R}//${g}${w?`:${w}`:""}${k}`);return h.search=Object.entries(_).map(([E,B])=>`${E}=${B}`).join("&"),h}return new URL(e)}catch{return null}})();if(!t)return console.error(`Unable to parse ${JSON.stringify(e)} as a whatwg URL.`),null;const r=t.href,{host:n,hostname:s,pathname:i,protocol:o,search:a}=t;if(a)return null;const c=o.slice(0,-1);if(!Object.values(Jr).includes(c))return null;const u=cl(s),f=r.includes(`${n}:${Bs[c]}`)||typeof e=="string"&&e.includes(`${n}:${Bs[c]}`),p=`${n}${f?`:${Bs[c]}`:""}`;return{scheme:c,authority:p,path:i,normalizedPath:i.endsWith("/")?i:`${i}/`,isIp:u}},Ug=(e,t)=>e===t,Lg=(e,t,r,n)=>t>=r||e.length<r?null:n?e.substring(e.length-r,e.length-t):e.substring(t,r),$g=e=>encodeURIComponent(e).replace(/[!*'()]/g,t=>`%${t.charCodeAt(0).toString(16).toUpperCase()}`),Hg={booleanEquals:Ig,getAttr:ul,isSet:Fg,isValidHostLabel:oo,not:Og,parseURL:Dg,stringEquals:Ug,substring:Lg,uriEncode:$g},ll=(e,t)=>{const r=[],n={...t.endpointParams,...t.referenceRecord};let s=0;for(;s<e.length;){const i=e.indexOf("{",s);if(i===-1){r.push(e.slice(s));break}r.push(e.slice(s,i));const o=e.indexOf("}",i);if(o===-1){r.push(e.slice(i));break}e[i+1]==="{"&&e[o+1]==="}"&&(r.push(e.slice(i+1,o)),s=o+2);const a=e.substring(i+1,o);if(a.includes("#")){const[c,u]=a.split("#");r.push(ul(n[c],u))}else r.push(n[a]);s=o+1}return r.join("")},qg=({ref:e},t)=>({...t.endpointParams,...t.referenceRecord})[e],ts=(e,t,r)=>{if(typeof e=="string")return ll(e,r);if(e.fn)return dl(e,r);if(e.ref)return qg(e,r);throw new it(`'${t}': ${String(e)} is not a string, function or reference.`)},dl=({fn:e,argv:t},r)=>{const n=t.map(i=>["boolean","number"].includes(typeof i)?i:ts(i,"arg",r)),s=e.split(".");return s[0]in $n&&s[1]!=null?$n[s[0]][s[1]](...n):Hg[e](...n)},zg=({assign:e,...t},r)=>{var s,i;if(e&&e in r.referenceRecord)throw new it(`'${e}' is already defined in Reference Record.`);const n=dl(t,r);return(i=(s=r.logger)==null?void 0:s.debug)==null||i.call(s,`${nn} evaluateCondition: ${zt(t)} = ${zt(n)}`),{result:n===""?!0:!!n,...e!=null&&{toAssign:{name:e,value:n}}}},ao=(e=[],t)=>{var n,s;const r={};for(const i of e){const{result:o,toAssign:a}=zg(i,{...t,referenceRecord:{...t.referenceRecord,...r}});if(!o)return{result:o};a&&(r[a.name]=a.value,(s=(n=t.logger)==null?void 0:n.debug)==null||s.call(n,`${nn} assign: ${a.name} := ${zt(a.value)}`))}return{result:!0,referenceRecord:r}},jg=(e,t)=>Object.entries(e).reduce((r,[n,s])=>({...r,[n]:s.map(i=>{const o=ts(i,"Header value entry",t);if(typeof o!="string")throw new it(`Header '${n}' value '${o}' is not a string`);return o})}),{}),fl=(e,t)=>{if(Array.isArray(e))return e.map(r=>fl(r,t));switch(typeof e){case"string":return ll(e,t);case"object":if(e===null)throw new it(`Unexpected endpoint property: ${e}`);return hl(e,t);case"boolean":return e;default:throw new it(`Unexpected endpoint property type: ${typeof e}`)}},hl=(e,t)=>Object.entries(e).reduce((r,[n,s])=>({...r,[n]:fl(s,t)}),{}),Wg=(e,t)=>{const r=ts(e,"Endpoint URL",t);if(typeof r=="string")try{return new URL(r)}catch(n){throw console.error(`Failed to construct URL with ${r}`,n),n}throw new it(`Endpoint URL must be a string, got ${typeof r}`)},Kg=(e,t)=>{var f,p;const{conditions:r,endpoint:n}=e,{result:s,referenceRecord:i}=ao(r,t);if(!s)return;const o={...t,referenceRecord:{...t.referenceRecord,...i}},{url:a,properties:c,headers:u}=n;return(p=(f=t.logger)==null?void 0:f.debug)==null||p.call(f,`${nn} Resolving endpoint from template: ${zt(n)}`),{...u!=null&&{headers:jg(u,o)},...c!=null&&{properties:hl(c,o)},url:Wg(a,o)}},Vg=(e,t)=>{const{conditions:r,error:n}=e,{result:s,referenceRecord:i}=ao(r,t);if(s)throw new it(ts(n,"Error",{...t,referenceRecord:{...t.referenceRecord,...i}}))},Gg=(e,t)=>{const{conditions:r,rules:n}=e,{result:s,referenceRecord:i}=ao(r,t);if(s)return pl(n,{...t,referenceRecord:{...t.referenceRecord,...i}})},pl=(e,t)=>{for(const r of e)if(r.type==="endpoint"){const n=Kg(r,t);if(n)return n}else if(r.type==="error")Vg(r,t);else if(r.type==="tree"){const n=Gg(r,t);if(n)return n}else throw new it(`Unknown endpoint rule: ${r}`);throw new it("Rules evaluation failed")},Xg=(e,t)=>{var u,f,p,g;const{endpointParams:r,logger:n}=t,{parameters:s,rules:i}=e;(f=(u=t.logger)==null?void 0:u.debug)==null||f.call(u,`${nn} Initial EndpointParams: ${zt(r)}`);const o=Object.entries(s).filter(([,w])=>w.default!=null).map(([w,R])=>[w,R.default]);if(o.length>0)for(const[w,R]of o)r[w]=r[w]??R;const a=Object.entries(s).filter(([,w])=>w.required).map(([w])=>w);for(const w of a)if(r[w]==null)throw new it(`Missing required parameter: '${w}'`);const c=pl(i,{endpointParams:r,logger:n,referenceRecord:{}});return(g=(p=t.logger)==null?void 0:p.debug)==null||g.call(p,`${nn} Resolved endpoint: ${zt(c)}`),c},gl=(e,t=!1)=>{if(t){for(const r of e.split("."))if(!gl(r))return!1;return!0}return!(!oo(e)||e.length<3||e.length>63||e!==e.toLowerCase()||cl(e))},ka=":",Zg="/",Yg=e=>{const t=e.split(ka);if(t.length<6)return null;const[r,n,s,i,o,...a]=t;if(r!=="arn"||n===""||s===""||a.join(ka)==="")return null;const c=a.map(u=>u.split(Zg)).flat();return{partition:n,service:s,region:i,accountId:o,resourceId:c}},Qg=[{id:"aws",outputs:{dnsSuffix:"amazonaws.com",dualStackDnsSuffix:"api.aws",implicitGlobalRegion:"us-east-1",name:"aws",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^(us|eu|ap|sa|ca|me|af|il|mx)\\-\\w+\\-\\d+$",regions:{"af-south-1":{description:"Africa (Cape Town)"},"ap-east-1":{description:"Asia Pacific (Hong Kong)"},"ap-northeast-1":{description:"Asia Pacific (Tokyo)"},"ap-northeast-2":{description:"Asia Pacific (Seoul)"},"ap-northeast-3":{description:"Asia Pacific (Osaka)"},"ap-south-1":{description:"Asia Pacific (Mumbai)"},"ap-south-2":{description:"Asia Pacific (Hyderabad)"},"ap-southeast-1":{description:"Asia Pacific (Singapore)"},"ap-southeast-2":{description:"Asia Pacific (Sydney)"},"ap-southeast-3":{description:"Asia Pacific (Jakarta)"},"ap-southeast-4":{description:"Asia Pacific (Melbourne)"},"ap-southeast-5":{description:"Asia Pacific (Malaysia)"},"ap-southeast-7":{description:"Asia Pacific (Thailand)"},"aws-global":{description:"AWS Standard global region"},"ca-central-1":{description:"Canada (Central)"},"ca-west-1":{description:"Canada West (Calgary)"},"eu-central-1":{description:"Europe (Frankfurt)"},"eu-central-2":{description:"Europe (Zurich)"},"eu-north-1":{description:"Europe (Stockholm)"},"eu-south-1":{description:"Europe (Milan)"},"eu-south-2":{description:"Europe (Spain)"},"eu-west-1":{description:"Europe (Ireland)"},"eu-west-2":{description:"Europe (London)"},"eu-west-3":{description:"Europe (Paris)"},"il-central-1":{description:"Israel (Tel Aviv)"},"me-central-1":{description:"Middle East (UAE)"},"me-south-1":{description:"Middle East (Bahrain)"},"mx-central-1":{description:"Mexico (Central)"},"sa-east-1":{description:"South America (Sao Paulo)"},"us-east-1":{description:"US East (N. Virginia)"},"us-east-2":{description:"US East (Ohio)"},"us-west-1":{description:"US West (N. California)"},"us-west-2":{description:"US West (Oregon)"}}},{id:"aws-cn",outputs:{dnsSuffix:"amazonaws.com.cn",dualStackDnsSuffix:"api.amazonwebservices.com.cn",implicitGlobalRegion:"cn-northwest-1",name:"aws-cn",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^cn\\-\\w+\\-\\d+$",regions:{"aws-cn-global":{description:"AWS China global region"},"cn-north-1":{description:"China (Beijing)"},"cn-northwest-1":{description:"China (Ningxia)"}}},{id:"aws-us-gov",outputs:{dnsSuffix:"amazonaws.com",dualStackDnsSuffix:"api.aws",implicitGlobalRegion:"us-gov-west-1",name:"aws-us-gov",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^us\\-gov\\-\\w+\\-\\d+$",regions:{"aws-us-gov-global":{description:"AWS GovCloud (US) global region"},"us-gov-east-1":{description:"AWS GovCloud (US-East)"},"us-gov-west-1":{description:"AWS GovCloud (US-West)"}}},{id:"aws-iso",outputs:{dnsSuffix:"c2s.ic.gov",dualStackDnsSuffix:"c2s.ic.gov",implicitGlobalRegion:"us-iso-east-1",name:"aws-iso",supportsDualStack:!1,supportsFIPS:!0},regionRegex:"^us\\-iso\\-\\w+\\-\\d+$",regions:{"aws-iso-global":{description:"AWS ISO (US) global region"},"us-iso-east-1":{description:"US ISO East"},"us-iso-west-1":{description:"US ISO WEST"}}},{id:"aws-iso-b",outputs:{dnsSuffix:"sc2s.sgov.gov",dualStackDnsSuffix:"sc2s.sgov.gov",implicitGlobalRegion:"us-isob-east-1",name:"aws-iso-b",supportsDualStack:!1,supportsFIPS:!0},regionRegex:"^us\\-isob\\-\\w+\\-\\d+$",regions:{"aws-iso-b-global":{description:"AWS ISOB (US) global region"},"us-isob-east-1":{description:"US ISOB East (Ohio)"}}},{id:"aws-iso-e",outputs:{dnsSuffix:"cloud.adc-e.uk",dualStackDnsSuffix:"cloud.adc-e.uk",implicitGlobalRegion:"eu-isoe-west-1",name:"aws-iso-e",supportsDualStack:!1,supportsFIPS:!0},regionRegex:"^eu\\-isoe\\-\\w+\\-\\d+$",regions:{"eu-isoe-west-1":{description:"EU ISOE West"}}},{id:"aws-iso-f",outputs:{dnsSuffix:"csp.hci.ic.gov",dualStackDnsSuffix:"csp.hci.ic.gov",implicitGlobalRegion:"us-isof-south-1",name:"aws-iso-f",supportsDualStack:!1,supportsFIPS:!0},regionRegex:"^us\\-isof\\-\\w+\\-\\d+$",regions:{}}],Jg="1.1",em={partitions:Qg,version:Jg};let tm=em;const rm=e=>{const{partitions:t}=tm;for(const n of t){const{regions:s,outputs:i}=n;for(const[o,a]of Object.entries(s))if(o===e)return{...i,...a}}for(const n of t){const{regionRegex:s,outputs:i}=n;if(new RegExp(s).test(e))return{...i}}const r=t.find(n=>n.id==="aws");if(!r)throw new Error("Provided region was not found in the partition array or regex, and default partition with id 'aws' doesn't exist.");return{...r.outputs}},ml={isVirtualHostableS3Bucket:gl,parseArn:Yg,partition:rm};$n.aws=ml;const nm=/\d{12}\.ddb/;async function sm(e,t,r){var i,o,a,c,u,f,p;const n=r.request;if(((i=n==null?void 0:n.headers)==null?void 0:i["smithy-protocol"])==="rpc-v2-cbor"&&Be(e,"PROTOCOL_RPC_V2_CBOR","M"),typeof t.retryStrategy=="function"){const g=await t.retryStrategy();typeof g.acquireInitialRetryToken=="function"?(a=(o=g.constructor)==null?void 0:o.name)!=null&&a.includes("Adaptive")?Be(e,"RETRY_MODE_ADAPTIVE","F"):Be(e,"RETRY_MODE_STANDARD","E"):Be(e,"RETRY_MODE_LEGACY","D")}if(typeof t.accountIdEndpointMode=="function"){const g=e.endpointV2;switch(String((c=g==null?void 0:g.url)==null?void 0:c.hostname).match(nm)&&Be(e,"ACCOUNT_ID_ENDPOINT","O"),await((u=t.accountIdEndpointMode)==null?void 0:u.call(t))){case"disabled":Be(e,"ACCOUNT_ID_MODE_DISABLED","Q");break;case"preferred":Be(e,"ACCOUNT_ID_MODE_PREFERRED","P");break;case"required":Be(e,"ACCOUNT_ID_MODE_REQUIRED","R");break}}const s=(p=(f=e.__smithy_context)==null?void 0:f.selectedHttpAuthScheme)==null?void 0:p.identity;if(s!=null&&s.$source){const g=s;g.accountId&&Be(e,"RESOLVED_ACCOUNT_ID","T");for(const[w,R]of Object.entries(g.$source??{}))Be(e,w,R)}}const Ba="user-agent",Ns="x-amz-user-agent",Na=" ",Ms="/",im=/[^\!\$\%\&\'\*\+\-\.\^\_\`\|\~\d\w]/g,om=/[^\!\$\%\&\'\*\+\-\.\^\_\`\|\~\d\w\#]/g,Ma="-",am=1024;function cm(e){let t="";for(const r in e){const n=e[r];if(t.length+n.length+1<=am){t.length?t+=","+n:t+=n;continue}break}return t}const um=e=>(t,r)=>async n=>{var w,R,k,_;const{request:s}=n;if(!Ie.isInstance(s))return t(n);const{headers:i}=s,o=((w=r==null?void 0:r.userAgent)==null?void 0:w.map(En))||[],a=(await e.defaultUserAgentProvider()).map(En);await sm(r,e,n);const c=r;a.push(`m/${cm(Object.assign({},(R=r.__smithy_context)==null?void 0:R.features,(k=c.__aws_sdk_context)==null?void 0:k.features))}`);const u=((_=e==null?void 0:e.customUserAgent)==null?void 0:_.map(En))||[],f=await e.userAgentAppId();f&&a.push(En([`app/${f}`]));const p=[].concat([...a,...o,...u]).join(Na),g=[...a.filter(h=>h.startsWith("aws-sdk-")),...u].join(Na);return e.runtime!=="browser"?(g&&(i[Ns]=i[Ns]?`${i[Ba]} ${g}`:g),i[Ba]=p):i[Ns]=p,t({...n,request:s})},En=e=>{var o;const t=e[0].split(Ms).map(a=>a.replace(im,Ma)).join(Ms),r=(o=e[1])==null?void 0:o.replace(om,Ma),n=t.indexOf(Ms),s=t.substring(0,n);let i=t.substring(n+1);return s==="api"&&(i=i.toLowerCase()),[s,i,r].filter(a=>a&&a.length>0).reduce((a,c,u)=>{switch(u){case 0:return c;case 1:return`${a}/${c}`;default:return`${a}#${c}`}},"")},lm={name:"getUserAgentMiddleware",step:"build",priority:"low",tags:["SET_USER_AGENT","USER_AGENT"],override:!0},dm=e=>({applyToStack:t=>{t.add(um(e),lm)}}),fm=!1,hm=!1,yl=e=>typeof e=="string"&&(e.startsWith("fips-")||e.endsWith("-fips")),Ia=e=>yl(e)?["fips-aws-global","aws-fips"].includes(e)?"us-east-1":e.replace(/fips-(dkr-|prod-)?|-fips/,""):e,pm=e=>{const{region:t,useFipsEndpoint:r}=e;if(!t)throw new Error("Region is missing");return{...e,region:async()=>{if(typeof t=="string")return Ia(t);const n=await t();return Ia(n)},useFipsEndpoint:async()=>{const n=typeof t=="string"?t:await t();return yl(n)?!0:typeof r!="function"?Promise.resolve(!!r):r()}}},gm=e=>({...e,eventStreamMarshaller:e.eventStreamSerdeProvider(e)}),Pa="content-length";function mm(e){return t=>async r=>{const n=r.request;if(Ie.isInstance(n)){const{body:s,headers:i}=n;if(s&&Object.keys(i).map(o=>o.toLowerCase()).indexOf(Pa)===-1)try{const o=e(s);n.headers={...n.headers,[Pa]:String(o)}}catch{}}return t({...r,request:n})}}const ym={step:"build",tags:["SET_CONTENT_LENGTH","CONTENT_LENGTH"],name:"contentLengthMiddleware",override:!0},wm=e=>({applyToStack:t=>{t.add(mm(e.bodyLengthChecker),ym)}}),bm=async e=>{const t=(e==null?void 0:e.Bucket)||"";if(typeof e.Bucket=="string"&&(e.Bucket=t.replace(/#/g,encodeURIComponent("#")).replace(/\?/g,encodeURIComponent("?"))),Am(t)){if(e.ForcePathStyle===!0)throw new Error("Path-style addressing cannot be used with ARN buckets")}else(!vm(t)||t.indexOf(".")!==-1&&!String(e.Endpoint).startsWith("http:")||t.toLowerCase()!==t||t.length<3)&&(e.ForcePathStyle=!0);return e.DisableMultiRegionAccessPoints&&(e.disableMultiRegionAccessPoints=!0,e.DisableMRAP=!0),e},Em=/^[a-z0-9][a-z0-9\.\-]{1,61}[a-z0-9]$/,Sm=/(\d+\.){3}\d+/,xm=/\.\./,vm=e=>Em.test(e)&&!Sm.test(e)&&!xm.test(e),Am=e=>{const[t,r,n,,,s]=e.split(":"),i=t==="arn"&&e.split(":").length>=6,o=!!(i&&r&&n&&s);if(i&&!o)throw new Error(`Invalid ARN: ${e} was an invalid ARN.`);return o},Cm=(e,t,r)=>{const n=async()=>{const s=r[e]??r[t];return typeof s=="function"?s():s};return e==="credentialScope"||t==="CredentialScope"?async()=>{const s=typeof r.credentials=="function"?await r.credentials():r.credentials;return(s==null?void 0:s.credentialScope)??(s==null?void 0:s.CredentialScope)}:e==="accountId"||t==="AccountId"?async()=>{const s=typeof r.credentials=="function"?await r.credentials():r.credentials;return(s==null?void 0:s.accountId)??(s==null?void 0:s.AccountId)}:e==="endpoint"||t==="endpoint"?async()=>{const s=await n();if(s&&typeof s=="object"){if("url"in s)return s.url.href;if("hostname"in s){const{protocol:i,hostname:o,port:a,path:c}=s;return`${i}//${o}${a?":"+a:""}${c}`}}return s}:n},wl=async e=>{};function Rm(e){const t={};if(e=e.replace(/^\?/,""),e)for(const r of e.split("&")){let[n,s=null]=r.split("=");n=decodeURIComponent(n),s&&(s=decodeURIComponent(s)),n in t?Array.isArray(t[n])?t[n].push(s):t[n]=[t[n],s]:t[n]=s}return t}const Hn=e=>{if(typeof e=="string")return Hn(new URL(e));const{hostname:t,pathname:r,port:n,protocol:s,search:i}=e;let o;return i&&(o=Rm(i)),{hostname:t,port:n?parseInt(n):void 0,protocol:s,path:r,query:o}},co=e=>typeof e=="object"?"url"in e?Hn(e.url):e:Hn(e),bl=async(e,t,r,n)=>{if(!r.endpoint){let o;r.serviceConfiguredEndpoint?o=await r.serviceConfiguredEndpoint():o=await wl(r.serviceId),o&&(r.endpoint=()=>Promise.resolve(co(o)))}const s=await El(e,t,r);if(typeof r.endpointProvider!="function")throw new Error("config.endpointProvider is not set.");return r.endpointProvider(s,n)},El=async(e,t,r)=>{var i;const n={},s=((i=t==null?void 0:t.getEndpointParameterInstructions)==null?void 0:i.call(t))||{};for(const[o,a]of Object.entries(s))switch(a.type){case"staticContextParams":n[o]=a.value;break;case"contextParams":n[o]=e[a.name];break;case"clientContextParams":case"builtInParams":n[o]=await Cm(a.name,o,r)();break;case"operationContextParams":n[o]=a.get(e);break;default:throw new Error("Unrecognized endpoint parameter instruction: "+JSON.stringify(a))}return Object.keys(s).length===0&&Object.assign(n,r),String(r.serviceId).toLowerCase()==="s3"&&await bm(n),n},_m=({config:e,instructions:t})=>(r,n)=>async s=>{var a,c,u;e.endpoint&&Lf(n,"ENDPOINT_OVERRIDE","N");const i=await bl(s.input,{getEndpointParameterInstructions(){return t}},{...e},n);n.endpointV2=i,n.authSchemes=(a=i.properties)==null?void 0:a.authSchemes;const o=(c=n.authSchemes)==null?void 0:c[0];if(o){n.signing_region=o.signingRegion,n.signing_service=o.signingName;const f=Mr(n),p=(u=f==null?void 0:f.selectedHttpAuthScheme)==null?void 0:u.httpAuthOption;p&&(p.signingProperties=Object.assign(p.signingProperties||{},{signing_region:o.signingRegion,signingRegion:o.signingRegion,signing_service:o.signingName,signingName:o.signingName,signingRegionSet:o.signingRegionSet},o.properties))}return r({...s})},Tm={step:"serialize",tags:["ENDPOINT_PARAMETERS","ENDPOINT_V2","ENDPOINT"],name:"endpointV2Middleware",override:!0,relation:"before",toMiddleware:Ki.name},or=(e,t)=>({applyToStack:r=>{r.addRelativeTo(_m({config:e,instructions:t}),Tm)}}),km=e=>{const t=e.tls??!0,{endpoint:r}=e,n=r!=null?async()=>co(await Et(r)()):void 0,i={...e,endpoint:n,tls:t,isCustomEndpoint:!!r,useDualstackEndpoint:Et(e.useDualstackEndpoint??!1),useFipsEndpoint:Et(e.useFipsEndpoint??!1)};let o;return i.serviceConfiguredEndpoint=async()=>(e.serviceId&&!o&&(o=wl(e.serviceId)),o),i};var kr;(function(e){e.STANDARD="standard",e.ADAPTIVE="adaptive"})(kr||(kr={}));const qn=3,Bm=kr.STANDARD,Nm=["BandwidthLimitExceeded","EC2ThrottledException","LimitExceededException","PriorRequestNotComplete","ProvisionedThroughputExceededException","RequestLimitExceeded","RequestThrottled","RequestThrottledException","SlowDown","ThrottledException","Throttling","ThrottlingException","TooManyRequestsException","TransactionInProgressException"],Mm=["TimeoutError","RequestTimeout","RequestTimeoutException"],Im=[500,502,503,504],Pm=["ECONNRESET","ECONNREFUSED","EPIPE","ETIMEDOUT"],Fm=e=>{var t;return(t=e.$metadata)==null?void 0:t.clockSkewCorrected},Sl=e=>{var t,r;return((t=e.$metadata)==null?void 0:t.httpStatusCode)===429||Nm.includes(e.name)||((r=e.$retryable)==null?void 0:r.throttling)==!0},uo=(e,t=0)=>{var r;return Fm(e)||Mm.includes(e.name)||Pm.includes((e==null?void 0:e.code)||"")||Im.includes(((r=e.$metadata)==null?void 0:r.httpStatusCode)||0)||e.cause!==void 0&&t<=10&&uo(e.cause,t+1)},Om=e=>{var t;if(((t=e.$metadata)==null?void 0:t.httpStatusCode)!==void 0){const r=e.$metadata.httpStatusCode;return 500<=r&&r<=599&&!uo(e)}return!1};class rs{constructor(t){this.currentCapacity=0,this.enabled=!1,this.lastMaxRate=0,this.measuredTxRate=0,this.requestCount=0,this.lastTimestamp=0,this.timeWindow=0,this.beta=(t==null?void 0:t.beta)??.7,this.minCapacity=(t==null?void 0:t.minCapacity)??1,this.minFillRate=(t==null?void 0:t.minFillRate)??.5,this.scaleConstant=(t==null?void 0:t.scaleConstant)??.4,this.smooth=(t==null?void 0:t.smooth)??.8;const r=this.getCurrentTimeInSeconds();this.lastThrottleTime=r,this.lastTxRateBucket=Math.floor(this.getCurrentTimeInSeconds()),this.fillRate=this.minFillRate,this.maxCapacity=this.minCapacity}getCurrentTimeInSeconds(){return Date.now()/1e3}async getSendToken(){return this.acquireTokenBucket(1)}async acquireTokenBucket(t){if(this.enabled){if(this.refillTokenBucket(),t>this.currentCapacity){const r=(t-this.currentCapacity)/this.fillRate*1e3;await new Promise(n=>rs.setTimeoutFn(n,r))}this.currentCapacity=this.currentCapacity-t}}refillTokenBucket(){const t=this.getCurrentTimeInSeconds();if(!this.lastTimestamp){this.lastTimestamp=t;return}const r=(t-this.lastTimestamp)*this.fillRate;this.currentCapacity=Math.min(this.maxCapacity,this.currentCapacity+r),this.lastTimestamp=t}updateClientSendingRate(t){let r;if(this.updateMeasuredRate(),Sl(t)){const s=this.enabled?Math.min(this.measuredTxRate,this.fillRate):this.measuredTxRate;this.lastMaxRate=s,this.calculateTimeWindow(),this.lastThrottleTime=this.getCurrentTimeInSeconds(),r=this.cubicThrottle(s),this.enableTokenBucket()}else this.calculateTimeWindow(),r=this.cubicSuccess(this.getCurrentTimeInSeconds());const n=Math.min(r,2*this.measuredTxRate);this.updateTokenBucketRate(n)}calculateTimeWindow(){this.timeWindow=this.getPrecise(Math.pow(this.lastMaxRate*(1-this.beta)/this.scaleConstant,1/3))}cubicThrottle(t){return this.getPrecise(t*this.beta)}cubicSuccess(t){return this.getPrecise(this.scaleConstant*Math.pow(t-this.lastThrottleTime-this.timeWindow,3)+this.lastMaxRate)}enableTokenBucket(){this.enabled=!0}updateTokenBucketRate(t){this.refillTokenBucket(),this.fillRate=Math.max(t,this.minFillRate),this.maxCapacity=Math.max(t,this.minCapacity),this.currentCapacity=Math.min(this.currentCapacity,this.maxCapacity)}updateMeasuredRate(){const t=this.getCurrentTimeInSeconds(),r=Math.floor(t*2)/2;if(this.requestCount++,r>this.lastTxRateBucket){const n=this.requestCount/(r-this.lastTxRateBucket);this.measuredTxRate=this.getPrecise(n*this.smooth+this.measuredTxRate*(1-this.smooth)),this.requestCount=0,this.lastTxRateBucket=r}}getPrecise(t){return parseFloat(t.toFixed(8))}}rs.setTimeoutFn=setTimeout;const Hi=100,xl=20*1e3,Dm=500,Fa=500,Um=5,Lm=10,$m=1,Hm="amz-sdk-invocation-id",qm="amz-sdk-request",zm=()=>{let e=Hi;return{computeNextBackoffDelay:n=>Math.floor(Math.min(xl,Math.random()*2**n*e)),setDelayBase:n=>{e=n}}},Oa=({retryDelay:e,retryCount:t,retryCost:r})=>({getRetryCount:()=>t,getRetryDelay:()=>Math.min(xl,e),getRetryCost:()=>r});class vl{constructor(t){this.maxAttempts=t,this.mode=kr.STANDARD,this.capacity=Fa,this.retryBackoffStrategy=zm(),this.maxAttemptsProvider=typeof t=="function"?t:async()=>t}async acquireInitialRetryToken(t){return Oa({retryDelay:Hi,retryCount:0})}async refreshRetryTokenForRetry(t,r){const n=await this.getMaxAttempts();if(this.shouldRetry(t,r,n)){const s=r.errorType;this.retryBackoffStrategy.setDelayBase(s==="THROTTLING"?Dm:Hi);const i=this.retryBackoffStrategy.computeNextBackoffDelay(t.getRetryCount()),o=r.retryAfterHint?Math.max(r.retryAfterHint.getTime()-Date.now()||0,i):i,a=this.getCapacityCost(s);return this.capacity-=a,Oa({retryDelay:o,retryCount:t.getRetryCount()+1,retryCost:a})}throw new Error("No retry token available")}recordSuccess(t){this.capacity=Math.max(Fa,this.capacity+(t.getRetryCost()??$m))}getCapacity(){return this.capacity}async getMaxAttempts(){try{return await this.maxAttemptsProvider()}catch{return console.warn(`Max attempts provider could not resolve. Using default of ${qn}`),qn}}shouldRetry(t,r,n){return t.getRetryCount()+1<n&&this.capacity>=this.getCapacityCost(r.errorType)&&this.isRetryableError(r.errorType)}getCapacityCost(t){return t==="TRANSIENT"?Lm:Um}isRetryableError(t){return t==="THROTTLING"||t==="TRANSIENT"}}class jm{constructor(t,r){this.maxAttemptsProvider=t,this.mode=kr.ADAPTIVE;const{rateLimiter:n}=r??{};this.rateLimiter=n??new rs,this.standardRetryStrategy=new vl(t)}async acquireInitialRetryToken(t){return await this.rateLimiter.getSendToken(),this.standardRetryStrategy.acquireInitialRetryToken(t)}async refreshRetryTokenForRetry(t,r){return this.rateLimiter.updateClientSendingRate(r),this.standardRetryStrategy.refreshRetryTokenForRetry(t,r)}recordSuccess(t){this.rateLimiter.updateClientSendingRate({}),this.standardRetryStrategy.recordSuccess(t)}}let Sn;const Wm=new Uint8Array(16);function Km(){if(!Sn&&(Sn=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!Sn))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Sn(Wm)}const Ke=[];for(let e=0;e<256;++e)Ke.push((e+256).toString(16).slice(1));function Vm(e,t=0){return Ke[e[t+0]]+Ke[e[t+1]]+Ke[e[t+2]]+Ke[e[t+3]]+"-"+Ke[e[t+4]]+Ke[e[t+5]]+"-"+Ke[e[t+6]]+Ke[e[t+7]]+"-"+Ke[e[t+8]]+Ke[e[t+9]]+"-"+Ke[e[t+10]]+Ke[e[t+11]]+Ke[e[t+12]]+Ke[e[t+13]]+Ke[e[t+14]]+Ke[e[t+15]]}const Gm=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Da={randomUUID:Gm};function Xm(e,t,r){if(Da.randomUUID&&!e)return Da.randomUUID();e=e||{};const n=e.random||(e.rng||Km)();return n[6]=n[6]&15|64,n[8]=n[8]&63|128,Vm(n)}const Zm=e=>e instanceof Error?e:e instanceof Object?Object.assign(new Error,e):typeof e=="string"?new Error(e):new Error(`AWS SDK error wrapper for ${e}`),Ym=e=>{const{retryStrategy:t}=e,r=Et(e.maxAttempts??qn);return{...e,maxAttempts:r,retryStrategy:async()=>t||(await Et(e.retryMode)()===kr.ADAPTIVE?new jm(r):new vl(r))}},Qm=e=>(e==null?void 0:e.body)instanceof ReadableStream,Jm=e=>(t,r)=>async n=>{var o;let s=await e.retryStrategy();const i=await e.maxAttempts();if(e0(s)){s=s;let a=await s.acquireInitialRetryToken(r.partition_id),c=new Error,u=0,f=0;const{request:p}=n,g=Ie.isInstance(p);for(g&&(p.headers[Hm]=Xm());;)try{g&&(p.headers[qm]=`attempt=${u+1}; max=${i}`);const{response:w,output:R}=await t(n);return s.recordSuccess(a),R.$metadata.attempts=u+1,R.$metadata.totalRetryDelay=f,{response:w,output:R}}catch(w){const R=t0(w);if(c=Zm(w),g&&Qm(p))throw(o=r.logger instanceof Ji?console:r.logger)==null||o.warn("An error was encountered in a non-retryable streaming request."),c;try{a=await s.refreshRetryTokenForRetry(a,R)}catch{throw c.$metadata||(c.$metadata={}),c.$metadata.attempts=u+1,c.$metadata.totalRetryDelay=f,c}u=a.getRetryCount();const k=a.getRetryDelay();f+=k,await new Promise(_=>setTimeout(_,k))}}else return s=s,s!=null&&s.mode&&(r.userAgent=[...r.userAgent||[],["cfg/retry-mode",s.mode]]),s.retry(t,n)},e0=e=>typeof e.acquireInitialRetryToken<"u"&&typeof e.refreshRetryTokenForRetry<"u"&&typeof e.recordSuccess<"u",t0=e=>{const t={error:e,errorType:r0(e)},r=i0(e.$response);return r&&(t.retryAfterHint=r),t},r0=e=>Sl(e)?"THROTTLING":uo(e)?"TRANSIENT":Om(e)?"SERVER_ERROR":"CLIENT_ERROR",n0={name:"retryMiddleware",tags:["RETRY"],step:"finalizeRequest",priority:"high",override:!0},s0=e=>({applyToStack:t=>{t.add(Jm(e),n0)}}),i0=e=>{if(!en.isInstance(e))return;const t=Object.keys(e.headers).find(i=>i.toLowerCase()==="retry-after");if(!t)return;const r=e.headers[t],n=Number(r);return Number.isNaN(n)?new Date(r):new Date(n*1e3)},o0={CrtSignerV4:null};class a0{constructor(t){X(this,"sigv4aSigner");X(this,"sigv4Signer");X(this,"signerOptions");this.sigv4Signer=new og(t),this.signerOptions=t}async sign(t,r={}){if(r.signingRegion==="*"){if(this.signerOptions.runtime!=="node")throw new Error("This request requires signing with SigV4Asymmetric algorithm. It's only available in Node.js");return this.getSigv4aSigner().sign(t,r)}return this.sigv4Signer.sign(t,r)}async signWithCredentials(t,r,n={}){if(n.signingRegion==="*"){if(this.signerOptions.runtime!=="node")throw new Error("This request requires signing with SigV4Asymmetric algorithm. It's only available in Node.js");return this.getSigv4aSigner().signWithCredentials(t,r,n)}return this.sigv4Signer.signWithCredentials(t,r,n)}async presign(t,r={}){if(r.signingRegion==="*"){if(this.signerOptions.runtime!=="node")throw new Error("This request requires signing with SigV4Asymmetric algorithm. It's only available in Node.js");return this.getSigv4aSigner().presign(t,r)}return this.sigv4Signer.presign(t,r)}async presignWithCredentials(t,r,n={}){if(n.signingRegion==="*")throw new Error("Method presignWithCredentials is not supported for [signingRegion=*].");return this.sigv4Signer.presignWithCredentials(t,r,n)}getSigv4aSigner(){if(!this.sigv4aSigner){let t=null;try{if(t=o0.CrtSignerV4,typeof t!="function")throw new Error}catch(r){throw r.message=`${r.message}
Please check whether you have installed the "@aws-sdk/signature-v4-crt" package explicitly. 
You must also register the package by calling [require("@aws-sdk/signature-v4-crt");] or an ESM equivalent such as [import "@aws-sdk/signature-v4-crt";]. 
For more information please go to https://github.com/aws/aws-sdk-js-v3#functionality-requiring-aws-common-runtime-crt`,r}this.sigv4aSigner=new t({...this.signerOptions,signingAlgorithm:1})}return this.sigv4aSigner}}const lo="required",C="type",T="conditions",D="fn",U="argv",te="ref",ye="assign",Z="url",Y="properties",Al="backend",yt="authSchemes",ot="disableDoubleEncoding",at="signingName",vt="signingRegion",Q="headers",fo="signingRegionSet",c0=6,u0=!1,pt=!0,ft="isSet",je="booleanEquals",ee="error",zn="aws.partition",me="stringEquals",Re="getAttr",Qe="name",Ye="substring",Ua="bucketSuffix",Cl="parseURL",La="{url#scheme}://{url#authority}/{uri_encoded_bucket}{url#path}",j="endpoint",H="tree",Rl="aws.isVirtualHostableS3Bucket",Nn="{url#scheme}://{Bucket}.{url#authority}{url#path}",St="not",Mn="{url#scheme}://{url#authority}{url#path}",_l="hardwareType",Tl="regionPrefix",$a="bucketAliasSuffix",qi="outpostId",ar="isValidHostLabel",ho="sigv4a",sn="s3-outposts",Br="s3",kl="{url#scheme}://{url#authority}{url#normalizedPath}{Bucket}",Bl="https://{Bucket}.s3-accelerate.{partitionResult#dnsSuffix}",Ha="https://{Bucket}.s3.{partitionResult#dnsSuffix}",Nl="aws.parseArn",Ml="bucketArn",Il="arnType",jn="",po="s3-object-lambda",Pl="accesspoint",go="accessPointName",qa="{url#scheme}://{accessPointName}-{bucketArn#accountId}.{url#authority}{url#path}",za="mrapPartition",ja="outpostType",Wa="arnPrefix",Fl="{url#scheme}://{url#authority}{url#normalizedPath}{uri_encoded_bucket}",Ka="https://s3.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",Va="https://s3.{partitionResult#dnsSuffix}",mr={[lo]:!1,[C]:"String"},yr={[lo]:!0,default:!1,[C]:"Boolean"},qr={[lo]:!1,[C]:"Boolean"},gt={[D]:je,[U]:[{[te]:"Accelerate"},!0]},Ee={[D]:je,[U]:[{[te]:"UseFIPS"},!0]},be={[D]:je,[U]:[{[te]:"UseDualStack"},!0]},ke={[D]:ft,[U]:[{[te]:"Endpoint"}]},Ol={[D]:zn,[U]:[{[te]:"Region"}],[ye]:"partitionResult"},Ga={[D]:me,[U]:[{[D]:Re,[U]:[{[te]:"partitionResult"},Qe]},"aws-cn"]},Wn={[D]:ft,[U]:[{[te]:"Bucket"}]},_e={[te]:"Bucket"},et={[D]:Cl,[U]:[{[te]:"Endpoint"}],[ye]:"url"},In={[D]:je,[U]:[{[D]:Re,[U]:[{[te]:"url"},"isIp"]},!0]},Dl={[te]:"url"},Ul={[D]:"uriEncode",[U]:[_e],[ye]:"uri_encoded_bucket"},At={[Al]:"S3Express",[yt]:[{[ot]:!0,[Qe]:"sigv4",[at]:"s3express",[vt]:"{Region}"}]},ne={},Ll={[D]:Rl,[U]:[_e,!1]},Is={[ee]:"S3Express bucket name is not a valid virtual hostable name.",[C]:ee},Kn={[Al]:"S3Express",[yt]:[{[ot]:!0,[Qe]:"sigv4-s3express",[at]:"s3express",[vt]:"{Region}"}]},Xa={[D]:ft,[U]:[{[te]:"UseS3ExpressControlEndpoint"}]},Za={[D]:je,[U]:[{[te]:"UseS3ExpressControlEndpoint"},!0]},se={[D]:St,[U]:[ke]},Ya={[ee]:"Unrecognized S3Express bucket name format.",[C]:ee},Qa={[D]:St,[U]:[Wn]},Ja={[te]:_l},ec={[T]:[se],[ee]:"Expected a endpoint to be specified but no endpoint was found",[C]:ee},xn={[yt]:[{[ot]:!0,[Qe]:ho,[at]:sn,[fo]:["*"]},{[ot]:!0,[Qe]:"sigv4",[at]:sn,[vt]:"{Region}"}]},Ps={[D]:je,[U]:[{[te]:"ForcePathStyle"},!1]},l0={[te]:"ForcePathStyle"},Te={[D]:je,[U]:[{[te]:"Accelerate"},!1]},Ue={[D]:me,[U]:[{[te]:"Region"},"aws-global"]},Le={[yt]:[{[ot]:!0,[Qe]:"sigv4",[at]:Br,[vt]:"us-east-1"}]},de={[D]:St,[U]:[Ue]},$e={[D]:je,[U]:[{[te]:"UseGlobalEndpoint"},!0]},tc={[Z]:"https://{Bucket}.s3-fips.dualstack.{Region}.{partitionResult#dnsSuffix}",[Y]:{[yt]:[{[ot]:!0,[Qe]:"sigv4",[at]:Br,[vt]:"{Region}"}]},[Q]:{}},Me={[yt]:[{[ot]:!0,[Qe]:"sigv4",[at]:Br,[vt]:"{Region}"}]},He={[D]:je,[U]:[{[te]:"UseGlobalEndpoint"},!1]},le={[D]:je,[U]:[{[te]:"UseDualStack"},!1]},rc={[Z]:"https://{Bucket}.s3-fips.{Region}.{partitionResult#dnsSuffix}",[Y]:Me,[Q]:{}},ae={[D]:je,[U]:[{[te]:"UseFIPS"},!1]},nc={[Z]:"https://{Bucket}.s3-accelerate.dualstack.{partitionResult#dnsSuffix}",[Y]:Me,[Q]:{}},sc={[Z]:"https://{Bucket}.s3.dualstack.{Region}.{partitionResult#dnsSuffix}",[Y]:Me,[Q]:{}},Fs={[D]:je,[U]:[{[D]:Re,[U]:[Dl,"isIp"]},!1]},Os={[Z]:kl,[Y]:Me,[Q]:{}},zi={[Z]:Nn,[Y]:Me,[Q]:{}},ic={[j]:zi,[C]:j},Ds={[Z]:Bl,[Y]:Me,[Q]:{}},oc={[Z]:"https://{Bucket}.s3.{Region}.{partitionResult#dnsSuffix}",[Y]:Me,[Q]:{}},vn={[ee]:"Invalid region: region was not a valid DNS name.",[C]:ee},nt={[te]:Ml},$l={[te]:Il},Us={[D]:Re,[U]:[nt,"service"]},mo={[te]:go},ac={[T]:[be],[ee]:"S3 Object Lambda does not support Dual-stack",[C]:ee},cc={[T]:[gt],[ee]:"S3 Object Lambda does not support S3 Accelerate",[C]:ee},uc={[T]:[{[D]:ft,[U]:[{[te]:"DisableAccessPoints"}]},{[D]:je,[U]:[{[te]:"DisableAccessPoints"},!0]}],[ee]:"Access points are not supported for this operation",[C]:ee},Ls={[T]:[{[D]:ft,[U]:[{[te]:"UseArnRegion"}]},{[D]:je,[U]:[{[te]:"UseArnRegion"},!1]},{[D]:St,[U]:[{[D]:me,[U]:[{[D]:Re,[U]:[nt,"region"]},"{Region}"]}]}],[ee]:"Invalid configuration: region from ARN `{bucketArn#region}` does not match client region `{Region}` and UseArnRegion is `false`",[C]:ee},Hl={[D]:Re,[U]:[{[te]:"bucketPartition"},Qe]},ql={[D]:Re,[U]:[nt,"accountId"]},$s={[yt]:[{[ot]:!0,[Qe]:"sigv4",[at]:po,[vt]:"{bucketArn#region}"}]},lc={[ee]:"Invalid ARN: The access point name may only contain a-z, A-Z, 0-9 and `-`. Found: `{accessPointName}`",[C]:ee},Hs={[ee]:"Invalid ARN: The account id may only contain a-z, A-Z, 0-9 and `-`. Found: `{bucketArn#accountId}`",[C]:ee},qs={[ee]:"Invalid region in ARN: `{bucketArn#region}` (invalid DNS name)",[C]:ee},zs={[ee]:"Client was configured for partition `{partitionResult#name}` but ARN (`{Bucket}`) has `{bucketPartition#name}`",[C]:ee},dc={[ee]:"Invalid ARN: The ARN may only contain a single resource component after `accesspoint`.",[C]:ee},fc={[ee]:"Invalid ARN: Expected a resource of the format `accesspoint:<accesspoint name>` but no name was provided",[C]:ee},zr={[yt]:[{[ot]:!0,[Qe]:"sigv4",[at]:Br,[vt]:"{bucketArn#region}"}]},hc={[yt]:[{[ot]:!0,[Qe]:ho,[at]:sn,[fo]:["*"]},{[ot]:!0,[Qe]:"sigv4",[at]:sn,[vt]:"{bucketArn#region}"}]},pc={[D]:Nl,[U]:[_e]},gc={[Z]:"https://s3-fips.dualstack.{Region}.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",[Y]:Me,[Q]:{}},mc={[Z]:"https://s3-fips.{Region}.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",[Y]:Me,[Q]:{}},yc={[Z]:"https://s3.dualstack.{Region}.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",[Y]:Me,[Q]:{}},js={[Z]:Fl,[Y]:Me,[Q]:{}},wc={[Z]:"https://s3.{Region}.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",[Y]:Me,[Q]:{}},bc={[te]:"UseObjectLambdaEndpoint"},Ws={[yt]:[{[ot]:!0,[Qe]:"sigv4",[at]:po,[vt]:"{Region}"}]},Ec={[Z]:"https://s3-fips.dualstack.{Region}.{partitionResult#dnsSuffix}",[Y]:Me,[Q]:{}},Sc={[Z]:"https://s3-fips.{Region}.{partitionResult#dnsSuffix}",[Y]:Me,[Q]:{}},xc={[Z]:"https://s3.dualstack.{Region}.{partitionResult#dnsSuffix}",[Y]:Me,[Q]:{}},Ks={[Z]:Mn,[Y]:Me,[Q]:{}},vc={[Z]:"https://s3.{Region}.{partitionResult#dnsSuffix}",[Y]:Me,[Q]:{}},Vs=[{[te]:"Region"}],d0=[{[te]:"Endpoint"}],f0=[_e],Gs=[be],An=[gt],Yt=[ke,et],Ac=[{[D]:ft,[U]:[{[te]:"DisableS3ExpressSessionAuth"}]},{[D]:je,[U]:[{[te]:"DisableS3ExpressSessionAuth"},!0]}],Cc=[In],Xs=[Ul],Zs=[Ll],wr=[Ee],Rc=[{[D]:Ye,[U]:[_e,6,14,!0],[ye]:"s3expressAvailabilityZoneId"},{[D]:Ye,[U]:[_e,14,16,!0],[ye]:"s3expressAvailabilityZoneDelim"},{[D]:me,[U]:[{[te]:"s3expressAvailabilityZoneDelim"},"--"]}],jr=[{[T]:[Ee],[j]:{[Z]:"https://{Bucket}.s3express-fips-{s3expressAvailabilityZoneId}.{Region}.amazonaws.com",[Y]:At,[Q]:{}},[C]:j},{[j]:{[Z]:"https://{Bucket}.s3express-{s3expressAvailabilityZoneId}.{Region}.amazonaws.com",[Y]:At,[Q]:{}},[C]:j}],_c=[{[D]:Ye,[U]:[_e,6,15,!0],[ye]:"s3expressAvailabilityZoneId"},{[D]:Ye,[U]:[_e,15,17,!0],[ye]:"s3expressAvailabilityZoneDelim"},{[D]:me,[U]:[{[te]:"s3expressAvailabilityZoneDelim"},"--"]}],Tc=[{[D]:Ye,[U]:[_e,6,19,!0],[ye]:"s3expressAvailabilityZoneId"},{[D]:Ye,[U]:[_e,19,21,!0],[ye]:"s3expressAvailabilityZoneDelim"},{[D]:me,[U]:[{[te]:"s3expressAvailabilityZoneDelim"},"--"]}],kc=[{[D]:Ye,[U]:[_e,6,20,!0],[ye]:"s3expressAvailabilityZoneId"},{[D]:Ye,[U]:[_e,20,22,!0],[ye]:"s3expressAvailabilityZoneDelim"},{[D]:me,[U]:[{[te]:"s3expressAvailabilityZoneDelim"},"--"]}],Bc=[{[D]:Ye,[U]:[_e,6,26,!0],[ye]:"s3expressAvailabilityZoneId"},{[D]:Ye,[U]:[_e,26,28,!0],[ye]:"s3expressAvailabilityZoneDelim"},{[D]:me,[U]:[{[te]:"s3expressAvailabilityZoneDelim"},"--"]}],Wr=[{[T]:[Ee],[j]:{[Z]:"https://{Bucket}.s3express-fips-{s3expressAvailabilityZoneId}.{Region}.amazonaws.com",[Y]:Kn,[Q]:{}},[C]:j},{[j]:{[Z]:"https://{Bucket}.s3express-{s3expressAvailabilityZoneId}.{Region}.amazonaws.com",[Y]:Kn,[Q]:{}},[C]:j}],h0=[Wn],Nc=[{[D]:ar,[U]:[{[te]:qi},!1]}],Mc=[{[D]:me,[U]:[{[te]:Tl},"beta"]}],p0=["*"],Pt=[Ol],Ic=[{[D]:ar,[U]:[{[te]:"Region"},!1]}],Ft=[{[D]:me,[U]:[{[te]:"Region"},"us-east-1"]}],Ys=[{[D]:me,[U]:[$l,Pl]}],Pc=[{[D]:Re,[U]:[nt,"resourceId[1]"],[ye]:go},{[D]:St,[U]:[{[D]:me,[U]:[mo,jn]}]}],g0=[nt,"resourceId[1]"],Qs=[{[D]:St,[U]:[{[D]:me,[U]:[{[D]:Re,[U]:[nt,"region"]},jn]}]}],Fc=[{[D]:St,[U]:[{[D]:ft,[U]:[{[D]:Re,[U]:[nt,"resourceId[2]"]}]}]}],m0=[nt,"resourceId[2]"],Js=[{[D]:zn,[U]:[{[D]:Re,[U]:[nt,"region"]}],[ye]:"bucketPartition"}],Oc=[{[D]:me,[U]:[Hl,{[D]:Re,[U]:[{[te]:"partitionResult"},Qe]}]}],ei=[{[D]:ar,[U]:[{[D]:Re,[U]:[nt,"region"]},!0]}],ti=[{[D]:ar,[U]:[ql,!1]}],Dc=[{[D]:ar,[U]:[mo,!1]}],Uc=[{[D]:ar,[U]:[{[te]:"Region"},!0]}],y0={version:"1.0",parameters:{Bucket:mr,Region:mr,UseFIPS:yr,UseDualStack:yr,Endpoint:mr,ForcePathStyle:yr,Accelerate:yr,UseGlobalEndpoint:yr,UseObjectLambdaEndpoint:qr,Key:mr,Prefix:mr,CopySource:mr,DisableAccessPoints:qr,DisableMultiRegionAccessPoints:yr,UseArnRegion:qr,UseS3ExpressControlEndpoint:qr,DisableS3ExpressSessionAuth:qr},rules:[{[T]:[{[D]:ft,[U]:Vs}],rules:[{[T]:[gt,Ee],error:"Accelerate cannot be used with FIPS",[C]:ee},{[T]:[be,ke],error:"Cannot set dual-stack in combination with a custom endpoint.",[C]:ee},{[T]:[ke,Ee],error:"A custom endpoint cannot be combined with FIPS",[C]:ee},{[T]:[ke,gt],error:"A custom endpoint cannot be combined with S3 Accelerate",[C]:ee},{[T]:[Ee,Ol,Ga],error:"Partition does not support FIPS",[C]:ee},{[T]:[Wn,{[D]:Ye,[U]:[_e,0,c0,pt],[ye]:Ua},{[D]:me,[U]:[{[te]:Ua},"--x-s3"]}],rules:[{[T]:Gs,error:"S3Express does not support Dual-stack.",[C]:ee},{[T]:An,error:"S3Express does not support S3 Accelerate.",[C]:ee},{[T]:Yt,rules:[{[T]:Ac,rules:[{[T]:Cc,rules:[{[T]:Xs,rules:[{endpoint:{[Z]:La,[Y]:At,[Q]:ne},[C]:j}],[C]:H}],[C]:H},{[T]:Zs,rules:[{endpoint:{[Z]:Nn,[Y]:At,[Q]:ne},[C]:j}],[C]:H},Is],[C]:H},{[T]:Cc,rules:[{[T]:Xs,rules:[{endpoint:{[Z]:La,[Y]:Kn,[Q]:ne},[C]:j}],[C]:H}],[C]:H},{[T]:Zs,rules:[{endpoint:{[Z]:Nn,[Y]:Kn,[Q]:ne},[C]:j}],[C]:H},Is],[C]:H},{[T]:[Xa,Za],rules:[{[T]:[Ul,se],rules:[{[T]:wr,endpoint:{[Z]:"https://s3express-control-fips.{Region}.amazonaws.com/{uri_encoded_bucket}",[Y]:At,[Q]:ne},[C]:j},{endpoint:{[Z]:"https://s3express-control.{Region}.amazonaws.com/{uri_encoded_bucket}",[Y]:At,[Q]:ne},[C]:j}],[C]:H}],[C]:H},{[T]:Zs,rules:[{[T]:Ac,rules:[{[T]:Rc,rules:jr,[C]:H},{[T]:_c,rules:jr,[C]:H},{[T]:Tc,rules:jr,[C]:H},{[T]:kc,rules:jr,[C]:H},{[T]:Bc,rules:jr,[C]:H},Ya],[C]:H},{[T]:Rc,rules:Wr,[C]:H},{[T]:_c,rules:Wr,[C]:H},{[T]:Tc,rules:Wr,[C]:H},{[T]:kc,rules:Wr,[C]:H},{[T]:Bc,rules:Wr,[C]:H},Ya],[C]:H},Is],[C]:H},{[T]:[Qa,Xa,Za],rules:[{[T]:Yt,endpoint:{[Z]:Mn,[Y]:At,[Q]:ne},[C]:j},{[T]:wr,endpoint:{[Z]:"https://s3express-control-fips.{Region}.amazonaws.com",[Y]:At,[Q]:ne},[C]:j},{endpoint:{[Z]:"https://s3express-control.{Region}.amazonaws.com",[Y]:At,[Q]:ne},[C]:j}],[C]:H},{[T]:[Wn,{[D]:Ye,[U]:[_e,49,50,pt],[ye]:_l},{[D]:Ye,[U]:[_e,8,12,pt],[ye]:Tl},{[D]:Ye,[U]:[_e,0,7,pt],[ye]:$a},{[D]:Ye,[U]:[_e,32,49,pt],[ye]:qi},{[D]:zn,[U]:Vs,[ye]:"regionPartition"},{[D]:me,[U]:[{[te]:$a},"--op-s3"]}],rules:[{[T]:Nc,rules:[{[T]:[{[D]:me,[U]:[Ja,"e"]}],rules:[{[T]:Mc,rules:[ec,{[T]:Yt,endpoint:{[Z]:"https://{Bucket}.ec2.{url#authority}",[Y]:xn,[Q]:ne},[C]:j}],[C]:H},{endpoint:{[Z]:"https://{Bucket}.ec2.s3-outposts.{Region}.{regionPartition#dnsSuffix}",[Y]:xn,[Q]:ne},[C]:j}],[C]:H},{[T]:[{[D]:me,[U]:[Ja,"o"]}],rules:[{[T]:Mc,rules:[ec,{[T]:Yt,endpoint:{[Z]:"https://{Bucket}.op-{outpostId}.{url#authority}",[Y]:xn,[Q]:ne},[C]:j}],[C]:H},{endpoint:{[Z]:"https://{Bucket}.op-{outpostId}.s3-outposts.{Region}.{regionPartition#dnsSuffix}",[Y]:xn,[Q]:ne},[C]:j}],[C]:H},{error:'Unrecognized hardware type: "Expected hardware type o or e but got {hardwareType}"',[C]:ee}],[C]:H},{error:"Invalid ARN: The outpost Id must only contain a-z, A-Z, 0-9 and `-`.",[C]:ee}],[C]:H},{[T]:h0,rules:[{[T]:[ke,{[D]:St,[U]:[{[D]:ft,[U]:[{[D]:Cl,[U]:d0}]}]}],error:"Custom endpoint `{Endpoint}` was not a valid URI",[C]:ee},{[T]:[Ps,Ll],rules:[{[T]:Pt,rules:[{[T]:Ic,rules:[{[T]:[gt,Ga],error:"S3 Accelerate cannot be used in this region",[C]:ee},{[T]:[be,Ee,Te,se,Ue],endpoint:{[Z]:"https://{Bucket}.s3-fips.dualstack.us-east-1.{partitionResult#dnsSuffix}",[Y]:Le,[Q]:ne},[C]:j},{[T]:[be,Ee,Te,se,de,$e],rules:[{endpoint:tc,[C]:j}],[C]:H},{[T]:[be,Ee,Te,se,de,He],endpoint:tc,[C]:j},{[T]:[le,Ee,Te,se,Ue],endpoint:{[Z]:"https://{Bucket}.s3-fips.us-east-1.{partitionResult#dnsSuffix}",[Y]:Le,[Q]:ne},[C]:j},{[T]:[le,Ee,Te,se,de,$e],rules:[{endpoint:rc,[C]:j}],[C]:H},{[T]:[le,Ee,Te,se,de,He],endpoint:rc,[C]:j},{[T]:[be,ae,gt,se,Ue],endpoint:{[Z]:"https://{Bucket}.s3-accelerate.dualstack.us-east-1.{partitionResult#dnsSuffix}",[Y]:Le,[Q]:ne},[C]:j},{[T]:[be,ae,gt,se,de,$e],rules:[{endpoint:nc,[C]:j}],[C]:H},{[T]:[be,ae,gt,se,de,He],endpoint:nc,[C]:j},{[T]:[be,ae,Te,se,Ue],endpoint:{[Z]:"https://{Bucket}.s3.dualstack.us-east-1.{partitionResult#dnsSuffix}",[Y]:Le,[Q]:ne},[C]:j},{[T]:[be,ae,Te,se,de,$e],rules:[{endpoint:sc,[C]:j}],[C]:H},{[T]:[be,ae,Te,se,de,He],endpoint:sc,[C]:j},{[T]:[le,ae,Te,ke,et,In,Ue],endpoint:{[Z]:kl,[Y]:Le,[Q]:ne},[C]:j},{[T]:[le,ae,Te,ke,et,Fs,Ue],endpoint:{[Z]:Nn,[Y]:Le,[Q]:ne},[C]:j},{[T]:[le,ae,Te,ke,et,In,de,$e],rules:[{[T]:Ft,endpoint:Os,[C]:j},{endpoint:Os,[C]:j}],[C]:H},{[T]:[le,ae,Te,ke,et,Fs,de,$e],rules:[{[T]:Ft,endpoint:zi,[C]:j},ic],[C]:H},{[T]:[le,ae,Te,ke,et,In,de,He],endpoint:Os,[C]:j},{[T]:[le,ae,Te,ke,et,Fs,de,He],endpoint:zi,[C]:j},{[T]:[le,ae,gt,se,Ue],endpoint:{[Z]:Bl,[Y]:Le,[Q]:ne},[C]:j},{[T]:[le,ae,gt,se,de,$e],rules:[{[T]:Ft,endpoint:Ds,[C]:j},{endpoint:Ds,[C]:j}],[C]:H},{[T]:[le,ae,gt,se,de,He],endpoint:Ds,[C]:j},{[T]:[le,ae,Te,se,Ue],endpoint:{[Z]:Ha,[Y]:Le,[Q]:ne},[C]:j},{[T]:[le,ae,Te,se,de,$e],rules:[{[T]:Ft,endpoint:{[Z]:Ha,[Y]:Me,[Q]:ne},[C]:j},{endpoint:oc,[C]:j}],[C]:H},{[T]:[le,ae,Te,se,de,He],endpoint:oc,[C]:j}],[C]:H},vn],[C]:H}],[C]:H},{[T]:[ke,et,{[D]:me,[U]:[{[D]:Re,[U]:[Dl,"scheme"]},"http"]},{[D]:Rl,[U]:[_e,pt]},Ps,ae,le,Te],rules:[{[T]:Pt,rules:[{[T]:Ic,rules:[ic],[C]:H},vn],[C]:H}],[C]:H},{[T]:[Ps,{[D]:Nl,[U]:f0,[ye]:Ml}],rules:[{[T]:[{[D]:Re,[U]:[nt,"resourceId[0]"],[ye]:Il},{[D]:St,[U]:[{[D]:me,[U]:[$l,jn]}]}],rules:[{[T]:[{[D]:me,[U]:[Us,po]}],rules:[{[T]:Ys,rules:[{[T]:Pc,rules:[ac,cc,{[T]:Qs,rules:[uc,{[T]:Fc,rules:[Ls,{[T]:Js,rules:[{[T]:Pt,rules:[{[T]:Oc,rules:[{[T]:ei,rules:[{[T]:[{[D]:me,[U]:[ql,jn]}],error:"Invalid ARN: Missing account id",[C]:ee},{[T]:ti,rules:[{[T]:Dc,rules:[{[T]:Yt,endpoint:{[Z]:qa,[Y]:$s,[Q]:ne},[C]:j},{[T]:wr,endpoint:{[Z]:"https://{accessPointName}-{bucketArn#accountId}.s3-object-lambda-fips.{bucketArn#region}.{bucketPartition#dnsSuffix}",[Y]:$s,[Q]:ne},[C]:j},{endpoint:{[Z]:"https://{accessPointName}-{bucketArn#accountId}.s3-object-lambda.{bucketArn#region}.{bucketPartition#dnsSuffix}",[Y]:$s,[Q]:ne},[C]:j}],[C]:H},lc],[C]:H},Hs],[C]:H},qs],[C]:H},zs],[C]:H}],[C]:H}],[C]:H},dc],[C]:H},{error:"Invalid ARN: bucket ARN is missing a region",[C]:ee}],[C]:H},fc],[C]:H},{error:"Invalid ARN: Object Lambda ARNs only support `accesspoint` arn types, but found: `{arnType}`",[C]:ee}],[C]:H},{[T]:Ys,rules:[{[T]:Pc,rules:[{[T]:Qs,rules:[{[T]:Ys,rules:[{[T]:Qs,rules:[uc,{[T]:Fc,rules:[Ls,{[T]:Js,rules:[{[T]:Pt,rules:[{[T]:[{[D]:me,[U]:[Hl,"{partitionResult#name}"]}],rules:[{[T]:ei,rules:[{[T]:[{[D]:me,[U]:[Us,Br]}],rules:[{[T]:ti,rules:[{[T]:Dc,rules:[{[T]:An,error:"Access Points do not support S3 Accelerate",[C]:ee},{[T]:[Ee,be],endpoint:{[Z]:"https://{accessPointName}-{bucketArn#accountId}.s3-accesspoint-fips.dualstack.{bucketArn#region}.{bucketPartition#dnsSuffix}",[Y]:zr,[Q]:ne},[C]:j},{[T]:[Ee,le],endpoint:{[Z]:"https://{accessPointName}-{bucketArn#accountId}.s3-accesspoint-fips.{bucketArn#region}.{bucketPartition#dnsSuffix}",[Y]:zr,[Q]:ne},[C]:j},{[T]:[ae,be],endpoint:{[Z]:"https://{accessPointName}-{bucketArn#accountId}.s3-accesspoint.dualstack.{bucketArn#region}.{bucketPartition#dnsSuffix}",[Y]:zr,[Q]:ne},[C]:j},{[T]:[ae,le,ke,et],endpoint:{[Z]:qa,[Y]:zr,[Q]:ne},[C]:j},{[T]:[ae,le],endpoint:{[Z]:"https://{accessPointName}-{bucketArn#accountId}.s3-accesspoint.{bucketArn#region}.{bucketPartition#dnsSuffix}",[Y]:zr,[Q]:ne},[C]:j}],[C]:H},lc],[C]:H},Hs],[C]:H},{error:"Invalid ARN: The ARN was not for the S3 service, found: {bucketArn#service}",[C]:ee}],[C]:H},qs],[C]:H},zs],[C]:H}],[C]:H}],[C]:H},dc],[C]:H}],[C]:H}],[C]:H},{[T]:[{[D]:ar,[U]:[mo,pt]}],rules:[{[T]:Gs,error:"S3 MRAP does not support dual-stack",[C]:ee},{[T]:wr,error:"S3 MRAP does not support FIPS",[C]:ee},{[T]:An,error:"S3 MRAP does not support S3 Accelerate",[C]:ee},{[T]:[{[D]:je,[U]:[{[te]:"DisableMultiRegionAccessPoints"},pt]}],error:"Invalid configuration: Multi-Region Access Point ARNs are disabled.",[C]:ee},{[T]:[{[D]:zn,[U]:Vs,[ye]:za}],rules:[{[T]:[{[D]:me,[U]:[{[D]:Re,[U]:[{[te]:za},Qe]},{[D]:Re,[U]:[nt,"partition"]}]}],rules:[{endpoint:{[Z]:"https://{accessPointName}.accesspoint.s3-global.{mrapPartition#dnsSuffix}",[Y]:{[yt]:[{[ot]:pt,name:ho,[at]:Br,[fo]:p0}]},[Q]:ne},[C]:j}],[C]:H},{error:"Client was configured for partition `{mrapPartition#name}` but bucket referred to partition `{bucketArn#partition}`",[C]:ee}],[C]:H}],[C]:H},{error:"Invalid Access Point Name",[C]:ee}],[C]:H},fc],[C]:H},{[T]:[{[D]:me,[U]:[Us,sn]}],rules:[{[T]:Gs,error:"S3 Outposts does not support Dual-stack",[C]:ee},{[T]:wr,error:"S3 Outposts does not support FIPS",[C]:ee},{[T]:An,error:"S3 Outposts does not support S3 Accelerate",[C]:ee},{[T]:[{[D]:ft,[U]:[{[D]:Re,[U]:[nt,"resourceId[4]"]}]}],error:"Invalid Arn: Outpost Access Point ARN contains sub resources",[C]:ee},{[T]:[{[D]:Re,[U]:g0,[ye]:qi}],rules:[{[T]:Nc,rules:[Ls,{[T]:Js,rules:[{[T]:Pt,rules:[{[T]:Oc,rules:[{[T]:ei,rules:[{[T]:ti,rules:[{[T]:[{[D]:Re,[U]:m0,[ye]:ja}],rules:[{[T]:[{[D]:Re,[U]:[nt,"resourceId[3]"],[ye]:go}],rules:[{[T]:[{[D]:me,[U]:[{[te]:ja},Pl]}],rules:[{[T]:Yt,endpoint:{[Z]:"https://{accessPointName}-{bucketArn#accountId}.{outpostId}.{url#authority}",[Y]:hc,[Q]:ne},[C]:j},{endpoint:{[Z]:"https://{accessPointName}-{bucketArn#accountId}.{outpostId}.s3-outposts.{bucketArn#region}.{bucketPartition#dnsSuffix}",[Y]:hc,[Q]:ne},[C]:j}],[C]:H},{error:"Expected an outpost type `accesspoint`, found {outpostType}",[C]:ee}],[C]:H},{error:"Invalid ARN: expected an access point name",[C]:ee}],[C]:H},{error:"Invalid ARN: Expected a 4-component resource",[C]:ee}],[C]:H},Hs],[C]:H},qs],[C]:H},zs],[C]:H}],[C]:H}],[C]:H},{error:"Invalid ARN: The outpost Id may only contain a-z, A-Z, 0-9 and `-`. Found: `{outpostId}`",[C]:ee}],[C]:H},{error:"Invalid ARN: The Outpost Id was not set",[C]:ee}],[C]:H},{error:"Invalid ARN: Unrecognized format: {Bucket} (type: {arnType})",[C]:ee}],[C]:H},{error:"Invalid ARN: No ARN type specified",[C]:ee}],[C]:H},{[T]:[{[D]:Ye,[U]:[_e,0,4,u0],[ye]:Wa},{[D]:me,[U]:[{[te]:Wa},"arn:"]},{[D]:St,[U]:[{[D]:ft,[U]:[pc]}]}],error:"Invalid ARN: `{Bucket}` was not a valid ARN",[C]:ee},{[T]:[{[D]:je,[U]:[l0,pt]},pc],error:"Path-style addressing cannot be used with ARN buckets",[C]:ee},{[T]:Xs,rules:[{[T]:Pt,rules:[{[T]:[Te],rules:[{[T]:[be,se,Ee,Ue],endpoint:{[Z]:"https://s3-fips.dualstack.us-east-1.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",[Y]:Le,[Q]:ne},[C]:j},{[T]:[be,se,Ee,de,$e],rules:[{endpoint:gc,[C]:j}],[C]:H},{[T]:[be,se,Ee,de,He],endpoint:gc,[C]:j},{[T]:[le,se,Ee,Ue],endpoint:{[Z]:"https://s3-fips.us-east-1.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",[Y]:Le,[Q]:ne},[C]:j},{[T]:[le,se,Ee,de,$e],rules:[{endpoint:mc,[C]:j}],[C]:H},{[T]:[le,se,Ee,de,He],endpoint:mc,[C]:j},{[T]:[be,se,ae,Ue],endpoint:{[Z]:"https://s3.dualstack.us-east-1.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",[Y]:Le,[Q]:ne},[C]:j},{[T]:[be,se,ae,de,$e],rules:[{endpoint:yc,[C]:j}],[C]:H},{[T]:[be,se,ae,de,He],endpoint:yc,[C]:j},{[T]:[le,ke,et,ae,Ue],endpoint:{[Z]:Fl,[Y]:Le,[Q]:ne},[C]:j},{[T]:[le,ke,et,ae,de,$e],rules:[{[T]:Ft,endpoint:js,[C]:j},{endpoint:js,[C]:j}],[C]:H},{[T]:[le,ke,et,ae,de,He],endpoint:js,[C]:j},{[T]:[le,se,ae,Ue],endpoint:{[Z]:Ka,[Y]:Le,[Q]:ne},[C]:j},{[T]:[le,se,ae,de,$e],rules:[{[T]:Ft,endpoint:{[Z]:Ka,[Y]:Me,[Q]:ne},[C]:j},{endpoint:wc,[C]:j}],[C]:H},{[T]:[le,se,ae,de,He],endpoint:wc,[C]:j}],[C]:H},{error:"Path-style addressing cannot be used with S3 Accelerate",[C]:ee}],[C]:H}],[C]:H}],[C]:H},{[T]:[{[D]:ft,[U]:[bc]},{[D]:je,[U]:[bc,pt]}],rules:[{[T]:Pt,rules:[{[T]:Uc,rules:[ac,cc,{[T]:Yt,endpoint:{[Z]:Mn,[Y]:Ws,[Q]:ne},[C]:j},{[T]:wr,endpoint:{[Z]:"https://s3-object-lambda-fips.{Region}.{partitionResult#dnsSuffix}",[Y]:Ws,[Q]:ne},[C]:j},{endpoint:{[Z]:"https://s3-object-lambda.{Region}.{partitionResult#dnsSuffix}",[Y]:Ws,[Q]:ne},[C]:j}],[C]:H},vn],[C]:H}],[C]:H},{[T]:[Qa],rules:[{[T]:Pt,rules:[{[T]:Uc,rules:[{[T]:[Ee,be,se,Ue],endpoint:{[Z]:"https://s3-fips.dualstack.us-east-1.{partitionResult#dnsSuffix}",[Y]:Le,[Q]:ne},[C]:j},{[T]:[Ee,be,se,de,$e],rules:[{endpoint:Ec,[C]:j}],[C]:H},{[T]:[Ee,be,se,de,He],endpoint:Ec,[C]:j},{[T]:[Ee,le,se,Ue],endpoint:{[Z]:"https://s3-fips.us-east-1.{partitionResult#dnsSuffix}",[Y]:Le,[Q]:ne},[C]:j},{[T]:[Ee,le,se,de,$e],rules:[{endpoint:Sc,[C]:j}],[C]:H},{[T]:[Ee,le,se,de,He],endpoint:Sc,[C]:j},{[T]:[ae,be,se,Ue],endpoint:{[Z]:"https://s3.dualstack.us-east-1.{partitionResult#dnsSuffix}",[Y]:Le,[Q]:ne},[C]:j},{[T]:[ae,be,se,de,$e],rules:[{endpoint:xc,[C]:j}],[C]:H},{[T]:[ae,be,se,de,He],endpoint:xc,[C]:j},{[T]:[ae,le,ke,et,Ue],endpoint:{[Z]:Mn,[Y]:Le,[Q]:ne},[C]:j},{[T]:[ae,le,ke,et,de,$e],rules:[{[T]:Ft,endpoint:Ks,[C]:j},{endpoint:Ks,[C]:j}],[C]:H},{[T]:[ae,le,ke,et,de,He],endpoint:Ks,[C]:j},{[T]:[ae,le,se,Ue],endpoint:{[Z]:Va,[Y]:Le,[Q]:ne},[C]:j},{[T]:[ae,le,se,de,$e],rules:[{[T]:Ft,endpoint:{[Z]:Va,[Y]:Me,[Q]:ne},[C]:j},{endpoint:vc,[C]:j}],[C]:H},{[T]:[ae,le,se,de,He],endpoint:vc,[C]:j}],[C]:H},vn],[C]:H}],[C]:H}],[C]:H},{error:"A region must be set when sending requests to S3.",[C]:ee}]},w0=y0,b0=new Bg({size:50,params:["Accelerate","Bucket","DisableAccessPoints","DisableMultiRegionAccessPoints","DisableS3ExpressSessionAuth","Endpoint","ForcePathStyle","Region","UseArnRegion","UseDualStack","UseFIPS","UseGlobalEndpoint","UseObjectLambdaEndpoint","UseS3ExpressControlEndpoint"]}),zl=(e,t={})=>b0.get(e,()=>Xg(w0,{endpointParams:e,logger:t.logger}));$n.aws=ml;const E0=e=>async(t,r,n)=>{var a,c,u;if(!n)throw new Error("Could not find `input` for `defaultEndpointRuleSetHttpAuthSchemeParametersProvider`");const s=await e(t,r,n),i=(u=(c=(a=Mr(r))==null?void 0:a.commandInstance)==null?void 0:c.constructor)==null?void 0:u.getEndpointParameterInstructions;if(!i)throw new Error(`getEndpointParameterInstructions() is not defined on \`${r.commandName}\``);const o=await El(n,{getEndpointParameterInstructions:i},t);return Object.assign(s,o)},S0=async(e,t,r)=>({operation:Mr(t).operation,region:await Et(e.region)()||(()=>{throw new Error("expected `region` to be configured for `aws.auth#sigv4`")})()}),x0=E0(S0);function jl(e){return{schemeId:"aws.auth#sigv4",signingProperties:{name:"s3",region:e.region},propertiesExtractor:(t,r)=>({signingProperties:{config:t,context:r}})}}function Wl(e){return{schemeId:"aws.auth#sigv4a",signingProperties:{name:"s3",region:e.region},propertiesExtractor:(t,r)=>({signingProperties:{config:t,context:r}})}}const v0=(e,t,r)=>s=>{var c;const o=(c=e(s).properties)==null?void 0:c.authSchemes;if(!o)return t(s);const a=[];for(const u of o){const{name:f,properties:p={},...g}=u,w=f.toLowerCase();f!==w&&console.warn(`HttpAuthScheme has been normalized with lowercasing: \`${f}\` to \`${w}\``);let R;if(w==="sigv4a"){if(R="aws.auth#sigv4a",o.find(E=>{const B=E.name.toLowerCase();return B!=="sigv4a"&&B.startsWith("sigv4")}))continue}else if(w.startsWith("sigv4"))R="aws.auth#sigv4";else throw new Error(`Unknown HttpAuthScheme found in \`@smithy.rules#endpointRuleSet\`: \`${w}\``);const k=r[R];if(!k)throw new Error(`Could not find HttpAuthOption create function for \`${R}\``);const _=k(s);_.schemeId=R,_.signingProperties={..._.signingProperties||{},...g,...p},a.push(_)}return a},A0=e=>{const t=[];switch(e.operation){default:t.push(jl(e)),t.push(Wl(e))}return t},C0=v0(zl,A0,{"aws.auth#sigv4":jl,"aws.auth#sigv4a":Wl}),R0=e=>{const t=yh(e);return{...Kf(t)}},_0=e=>({...e,useFipsEndpoint:e.useFipsEndpoint??!1,useDualstackEndpoint:e.useDualstackEndpoint??!1,forcePathStyle:e.forcePathStyle??!1,useAccelerateEndpoint:e.useAccelerateEndpoint??!1,useGlobalEndpoint:e.useGlobalEndpoint??!1,disableMultiregionAccessPoints:e.disableMultiregionAccessPoints??!1,defaultSigningName:"s3"}),cr={ForcePathStyle:{type:"clientContextParams",name:"forcePathStyle"},UseArnRegion:{type:"clientContextParams",name:"useArnRegion"},DisableMultiRegionAccessPoints:{type:"clientContextParams",name:"disableMultiregionAccessPoints"},Accelerate:{type:"clientContextParams",name:"useAccelerateEndpoint"},DisableS3ExpressSessionAuth:{type:"clientContextParams",name:"disableS3ExpressSessionAuth"},UseGlobalEndpoint:{type:"builtInParams",name:"useGlobalEndpoint"},UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}};class Je extends Er{constructor(t){super(t),Object.setPrototypeOf(this,Je.prototype)}}class yo extends Je{constructor(r){super({name:"NoSuchUpload",$fault:"client",...r});X(this,"name","NoSuchUpload");X(this,"$fault","client");Object.setPrototypeOf(this,yo.prototype)}}const T0={CRC32:"CRC32",CRC32C:"CRC32C",CRC64NVME:"CRC64NVME",SHA1:"SHA1",SHA256:"SHA256"};class wo extends Je{constructor(r){super({name:"ObjectNotInActiveTierError",$fault:"client",...r});X(this,"name","ObjectNotInActiveTierError");X(this,"$fault","client");Object.setPrototypeOf(this,wo.prototype)}}class bo extends Je{constructor(r){super({name:"BucketAlreadyExists",$fault:"client",...r});X(this,"name","BucketAlreadyExists");X(this,"$fault","client");Object.setPrototypeOf(this,bo.prototype)}}class Eo extends Je{constructor(r){super({name:"BucketAlreadyOwnedByYou",$fault:"client",...r});X(this,"name","BucketAlreadyOwnedByYou");X(this,"$fault","client");Object.setPrototypeOf(this,Eo.prototype)}}class So extends Je{constructor(r){super({name:"NoSuchBucket",$fault:"client",...r});X(this,"name","NoSuchBucket");X(this,"$fault","client");Object.setPrototypeOf(this,So.prototype)}}var Lc;(function(e){e.visit=(t,r)=>t.Prefix!==void 0?r.Prefix(t.Prefix):t.Tag!==void 0?r.Tag(t.Tag):t.And!==void 0?r.And(t.And):r._(t.$unknown[0],t.$unknown[1])})(Lc||(Lc={}));var $c;(function(e){e.visit=(t,r)=>t.Prefix!==void 0?r.Prefix(t.Prefix):t.Tag!==void 0?r.Tag(t.Tag):t.AccessPointArn!==void 0?r.AccessPointArn(t.AccessPointArn):t.And!==void 0?r.And(t.And):r._(t.$unknown[0],t.$unknown[1])})($c||($c={}));class xo extends Je{constructor(r){super({name:"InvalidObjectState",$fault:"client",...r});X(this,"name","InvalidObjectState");X(this,"$fault","client");X(this,"StorageClass");X(this,"AccessTier");Object.setPrototypeOf(this,xo.prototype),this.StorageClass=r.StorageClass,this.AccessTier=r.AccessTier}}class vo extends Je{constructor(r){super({name:"NoSuchKey",$fault:"client",...r});X(this,"name","NoSuchKey");X(this,"$fault","client");Object.setPrototypeOf(this,vo.prototype)}}class Ao extends Je{constructor(r){super({name:"NotFound",$fault:"client",...r});X(this,"name","NotFound");X(this,"$fault","client");Object.setPrototypeOf(this,Ao.prototype)}}const k0=e=>({...e,...e.SSEKMSKeyId&&{SSEKMSKeyId:Ne}}),B0=e=>({...e,...e.SSECustomerKey&&{SSECustomerKey:Ne}}),N0=e=>({...e,...e.SSEKMSKeyId&&{SSEKMSKeyId:Ne},...e.SSEKMSEncryptionContext&&{SSEKMSEncryptionContext:Ne}}),M0=e=>({...e,...e.SSECustomerKey&&{SSECustomerKey:Ne},...e.SSEKMSKeyId&&{SSEKMSKeyId:Ne},...e.SSEKMSEncryptionContext&&{SSEKMSEncryptionContext:Ne}}),I0=e=>({...e,...e.SecretAccessKey&&{SecretAccessKey:Ne},...e.SessionToken&&{SessionToken:Ne}}),P0=e=>({...e,...e.SSEKMSKeyId&&{SSEKMSKeyId:Ne},...e.SSEKMSEncryptionContext&&{SSEKMSEncryptionContext:Ne},...e.Credentials&&{Credentials:I0(e.Credentials)}}),F0=e=>({...e,...e.SSEKMSKeyId&&{SSEKMSKeyId:Ne},...e.SSEKMSEncryptionContext&&{SSEKMSEncryptionContext:Ne}});function O0(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}function D0(e){return e.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\r/g,"&#x0D;").replace(/\n/g,"&#x0A;").replace(/\u0085/g,"&#x85;").replace(/\u2028/,"&#x2028;")}class U0{constructor(t){X(this,"value");this.value=t}toString(){return D0(""+this.value)}}class xt{constructor(t,r=[]){X(this,"name");X(this,"children");X(this,"attributes",{});this.name=t,this.children=r}static of(t,r,n){const s=new xt(t);return r!==void 0&&s.addChildNode(new U0(r)),n!==void 0&&s.withName(n),s}withName(t){return this.name=t,this}addAttribute(t,r){return this.attributes[t]=r,this}addChildNode(t){return this.children.push(t),this}removeAttribute(t){return delete this.attributes[t],this}n(t){return this.name=t,this}c(t){return this.children.push(t),this}a(t,r){return r!=null&&(this.attributes[t]=r),this}cc(t,r,n=r){if(t[r]!=null){const s=xt.of(r,t[r]).withName(n);this.c(s)}}l(t,r,n,s){t[r]!=null&&s().map(o=>{o.withName(n),this.c(o)})}lc(t,r,n,s){if(t[r]!=null){const i=s(),o=new xt(n);i.map(a=>{o.c(a)}),this.c(o)}}toString(){const t=!!this.children.length;let r=`<${this.name}`;const n=this.attributes;for(const s of Object.keys(n)){const i=n[s];i!=null&&(r+=` ${s}="${O0(""+i)}"`)}return r+=t?`>${this.children.map(s=>s.toString()).join("")}</${this.name}>`:"/>"}}class Co extends Je{constructor(r){super({name:"EncryptionTypeMismatch",$fault:"client",...r});X(this,"name","EncryptionTypeMismatch");X(this,"$fault","client");Object.setPrototypeOf(this,Co.prototype)}}class Ro extends Je{constructor(r){super({name:"InvalidRequest",$fault:"client",...r});X(this,"name","InvalidRequest");X(this,"$fault","client");Object.setPrototypeOf(this,Ro.prototype)}}class _o extends Je{constructor(r){super({name:"InvalidWriteOffset",$fault:"client",...r});X(this,"name","InvalidWriteOffset");X(this,"$fault","client");Object.setPrototypeOf(this,_o.prototype)}}class To extends Je{constructor(r){super({name:"TooManyParts",$fault:"client",...r});X(this,"name","TooManyParts");X(this,"$fault","client");Object.setPrototypeOf(this,To.prototype)}}class ko extends Je{constructor(r){super({name:"ObjectAlreadyInActiveTierError",$fault:"client",...r});X(this,"name","ObjectAlreadyInActiveTierError");X(this,"$fault","client");Object.setPrototypeOf(this,ko.prototype)}}var Hc;(function(e){e.visit=(t,r)=>t.Records!==void 0?r.Records(t.Records):t.Stats!==void 0?r.Stats(t.Stats):t.Progress!==void 0?r.Progress(t.Progress):t.Cont!==void 0?r.Cont(t.Cont):t.End!==void 0?r.End(t.End):r._(t.$unknown[0],t.$unknown[1])})(Hc||(Hc={}));const L0=e=>({...e,...e.SSEKMSKeyId&&{SSEKMSKeyId:Ne},...e.SSEKMSEncryptionContext&&{SSEKMSEncryptionContext:Ne}}),$0=e=>({...e,...e.SSECustomerKey&&{SSECustomerKey:Ne},...e.SSEKMSKeyId&&{SSEKMSKeyId:Ne},...e.SSEKMSEncryptionContext&&{SSEKMSEncryptionContext:Ne}}),H0=e=>({...e,...e.SSEKMSKeyId&&{SSEKMSKeyId:Ne}}),q0=e=>({...e,...e.SSECustomerKey&&{SSECustomerKey:Ne}}),z0=async(e,t)=>{const r=sr(e,t),n=fe({},ze,{[Ur]:e[Fr],[Dr]:e[Pr],[zy]:[()=>ze(e[qc]),()=>Qi(e[qc]).toString()]});r.bp("/{Key+}"),r.p("Bucket",()=>e.Bucket,"{Bucket}",!1),r.p("Key",()=>e.Key,"{Key+}",!0);const s=fe({[Oo]:[,"AbortMultipartUpload"],[Io]:[,Nt(e[Rr],"UploadId")]});return r.m("DELETE").h(n).q(s).b(void 0),r.build()},j0=async(e,t)=>{const r=sr(e,t),n=fe({},ze,{"content-type":"application/xml",[ln]:e[Ct],[dn]:e[Rt],[fn]:e[_t],[hn]:e[Tt],[pn]:e[kt],[is]:e[tr],[jy]:e[Ty],[Ur]:e[Fr],[Dr]:e[Pr],[md]:e[rd],[yd]:e[nd],[fr]:e[lr],[os]:e[ns],[hr]:e[dr]});r.bp("/{Key+}"),r.p("Bucket",()=>e.Bucket,"{Bucket}",!1),r.p("Key",()=>e.Key,"{Key+}",!0);const s=fe({[Io]:[,Nt(e[Rr],"UploadId")]});let i,o;return e.MultipartUpload!==void 0&&(o=yy(e.MultipartUpload),o=o.n("CompleteMultipartUpload"),i=wd,o.a("xmlns","http://s3.amazonaws.com/doc/2006-03-01/"),i+=o.toString()),r.m("POST").h(n).q(s).b(i),r.build()},W0=async(e,t)=>{const r=sr(e,t),n=fe({},ze,{[bd]:e[Kl],[cd]:e[Vl],[ud]:e[Gl],[ld]:e[Xl],[dd]:e[Zl],[hd]:e[Yl],[pd]:[()=>ze(e[Gn]),()=>Qi(e[Gn]).toString()],[xd]:e[Ql],[vd]:e[Jl],[Ad]:e[ed],[Cd]:e[td],[Gt]:e[Kt],[kd]:e[Yr],[Nd]:e[ad],[fr]:e[lr],[os]:e[ns],[hr]:e[dr],[Xt]:e[Vt],[Lr]:e[Or],[ct]:[()=>ze(e[mt]),()=>e[mt].toString()],[Ur]:e[Fr],[Bd]:e[No],[_d]:e[id],[Td]:[()=>ze(e[Xn]),()=>el(e[Xn]).toString()],[Rd]:e[sd],[Dr]:e[Pr],[Ed]:e[cn],[is]:e[tr],...e.Metadata!==void 0&&Object.keys(e.Metadata).reduce((o,a)=>(o[`x-amz-meta-${a.toLowerCase()}`]=e.Metadata[a],o),{})});r.bp("/{Key+}"),r.p("Bucket",()=>e.Bucket,"{Bucket}",!1),r.p("Key",()=>e.Key,"{Key+}",!0);const s=fe({[Ly]:[,""]});return r.m("POST").h(n).q(s).b(void 0),r.build()},K0=async(e,t)=>{const r=sr(e,t),n=fe({},ze,{[qy]:e[Ny],[Gt]:e[Kt],[Xt]:e[Vt],[Lr]:e[Or],[ct]:[()=>ze(e[mt]),()=>e[mt].toString()]});r.bp("/"),r.p("Bucket",()=>e.Bucket,"{Bucket}",!1);const s=fe({[Dy]:[,""]});return r.m("GET").h(n).q(s).b(void 0),r.build()},V0=async(e,t)=>{const r=sr(e,t),n=fe({},ze,{[hd]:e[Yl]||"application/octet-stream",[bd]:e[Kl],[cd]:e[Vl],[ud]:e[Gl],[ld]:e[Xl],[dd]:e[Zl],[fd]:[()=>ze(e[Vn]),()=>e[Vn].toString()],[Mo]:e[Bo],[Po]:e[cn],[ln]:e[Ct],[dn]:e[Rt],[fn]:e[_t],[hn]:e[Tt],[pn]:e[kt],[pd]:[()=>ze(e[Gn]),()=>Qi(e[Gn]).toString()],[md]:e[rd],[yd]:e[nd],[xd]:e[Ql],[vd]:e[Jl],[Ad]:e[ed],[Cd]:e[td],[Wy]:[()=>ze(e[zc]),()=>e[zc].toString()],[Gt]:e[Kt],[kd]:e[Yr],[Nd]:e[ad],[fr]:e[lr],[os]:e[ns],[hr]:e[dr],[Xt]:e[Vt],[Lr]:e[Or],[ct]:[()=>ze(e[mt]),()=>e[mt].toString()],[Ur]:e[Fr],[Bd]:e[No],[_d]:e[id],[Td]:[()=>ze(e[Xn]),()=>el(e[Xn]).toString()],[Rd]:e[sd],[Dr]:e[Pr],...e.Metadata!==void 0&&Object.keys(e.Metadata).reduce((a,c)=>(a[`x-amz-meta-${c.toLowerCase()}`]=e.Metadata[c],a),{})});r.bp("/{Key+}"),r.p("Bucket",()=>e.Bucket,"{Bucket}",!1),r.p("Key",()=>e.Key,"{Key+}",!0);const s=fe({[Oo]:[,"PutObject"]});let i,o;return e.Body!==void 0&&(o=e.Body,i=o),r.m("PUT").h(n).q(s).b(i),r.build()},G0=async(e,t)=>{const r=sr(e,t),n=fe({},ze,{"content-type":"application/xml",[Mo]:e[Bo],[Po]:e[cn],[Dr]:e[Pr],[Ur]:e[Fr]});r.bp("/{Key+}"),r.p("Bucket",()=>e.Bucket,"{Bucket}",!1),r.p("Key",()=>e.Key,"{Key+}",!0);const s=fe({[Uy]:[,""],[$y]:[,e[ss]]});let i,o;return e.Tagging!==void 0&&(o=Sy(e.Tagging),i=wd,o.a("xmlns","http://s3.amazonaws.com/doc/2006-03-01/"),i+=o.toString()),r.m("PUT").h(n).q(s).b(i),r.build()},X0=async(e,t)=>{const r=sr(e,t),n=fe({},ze,{"content-type":"application/octet-stream",[fd]:[()=>ze(e[Vn]),()=>e[Vn].toString()],[Mo]:e[Bo],[Po]:e[cn],[ln]:e[Ct],[dn]:e[Rt],[fn]:e[_t],[hn]:e[Tt],[pn]:e[kt],[fr]:e[lr],[os]:e[ns],[hr]:e[dr],[Ur]:e[Fr],[Dr]:e[Pr]});r.bp("/{Key+}"),r.p("Bucket",()=>e.Bucket,"{Bucket}",!1),r.p("Key",()=>e.Key,"{Key+}",!0);const s=fe({[Oo]:[,"UploadPart"],[Oy]:[Nt(e.PartNumber,"PartNumber")!=null,()=>e[Vr].toString()],[Io]:[,Nt(e[Rr],"UploadId")]});let i,o;return e.Body!==void 0&&(o=e.Body,i=o),r.m("PUT").h(n).q(s).b(i),r.build()},Z0=async(e,t)=>{if(e.statusCode!==204&&e.statusCode>=300)return ur(e,t);const r=fe({$metadata:Pe(e),[un]:[,e.headers[gn]]});return await on(e.body,t),r},Y0=async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return ur(e,t);const r=fe({$metadata:Pe(e),[Zr]:[,e.headers[Sd]],[Kt]:[,e.headers[Gt]],[ss]:[,e.headers[Fo]],[Vt]:[,e.headers[Xt]],[mt]:[()=>e.headers[ct]!==void 0,()=>an(e.headers[ct])],[un]:[,e.headers[gn]]}),n=Nt(Zi(await es(e.body,t)),"body");return n[Ar]!=null&&(r[Ar]=qe(n[Ar])),n[Ct]!=null&&(r[Ct]=qe(n[Ct])),n[Rt]!=null&&(r[Rt]=qe(n[Rt])),n[_t]!=null&&(r[_t]=qe(n[_t])),n[Tt]!=null&&(r[Tt]=qe(n[Tt])),n[kt]!=null&&(r[kt]=qe(n[kt])),n[tr]!=null&&(r[tr]=qe(n[tr])),n[Cr]!=null&&(r[Cr]=qe(n[Cr])),n[Bt]!=null&&(r[Bt]=qe(n[Bt])),n[ii]!=null&&(r[ii]=qe(n[ii])),r},Q0=async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return ur(e,t);const r=fe({$metadata:Pe(e),[Ay]:[()=>e.headers[jc]!==void 0,()=>Nt(Ih(e.headers[jc]))],[Cy]:[,e.headers[Hy]],[Kt]:[,e.headers[Gt]],[lr]:[,e.headers[fr]],[dr]:[,e.headers[hr]],[Vt]:[,e.headers[Xt]],[Or]:[,e.headers[Lr]],[mt]:[()=>e.headers[ct]!==void 0,()=>an(e.headers[ct])],[un]:[,e.headers[gn]],[cn]:[,e.headers[Ed]],[tr]:[,e.headers[is]]}),n=Nt(Zi(await es(e.body,t)),"body");return n[Ar]!=null&&(r[Ar]=qe(n[Ar])),n[Bt]!=null&&(r[Bt]=qe(n[Bt])),n[Rr]!=null&&(r[Rr]=qe(n[Rr])),r},J0=async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return ur(e,t);const r=fe({$metadata:Pe(e),[Kt]:[,e.headers[Gt]],[Vt]:[,e.headers[Xt]],[Or]:[,e.headers[Lr]],[mt]:[()=>e.headers[ct]!==void 0,()=>an(e.headers[ct])]}),n=Nt(Zi(await es(e.body,t)),"body");return n[si]!=null&&(r[si]=vy(n[si])),r},ey=async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return ur(e,t);const r=fe({$metadata:Pe(e),[Zr]:[,e.headers[Sd]],[Cr]:[,e.headers[gd]],[Ct]:[,e.headers[ln]],[Rt]:[,e.headers[dn]],[_t]:[,e.headers[fn]],[Tt]:[,e.headers[hn]],[kt]:[,e.headers[pn]],[tr]:[,e.headers[is]],[Kt]:[,e.headers[Gt]],[ss]:[,e.headers[Fo]],[lr]:[,e.headers[fr]],[dr]:[,e.headers[hr]],[Vt]:[,e.headers[Xt]],[Or]:[,e.headers[Lr]],[mt]:[()=>e.headers[ct]!==void 0,()=>an(e.headers[ct])],[My]:[()=>e.headers[Wc]!==void 0,()=>Ch(e.headers[Wc])],[un]:[,e.headers[gn]]});return await on(e.body,t),r},ty=async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return ur(e,t);const r=fe({$metadata:Pe(e),[ss]:[,e.headers[Fo]]});return await on(e.body,t),r},ry=async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return ur(e,t);const r=fe({$metadata:Pe(e),[Kt]:[,e.headers[Gt]],[Cr]:[,e.headers[gd]],[Ct]:[,e.headers[ln]],[Rt]:[,e.headers[dn]],[_t]:[,e.headers[fn]],[Tt]:[,e.headers[hn]],[kt]:[,e.headers[pn]],[lr]:[,e.headers[fr]],[dr]:[,e.headers[hr]],[Vt]:[,e.headers[Xt]],[mt]:[()=>e.headers[ct]!==void 0,()=>an(e.headers[ct])],[un]:[,e.headers[gn]]});return await on(e.body,t),r},ur=async(e,t)=>{const r={...e,body:await fp(e.body,t)},n=hp(e,r.body);switch(n){case"NoSuchUpload":case"com.amazonaws.s3#NoSuchUpload":throw await fy(r);case"ObjectNotInActiveTierError":case"com.amazonaws.s3#ObjectNotInActiveTierError":throw await gy(r);case"BucketAlreadyExists":case"com.amazonaws.s3#BucketAlreadyExists":throw await sy(r);case"BucketAlreadyOwnedByYou":case"com.amazonaws.s3#BucketAlreadyOwnedByYou":throw await iy(r);case"NoSuchBucket":case"com.amazonaws.s3#NoSuchBucket":throw await ly(r);case"InvalidObjectState":case"com.amazonaws.s3#InvalidObjectState":throw await ay(r);case"NoSuchKey":case"com.amazonaws.s3#NoSuchKey":throw await dy(r);case"NotFound":case"com.amazonaws.s3#NotFound":throw await hy(r);case"EncryptionTypeMismatch":case"com.amazonaws.s3#EncryptionTypeMismatch":throw await oy(r);case"InvalidRequest":case"com.amazonaws.s3#InvalidRequest":throw await cy(r);case"InvalidWriteOffset":case"com.amazonaws.s3#InvalidWriteOffset":throw await uy(r);case"TooManyParts":case"com.amazonaws.s3#TooManyParts":throw await my(r);case"ObjectAlreadyInActiveTierError":case"com.amazonaws.s3#ObjectAlreadyInActiveTierError":throw await py(r);default:const s=r.body;return ny({output:e,parsedBody:s,errorCode:n})}},ny=zh(Je),sy=async(e,t)=>{const r=fe({});e.body;const n=new bo({$metadata:Pe(e),...r});return st(n,e.body)},iy=async(e,t)=>{const r=fe({});e.body;const n=new Eo({$metadata:Pe(e),...r});return st(n,e.body)},oy=async(e,t)=>{const r=fe({});e.body;const n=new Co({$metadata:Pe(e),...r});return st(n,e.body)},ay=async(e,t)=>{const r=fe({}),n=e.body;n[ni]!=null&&(r[ni]=qe(n[ni])),n[Yr]!=null&&(r[Yr]=qe(n[Yr]));const s=new xo({$metadata:Pe(e),...r});return st(s,e.body)},cy=async(e,t)=>{const r=fe({});e.body;const n=new Ro({$metadata:Pe(e),...r});return st(n,e.body)},uy=async(e,t)=>{const r=fe({});e.body;const n=new _o({$metadata:Pe(e),...r});return st(n,e.body)},ly=async(e,t)=>{const r=fe({});e.body;const n=new So({$metadata:Pe(e),...r});return st(n,e.body)},dy=async(e,t)=>{const r=fe({});e.body;const n=new vo({$metadata:Pe(e),...r});return st(n,e.body)},fy=async(e,t)=>{const r=fe({});e.body;const n=new yo({$metadata:Pe(e),...r});return st(n,e.body)},hy=async(e,t)=>{const r=fe({});e.body;const n=new Ao({$metadata:Pe(e),...r});return st(n,e.body)},py=async(e,t)=>{const r=fe({});e.body;const n=new ko({$metadata:Pe(e),...r});return st(n,e.body)},gy=async(e,t)=>{const r=fe({});e.body;const n=new wo({$metadata:Pe(e),...r});return st(n,e.body)},my=async(e,t)=>{const r=fe({});e.body;const n=new To({$metadata:Pe(e),...r});return st(n,e.body)},yy=(e,t)=>{const r=new xt(Ry);return r.l(e,"Parts","Part",()=>by(e[By])),r},wy=(e,t)=>{const r=new xt(_y);return r.cc(e,Cr),r.cc(e,Ct),r.cc(e,Rt),r.cc(e,_t),r.cc(e,Tt),r.cc(e,kt),e[Vr]!=null&&r.c(xt.of(Vr,String(e[Vr])).n(Vr)),r},by=(e,t)=>e.filter(r=>r!=null).map(r=>wy(r).n(Fy)),Ey=(e,t)=>{const r=new xt(od);return e[Bt]!=null&&r.c(xt.of(ky,e[Bt]).n(Bt)),r.cc(e,Py),r},Sy=(e,t)=>{const r=new xt(No);return r.lc(e,"TagSet","TagSet",()=>xy(e[Iy])),r},xy=(e,t)=>e.filter(r=>r!=null).map(r=>Ey(r).n(od)),vy=(e,t)=>{const r={};return e[ri]!=null&&(r[ri]=qe(e[ri])),e[oi]!=null&&(r[oi]=qe(e[oi])),e[ai]!=null&&(r[ai]=qe(e[ai])),e[Zr]!=null&&(r[Zr]=Nt(kh(e[Zr]))),r},Pe=e=>({httpStatusCode:e.statusCode,requestId:e.headers["x-amzn-requestid"]??e.headers["x-amzn-request-id"]??e.headers["x-amz-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]}),Kl="ACL",Ay="AbortDate",ri="AccessKeyId",Cy="AbortRuleId",ni="AccessTier",Ar="Bucket",mt="BucketKeyEnabled",si="Credentials",cn="ChecksumAlgorithm",Vl="CacheControl",Ct="ChecksumCRC32",Rt="ChecksumCRC32C",_t="ChecksumCRC64NVME",Gl="ContentDisposition",Xl="ContentEncoding",Zl="ContentLanguage",Vn="ContentLength",Bo="ContentMD5",Ry="CompletedMultipartUpload",_y="CompletedPart",Tt="ChecksumSHA1",kt="ChecksumSHA256",tr="ChecksumType",Yl="ContentType",Gn="Expires",Pr="ExpectedBucketOwner",Cr="ETag",Zr="Expiration",Ql="GrantFullControl",Jl="GrantRead",ed="GrantReadACP",td="GrantWriteACP",rd="IfMatch",qc="IfMatchInitiatedTime",nd="IfNoneMatch",Bt="Key",ii="Location",Ty="MpuObjectSize",ky="ObjectKey",sd="ObjectLockLegalHoldStatus",id="ObjectLockMode",Xn="ObjectLockRetainUntilDate",Vr="PartNumber",By="Parts",un="RequestCharged",Fr="RequestPayer",oi="SecretAccessKey",Yr="StorageClass",Ny="SessionMode",Kt="ServerSideEncryption",lr="SSECustomerAlgorithm",ns="SSECustomerKey",dr="SSECustomerKeyMD5",Or="SSEKMSEncryptionContext",Vt="SSEKMSKeyId",ai="SessionToken",My="Size",No="Tagging",Iy="TagSet",od="Tag",Rr="UploadId",ss="VersionId",Py="Value",zc="WriteOffsetBytes",ad="WebsiteRedirectLocation",cd="cache-control",ud="content-disposition",ld="content-encoding",dd="content-language",fd="content-length",Mo="content-md5",hd="content-type",pd="expires",gd="etag",md="if-match",yd="if-none-match",Fy="member",Oy="partNumber",Dy="session",Uy="tagging",Ly="uploads",Io="uploadId",$y="versionId",wd='<?xml version="1.0" encoding="UTF-8"?>',bd="x-amz-acl",jc="x-amz-abort-date",Hy="x-amz-abort-rule-id",Ed="x-amz-checksum-algorithm",ln="x-amz-checksum-crc32",dn="x-amz-checksum-crc32c",fn="x-amz-checksum-crc64nvme",hn="x-amz-checksum-sha1",pn="x-amz-checksum-sha256",qy="x-amz-create-session-mode",is="x-amz-checksum-type",Sd="x-amz-expiration",Dr="x-amz-expected-bucket-owner",xd="x-amz-grant-full-control",vd="x-amz-grant-read",Ad="x-amz-grant-read-acp",Cd="x-amz-grant-write-acp",zy="x-amz-if-match-initiated-time",jy="x-amz-mp-object-size",Rd="x-amz-object-lock-legal-hold",_d="x-amz-object-lock-mode",Td="x-amz-object-lock-retain-until-date",Wc="x-amz-object-size",gn="x-amz-request-charged",Ur="x-amz-request-payer",kd="x-amz-storage-class",Po="x-amz-sdk-checksum-algorithm",Gt="x-amz-server-side-encryption",Xt="x-amz-server-side-encryption-aws-kms-key-id",ct="x-amz-server-side-encryption-bucket-key-enabled",Lr="x-amz-server-side-encryption-context",fr="x-amz-server-side-encryption-customer-algorithm",os="x-amz-server-side-encryption-customer-key",hr="x-amz-server-side-encryption-customer-key-md5",Bd="x-amz-tagging",Fo="x-amz-version-id",Wy="x-amz-write-offset-bytes",Nd="x-amz-website-redirect-location",Oo="x-id";class Ky extends Wt.classBuilder().ep({...cr,DisableS3ExpressSessionAuth:{type:"staticContextParams",value:!0},Bucket:{type:"contextParams",name:"Bucket"}}).m(function(t,r,n,s){return[nr(n,this.serialize,this.deserialize),or(n,t.getEndpointParameterInstructions()),ir(n)]}).s("AmazonS3","CreateSession",{}).n("S3Client","CreateSessionCommand").f(F0,P0).ser(K0).de(J0).build(){}const Vy="@aws-sdk/client-s3",Gy="AWS SDK for JavaScript S3 Client for Node.js, Browser and React Native",Xy="3.731.1",Zy={build:"concurrently 'yarn:build:cjs' 'yarn:build:es' 'yarn:build:types'","build:cjs":"node ../../scripts/compilation/inline client-s3","build:es":"tsc -p tsconfig.es.json","build:include:deps":"lerna run --scope $npm_package_name --include-dependencies build","build:types":"tsc -p tsconfig.types.json","build:types:downlevel":"downlevel-dts dist-types dist-types/ts3.4",clean:"rimraf ./dist-* && rimraf *.tsbuildinfo","extract:docs":"api-extractor run --local","generate:client":"node ../../scripts/generate-clients/single-service --solo s3",test:"yarn g:vitest run","test:browser":"node ./test/browser-build/esbuild && yarn g:vitest run -c vitest.config.browser.ts","test:browser:watch":"node ./test/browser-build/esbuild && yarn g:vitest watch -c vitest.config.browser.ts","test:e2e":"yarn g:vitest run -c vitest.config.e2e.ts && yarn test:browser","test:e2e:watch":"yarn g:vitest watch -c vitest.config.e2e.ts","test:watch":"yarn g:vitest watch"},Yy="./dist-cjs/index.js",Qy="./dist-types/index.d.ts",Jy="./dist-es/index.js",ew=!1,tw={"@aws-crypto/sha1-browser":"5.2.0","@aws-crypto/sha256-browser":"5.2.0","@aws-crypto/sha256-js":"5.2.0","@aws-sdk/core":"3.731.0","@aws-sdk/credential-provider-node":"3.731.1","@aws-sdk/middleware-bucket-endpoint":"3.731.0","@aws-sdk/middleware-expect-continue":"3.731.0","@aws-sdk/middleware-flexible-checksums":"3.731.0","@aws-sdk/middleware-host-header":"3.731.0","@aws-sdk/middleware-location-constraint":"3.731.0","@aws-sdk/middleware-logger":"3.731.0","@aws-sdk/middleware-recursion-detection":"3.731.0","@aws-sdk/middleware-sdk-s3":"3.731.0","@aws-sdk/middleware-ssec":"3.731.0","@aws-sdk/middleware-user-agent":"3.731.0","@aws-sdk/region-config-resolver":"3.731.0","@aws-sdk/signature-v4-multi-region":"3.731.0","@aws-sdk/types":"3.731.0","@aws-sdk/util-endpoints":"3.731.0","@aws-sdk/util-user-agent-browser":"3.731.0","@aws-sdk/util-user-agent-node":"3.731.0","@aws-sdk/xml-builder":"3.723.0","@smithy/config-resolver":"^4.0.0","@smithy/core":"^3.0.0","@smithy/eventstream-serde-browser":"^4.0.0","@smithy/eventstream-serde-config-resolver":"^4.0.0","@smithy/eventstream-serde-node":"^4.0.0","@smithy/fetch-http-handler":"^5.0.0","@smithy/hash-blob-browser":"^4.0.0","@smithy/hash-node":"^4.0.0","@smithy/hash-stream-node":"^4.0.0","@smithy/invalid-dependency":"^4.0.0","@smithy/md5-js":"^4.0.0","@smithy/middleware-content-length":"^4.0.0","@smithy/middleware-endpoint":"^4.0.0","@smithy/middleware-retry":"^4.0.0","@smithy/middleware-serde":"^4.0.0","@smithy/middleware-stack":"^4.0.0","@smithy/node-config-provider":"^4.0.0","@smithy/node-http-handler":"^4.0.0","@smithy/protocol-http":"^5.0.0","@smithy/smithy-client":"^4.0.0","@smithy/types":"^4.0.0","@smithy/url-parser":"^4.0.0","@smithy/util-base64":"^4.0.0","@smithy/util-body-length-browser":"^4.0.0","@smithy/util-body-length-node":"^4.0.0","@smithy/util-defaults-mode-browser":"^4.0.0","@smithy/util-defaults-mode-node":"^4.0.0","@smithy/util-endpoints":"^3.0.0","@smithy/util-middleware":"^4.0.0","@smithy/util-retry":"^4.0.0","@smithy/util-stream":"^4.0.0","@smithy/util-utf8":"^4.0.0","@smithy/util-waiter":"^4.0.0",tslib:"^2.6.2"},rw={"@aws-sdk/signature-v4-crt":"3.731.0","@tsconfig/node18":"18.2.4","@types/node":"^18.19.69",concurrently:"7.0.0","downlevel-dts":"0.10.1",rimraf:"3.0.2",typescript:"~5.2.2"},nw={node:">=18.0.0"},sw={"<4.0":{"dist-types/*":["dist-types/ts3.4/*"]}},iw=["dist-*/**"],ow={name:"AWS SDK for JavaScript Team",url:"https://aws.amazon.com/javascript/"},aw="Apache-2.0",cw={"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.browser"},uw="https://github.com/aws/aws-sdk-js-v3/tree/main/clients/client-s3",lw={type:"git",url:"https://github.com/aws/aws-sdk-js-v3.git",directory:"clients/client-s3"},dw={name:Vy,description:Gy,version:Xy,scripts:Zy,main:Yy,types:Qy,module:Jy,sideEffects:ew,dependencies:tw,devDependencies:rw,engines:nw,typesVersions:sw,files:iw,author:ow,license:aw,browser:cw,"react-native":{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.native"},homepage:uw,repository:lw},fw=e=>new TextEncoder().encode(e);function Kc(e){return typeof e=="string"?e.length===0:e.byteLength===0}var Md={name:"SHA-1"},Vc={name:"HMAC",hash:Md},hw=new Uint8Array([218,57,163,238,94,107,75,13,50,85,191,239,149,96,24,144,175,216,7,9]);const pw={};function $t(){return typeof window<"u"?window:typeof self<"u"?self:pw}var gw=function(){function e(t){this.toHash=new Uint8Array(0),t!==void 0&&(this.key=new Promise(function(r,n){$t().crypto.subtle.importKey("raw",Gc(t),Vc,!1,["sign"]).then(r,n)}),this.key.catch(function(){}))}return e.prototype.update=function(t){if(!Kc(t)){var r=Gc(t),n=new Uint8Array(this.toHash.byteLength+r.byteLength);n.set(this.toHash,0),n.set(r,this.toHash.byteLength),this.toHash=n}},e.prototype.digest=function(){var t=this;return this.key?this.key.then(function(r){return $t().crypto.subtle.sign(Vc,r,t.toHash).then(function(n){return new Uint8Array(n)})}):Kc(this.toHash)?Promise.resolve(hw):Promise.resolve().then(function(){return $t().crypto.subtle.digest(Md,t.toHash)}).then(function(r){return Promise.resolve(new Uint8Array(r))})},e.prototype.reset=function(){this.toHash=new Uint8Array(0)},e}();function Gc(e){return typeof e=="string"?fw(e):ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(e)}var mw=["decrypt","digest","encrypt","exportKey","generateKey","importKey","sign","verify"];function Id(e){if(yw(e)&&typeof e.crypto.subtle=="object"){var t=e.crypto.subtle;return ww(t)}return!1}function yw(e){if(typeof e=="object"&&typeof e.crypto=="object"){var t=e.crypto.getRandomValues;return typeof t=="function"}return!1}function ww(e){return e&&mw.every(function(t){return typeof e[t]=="function"})}var bw=function(){function e(t){if(Id($t()))this.hash=new gw(t);else throw new Error("SHA1 not supported")}return e.prototype.update=function(t,r){this.hash.update(qt(t))},e.prototype.digest=function(){return this.hash.digest()},e.prototype.reset=function(){this.hash.reset()},e}(),Pd={name:"SHA-256"},Xc={name:"HMAC",hash:Pd},Ew=new Uint8Array([227,176,196,66,152,252,28,20,154,251,244,200,153,111,185,36,39,174,65,228,100,155,147,76,164,149,153,27,120,82,184,85]),Sw=function(){function e(t){this.toHash=new Uint8Array(0),this.secret=t,this.reset()}return e.prototype.update=function(t){if(!rn(t)){var r=qt(t),n=new Uint8Array(this.toHash.byteLength+r.byteLength);n.set(this.toHash,0),n.set(r,this.toHash.byteLength),this.toHash=n}},e.prototype.digest=function(){var t=this;return this.key?this.key.then(function(r){return $t().crypto.subtle.sign(Xc,r,t.toHash).then(function(n){return new Uint8Array(n)})}):rn(this.toHash)?Promise.resolve(Ew):Promise.resolve().then(function(){return $t().crypto.subtle.digest(Pd,t.toHash)}).then(function(r){return Promise.resolve(new Uint8Array(r))})},e.prototype.reset=function(){var t=this;this.toHash=new Uint8Array(0),this.secret&&this.secret!==void 0&&(this.key=new Promise(function(r,n){$t().crypto.subtle.importKey("raw",qt(t.secret),Xc,!1,["sign"]).then(r,n)}),this.key.catch(function(){}))},e}(),dt=64,xw=32,vw=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Aw=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],Cw=Math.pow(2,53)-1,Pn=function(){function e(){this.state=Int32Array.from(Aw),this.temp=new Int32Array(64),this.buffer=new Uint8Array(64),this.bufferLength=0,this.bytesHashed=0,this.finished=!1}return e.prototype.update=function(t){if(this.finished)throw new Error("Attempted to update an already finished hash.");var r=0,n=t.byteLength;if(this.bytesHashed+=n,this.bytesHashed*8>Cw)throw new Error("Cannot hash more than 2^53 - 1 bits");for(;n>0;)this.buffer[this.bufferLength++]=t[r++],n--,this.bufferLength===dt&&(this.hashBuffer(),this.bufferLength=0)},e.prototype.digest=function(){if(!this.finished){var t=this.bytesHashed*8,r=new DataView(this.buffer.buffer,this.buffer.byteOffset,this.buffer.byteLength),n=this.bufferLength;if(r.setUint8(this.bufferLength++,128),n%dt>=dt-8){for(var s=this.bufferLength;s<dt;s++)r.setUint8(s,0);this.hashBuffer(),this.bufferLength=0}for(var s=this.bufferLength;s<dt-8;s++)r.setUint8(s,0);r.setUint32(dt-8,Math.floor(t/4294967296),!0),r.setUint32(dt-4,t),this.hashBuffer(),this.finished=!0}for(var i=new Uint8Array(xw),s=0;s<8;s++)i[s*4]=this.state[s]>>>24&255,i[s*4+1]=this.state[s]>>>16&255,i[s*4+2]=this.state[s]>>>8&255,i[s*4+3]=this.state[s]>>>0&255;return i},e.prototype.hashBuffer=function(){for(var t=this,r=t.buffer,n=t.state,s=n[0],i=n[1],o=n[2],a=n[3],c=n[4],u=n[5],f=n[6],p=n[7],g=0;g<dt;g++){if(g<16)this.temp[g]=(r[g*4]&255)<<24|(r[g*4+1]&255)<<16|(r[g*4+2]&255)<<8|r[g*4+3]&255;else{var w=this.temp[g-2],R=(w>>>17|w<<15)^(w>>>19|w<<13)^w>>>10;w=this.temp[g-15];var k=(w>>>7|w<<25)^(w>>>18|w<<14)^w>>>3;this.temp[g]=(R+this.temp[g-7]|0)+(k+this.temp[g-16]|0)}var _=(((c>>>6|c<<26)^(c>>>11|c<<21)^(c>>>25|c<<7))+(c&u^~c&f)|0)+(p+(vw[g]+this.temp[g]|0)|0)|0,h=((s>>>2|s<<30)^(s>>>13|s<<19)^(s>>>22|s<<10))+(s&i^s&o^i&o)|0;p=f,f=u,u=c,c=a+_|0,a=o,o=i,i=s,s=_+h|0}n[0]+=s,n[1]+=i,n[2]+=o,n[3]+=a,n[4]+=c,n[5]+=u,n[6]+=f,n[7]+=p},e}(),Rw=function(){function e(t){this.secret=t,this.hash=new Pn,this.reset()}return e.prototype.update=function(t){if(!(rn(t)||this.error))try{this.hash.update(qt(t))}catch(r){this.error=r}},e.prototype.digestSync=function(){if(this.error)throw this.error;return this.outer?(this.outer.finished||this.outer.update(this.hash.digest()),this.outer.digest()):this.hash.digest()},e.prototype.digest=function(){return no(this,void 0,void 0,function(){return so(this,function(t){return[2,this.digestSync()]})})},e.prototype.reset=function(){if(this.hash=new Pn,this.secret){this.outer=new Pn;var t=_w(this.secret),r=new Uint8Array(dt);r.set(t);for(var n=0;n<dt;n++)t[n]^=54,r[n]^=92;this.hash.update(t),this.outer.update(r);for(var n=0;n<t.byteLength;n++)t[n]=0}},e}();function _w(e){var t=qt(e);if(t.byteLength>dt){var r=new Pn;r.update(t),t=r.digest()}var n=new Uint8Array(dt);return n.set(t),n}var Tw=function(){function e(t){Id($t())?this.hash=new Sw(t):this.hash=new Rw(t)}return e.prototype.update=function(t,r){this.hash.update(qt(t))},e.prototype.digest=function(){return this.hash.digest()},e.prototype.reset=function(){this.hash.reset()},e}();const kw={"Amazon Silk":"amazon_silk","Android Browser":"android",Bada:"bada",BlackBerry:"blackberry",Chrome:"chrome",Chromium:"chromium",Electron:"electron",Epiphany:"epiphany",Firefox:"firefox",Focus:"focus",Generic:"generic","Google Search":"google_search",Googlebot:"googlebot","Internet Explorer":"ie","K-Meleon":"k_meleon",Maxthon:"maxthon","Microsoft Edge":"edge","MZ Browser":"mz","NAVER Whale Browser":"naver",Opera:"opera","Opera Coast":"opera_coast",PhantomJS:"phantomjs",Puffin:"puffin",QupZilla:"qupzilla",QQ:"qq",QQLite:"qqlite",Safari:"safari",Sailfish:"sailfish","Samsung Internet for Android":"samsung_internet",SeaMonkey:"seamonkey",Sleipnir:"sleipnir",Swing:"swing",Tizen:"tizen","UC Browser":"uc",Vivaldi:"vivaldi","WebOS Browser":"webos",WeChat:"wechat","Yandex Browser":"yandex",Roku:"roku"},Fd={amazon_silk:"Amazon Silk",android:"Android Browser",bada:"Bada",blackberry:"BlackBerry",chrome:"Chrome",chromium:"Chromium",electron:"Electron",epiphany:"Epiphany",firefox:"Firefox",focus:"Focus",generic:"Generic",googlebot:"Googlebot",google_search:"Google Search",ie:"Internet Explorer",k_meleon:"K-Meleon",maxthon:"Maxthon",edge:"Microsoft Edge",mz:"MZ Browser",naver:"NAVER Whale Browser",opera:"Opera",opera_coast:"Opera Coast",phantomjs:"PhantomJS",puffin:"Puffin",qupzilla:"QupZilla",qq:"QQ Browser",qqlite:"QQ Browser Lite",safari:"Safari",sailfish:"Sailfish",samsung_internet:"Samsung Internet for Android",seamonkey:"SeaMonkey",sleipnir:"Sleipnir",swing:"Swing",tizen:"Tizen",uc:"UC Browser",vivaldi:"Vivaldi",webos:"WebOS Browser",wechat:"WeChat",yandex:"Yandex Browser"},Ce={tablet:"tablet",mobile:"mobile",desktop:"desktop",tv:"tv"},tt={WindowsPhone:"Windows Phone",Windows:"Windows",MacOS:"macOS",iOS:"iOS",Android:"Android",WebOS:"WebOS",BlackBerry:"BlackBerry",Bada:"Bada",Tizen:"Tizen",Linux:"Linux",ChromeOS:"Chrome OS",PlayStation4:"PlayStation 4",Roku:"Roku"},Dt={EdgeHTML:"EdgeHTML",Blink:"Blink",Trident:"Trident",Presto:"Presto",Gecko:"Gecko",WebKit:"WebKit"};class L{static getFirstMatch(t,r){const n=r.match(t);return n&&n.length>0&&n[1]||""}static getSecondMatch(t,r){const n=r.match(t);return n&&n.length>1&&n[2]||""}static matchAndReturnConst(t,r,n){if(t.test(r))return n}static getWindowsVersionName(t){switch(t){case"NT":return"NT";case"XP":return"XP";case"NT 5.0":return"2000";case"NT 5.1":return"XP";case"NT 5.2":return"2003";case"NT 6.0":return"Vista";case"NT 6.1":return"7";case"NT 6.2":return"8";case"NT 6.3":return"8.1";case"NT 10.0":return"10";default:return}}static getMacOSVersionName(t){const r=t.split(".").splice(0,2).map(n=>parseInt(n,10)||0);if(r.push(0),r[0]===10)switch(r[1]){case 5:return"Leopard";case 6:return"Snow Leopard";case 7:return"Lion";case 8:return"Mountain Lion";case 9:return"Mavericks";case 10:return"Yosemite";case 11:return"El Capitan";case 12:return"Sierra";case 13:return"High Sierra";case 14:return"Mojave";case 15:return"Catalina";default:return}}static getAndroidVersionName(t){const r=t.split(".").splice(0,2).map(n=>parseInt(n,10)||0);if(r.push(0),!(r[0]===1&&r[1]<5)){if(r[0]===1&&r[1]<6)return"Cupcake";if(r[0]===1&&r[1]>=6)return"Donut";if(r[0]===2&&r[1]<2)return"Eclair";if(r[0]===2&&r[1]===2)return"Froyo";if(r[0]===2&&r[1]>2)return"Gingerbread";if(r[0]===3)return"Honeycomb";if(r[0]===4&&r[1]<1)return"Ice Cream Sandwich";if(r[0]===4&&r[1]<4)return"Jelly Bean";if(r[0]===4&&r[1]>=4)return"KitKat";if(r[0]===5)return"Lollipop";if(r[0]===6)return"Marshmallow";if(r[0]===7)return"Nougat";if(r[0]===8)return"Oreo";if(r[0]===9)return"Pie"}}static getVersionPrecision(t){return t.split(".").length}static compareVersions(t,r,n=!1){const s=L.getVersionPrecision(t),i=L.getVersionPrecision(r);let o=Math.max(s,i),a=0;const c=L.map([t,r],u=>{const f=o-L.getVersionPrecision(u),p=u+new Array(f+1).join(".0");return L.map(p.split("."),g=>new Array(20-g.length).join("0")+g).reverse()});for(n&&(a=o-Math.min(s,i)),o-=1;o>=a;){if(c[0][o]>c[1][o])return 1;if(c[0][o]===c[1][o]){if(o===a)return 0;o-=1}else if(c[0][o]<c[1][o])return-1}}static map(t,r){const n=[];let s;if(Array.prototype.map)return Array.prototype.map.call(t,r);for(s=0;s<t.length;s+=1)n.push(r(t[s]));return n}static find(t,r){let n,s;if(Array.prototype.find)return Array.prototype.find.call(t,r);for(n=0,s=t.length;n<s;n+=1){const i=t[n];if(r(i,n))return i}}static assign(t,...r){const n=t;let s,i;if(Object.assign)return Object.assign(t,...r);for(s=0,i=r.length;s<i;s+=1){const o=r[s];typeof o=="object"&&o!==null&&Object.keys(o).forEach(c=>{n[c]=o[c]})}return t}static getBrowserAlias(t){return kw[t]}static getBrowserTypeByAlias(t){return Fd[t]||""}}const we=/version\/(\d+(\.?_?\d+)+)/i,Bw=[{test:[/googlebot/i],describe(e){const t={name:"Googlebot"},r=L.getFirstMatch(/googlebot\/(\d+(\.\d+))/i,e)||L.getFirstMatch(we,e);return r&&(t.version=r),t}},{test:[/opera/i],describe(e){const t={name:"Opera"},r=L.getFirstMatch(we,e)||L.getFirstMatch(/(?:opera)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/opr\/|opios/i],describe(e){const t={name:"Opera"},r=L.getFirstMatch(/(?:opr|opios)[\s/](\S+)/i,e)||L.getFirstMatch(we,e);return r&&(t.version=r),t}},{test:[/SamsungBrowser/i],describe(e){const t={name:"Samsung Internet for Android"},r=L.getFirstMatch(we,e)||L.getFirstMatch(/(?:SamsungBrowser)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/Whale/i],describe(e){const t={name:"NAVER Whale Browser"},r=L.getFirstMatch(we,e)||L.getFirstMatch(/(?:whale)[\s/](\d+(?:\.\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/MZBrowser/i],describe(e){const t={name:"MZ Browser"},r=L.getFirstMatch(/(?:MZBrowser)[\s/](\d+(?:\.\d+)+)/i,e)||L.getFirstMatch(we,e);return r&&(t.version=r),t}},{test:[/focus/i],describe(e){const t={name:"Focus"},r=L.getFirstMatch(/(?:focus)[\s/](\d+(?:\.\d+)+)/i,e)||L.getFirstMatch(we,e);return r&&(t.version=r),t}},{test:[/swing/i],describe(e){const t={name:"Swing"},r=L.getFirstMatch(/(?:swing)[\s/](\d+(?:\.\d+)+)/i,e)||L.getFirstMatch(we,e);return r&&(t.version=r),t}},{test:[/coast/i],describe(e){const t={name:"Opera Coast"},r=L.getFirstMatch(we,e)||L.getFirstMatch(/(?:coast)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/opt\/\d+(?:.?_?\d+)+/i],describe(e){const t={name:"Opera Touch"},r=L.getFirstMatch(/(?:opt)[\s/](\d+(\.?_?\d+)+)/i,e)||L.getFirstMatch(we,e);return r&&(t.version=r),t}},{test:[/yabrowser/i],describe(e){const t={name:"Yandex Browser"},r=L.getFirstMatch(/(?:yabrowser)[\s/](\d+(\.?_?\d+)+)/i,e)||L.getFirstMatch(we,e);return r&&(t.version=r),t}},{test:[/ucbrowser/i],describe(e){const t={name:"UC Browser"},r=L.getFirstMatch(we,e)||L.getFirstMatch(/(?:ucbrowser)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/Maxthon|mxios/i],describe(e){const t={name:"Maxthon"},r=L.getFirstMatch(we,e)||L.getFirstMatch(/(?:Maxthon|mxios)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/epiphany/i],describe(e){const t={name:"Epiphany"},r=L.getFirstMatch(we,e)||L.getFirstMatch(/(?:epiphany)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/puffin/i],describe(e){const t={name:"Puffin"},r=L.getFirstMatch(we,e)||L.getFirstMatch(/(?:puffin)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/sleipnir/i],describe(e){const t={name:"Sleipnir"},r=L.getFirstMatch(we,e)||L.getFirstMatch(/(?:sleipnir)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/k-meleon/i],describe(e){const t={name:"K-Meleon"},r=L.getFirstMatch(we,e)||L.getFirstMatch(/(?:k-meleon)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/micromessenger/i],describe(e){const t={name:"WeChat"},r=L.getFirstMatch(/(?:micromessenger)[\s/](\d+(\.?_?\d+)+)/i,e)||L.getFirstMatch(we,e);return r&&(t.version=r),t}},{test:[/qqbrowser/i],describe(e){const t={name:/qqbrowserlite/i.test(e)?"QQ Browser Lite":"QQ Browser"},r=L.getFirstMatch(/(?:qqbrowserlite|qqbrowser)[/](\d+(\.?_?\d+)+)/i,e)||L.getFirstMatch(we,e);return r&&(t.version=r),t}},{test:[/msie|trident/i],describe(e){const t={name:"Internet Explorer"},r=L.getFirstMatch(/(?:msie |rv:)(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/\sedg\//i],describe(e){const t={name:"Microsoft Edge"},r=L.getFirstMatch(/\sedg\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/edg([ea]|ios)/i],describe(e){const t={name:"Microsoft Edge"},r=L.getSecondMatch(/edg([ea]|ios)\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/vivaldi/i],describe(e){const t={name:"Vivaldi"},r=L.getFirstMatch(/vivaldi\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/seamonkey/i],describe(e){const t={name:"SeaMonkey"},r=L.getFirstMatch(/seamonkey\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/sailfish/i],describe(e){const t={name:"Sailfish"},r=L.getFirstMatch(/sailfish\s?browser\/(\d+(\.\d+)?)/i,e);return r&&(t.version=r),t}},{test:[/silk/i],describe(e){const t={name:"Amazon Silk"},r=L.getFirstMatch(/silk\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/phantom/i],describe(e){const t={name:"PhantomJS"},r=L.getFirstMatch(/phantomjs\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/slimerjs/i],describe(e){const t={name:"SlimerJS"},r=L.getFirstMatch(/slimerjs\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe(e){const t={name:"BlackBerry"},r=L.getFirstMatch(we,e)||L.getFirstMatch(/blackberry[\d]+\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/(web|hpw)[o0]s/i],describe(e){const t={name:"WebOS Browser"},r=L.getFirstMatch(we,e)||L.getFirstMatch(/w(?:eb)?[o0]sbrowser\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/bada/i],describe(e){const t={name:"Bada"},r=L.getFirstMatch(/dolfin\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/tizen/i],describe(e){const t={name:"Tizen"},r=L.getFirstMatch(/(?:tizen\s?)?browser\/(\d+(\.?_?\d+)+)/i,e)||L.getFirstMatch(we,e);return r&&(t.version=r),t}},{test:[/qupzilla/i],describe(e){const t={name:"QupZilla"},r=L.getFirstMatch(/(?:qupzilla)[\s/](\d+(\.?_?\d+)+)/i,e)||L.getFirstMatch(we,e);return r&&(t.version=r),t}},{test:[/firefox|iceweasel|fxios/i],describe(e){const t={name:"Firefox"},r=L.getFirstMatch(/(?:firefox|iceweasel|fxios)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/electron/i],describe(e){const t={name:"Electron"},r=L.getFirstMatch(/(?:electron)\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/MiuiBrowser/i],describe(e){const t={name:"Miui"},r=L.getFirstMatch(/(?:MiuiBrowser)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/chromium/i],describe(e){const t={name:"Chromium"},r=L.getFirstMatch(/(?:chromium)[\s/](\d+(\.?_?\d+)+)/i,e)||L.getFirstMatch(we,e);return r&&(t.version=r),t}},{test:[/chrome|crios|crmo/i],describe(e){const t={name:"Chrome"},r=L.getFirstMatch(/(?:chrome|crios|crmo)\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/GSA/i],describe(e){const t={name:"Google Search"},r=L.getFirstMatch(/(?:GSA)\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test(e){const t=!e.test(/like android/i),r=e.test(/android/i);return t&&r},describe(e){const t={name:"Android Browser"},r=L.getFirstMatch(we,e);return r&&(t.version=r),t}},{test:[/playstation 4/i],describe(e){const t={name:"PlayStation 4"},r=L.getFirstMatch(we,e);return r&&(t.version=r),t}},{test:[/safari|applewebkit/i],describe(e){const t={name:"Safari"},r=L.getFirstMatch(we,e);return r&&(t.version=r),t}},{test:[/.*/i],describe(e){const t=/^(.*)\/(.*) /,r=/^(.*)\/(.*)[ \t]\((.*)/,s=e.search("\\(")!==-1?r:t;return{name:L.getFirstMatch(s,e),version:L.getSecondMatch(s,e)}}}],Nw=[{test:[/Roku\/DVP/],describe(e){const t=L.getFirstMatch(/Roku\/DVP-(\d+\.\d+)/i,e);return{name:tt.Roku,version:t}}},{test:[/windows phone/i],describe(e){const t=L.getFirstMatch(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i,e);return{name:tt.WindowsPhone,version:t}}},{test:[/windows /i],describe(e){const t=L.getFirstMatch(/Windows ((NT|XP)( \d\d?.\d)?)/i,e),r=L.getWindowsVersionName(t);return{name:tt.Windows,version:t,versionName:r}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe(e){const t={name:tt.iOS},r=L.getSecondMatch(/(Version\/)(\d[\d.]+)/,e);return r&&(t.version=r),t}},{test:[/macintosh/i],describe(e){const t=L.getFirstMatch(/mac os x (\d+(\.?_?\d+)+)/i,e).replace(/[_\s]/g,"."),r=L.getMacOSVersionName(t),n={name:tt.MacOS,version:t};return r&&(n.versionName=r),n}},{test:[/(ipod|iphone|ipad)/i],describe(e){const t=L.getFirstMatch(/os (\d+([_\s]\d+)*) like mac os x/i,e).replace(/[_\s]/g,".");return{name:tt.iOS,version:t}}},{test(e){const t=!e.test(/like android/i),r=e.test(/android/i);return t&&r},describe(e){const t=L.getFirstMatch(/android[\s/-](\d+(\.\d+)*)/i,e),r=L.getAndroidVersionName(t),n={name:tt.Android,version:t};return r&&(n.versionName=r),n}},{test:[/(web|hpw)[o0]s/i],describe(e){const t=L.getFirstMatch(/(?:web|hpw)[o0]s\/(\d+(\.\d+)*)/i,e),r={name:tt.WebOS};return t&&t.length&&(r.version=t),r}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe(e){const t=L.getFirstMatch(/rim\stablet\sos\s(\d+(\.\d+)*)/i,e)||L.getFirstMatch(/blackberry\d+\/(\d+([_\s]\d+)*)/i,e)||L.getFirstMatch(/\bbb(\d+)/i,e);return{name:tt.BlackBerry,version:t}}},{test:[/bada/i],describe(e){const t=L.getFirstMatch(/bada\/(\d+(\.\d+)*)/i,e);return{name:tt.Bada,version:t}}},{test:[/tizen/i],describe(e){const t=L.getFirstMatch(/tizen[/\s](\d+(\.\d+)*)/i,e);return{name:tt.Tizen,version:t}}},{test:[/linux/i],describe(){return{name:tt.Linux}}},{test:[/CrOS/],describe(){return{name:tt.ChromeOS}}},{test:[/PlayStation 4/],describe(e){const t=L.getFirstMatch(/PlayStation 4[/\s](\d+(\.\d+)*)/i,e);return{name:tt.PlayStation4,version:t}}}],Mw=[{test:[/googlebot/i],describe(){return{type:"bot",vendor:"Google"}}},{test:[/huawei/i],describe(e){const t=L.getFirstMatch(/(can-l01)/i,e)&&"Nova",r={type:Ce.mobile,vendor:"Huawei"};return t&&(r.model=t),r}},{test:[/nexus\s*(?:7|8|9|10).*/i],describe(){return{type:Ce.tablet,vendor:"Nexus"}}},{test:[/ipad/i],describe(){return{type:Ce.tablet,vendor:"Apple",model:"iPad"}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe(){return{type:Ce.tablet,vendor:"Apple",model:"iPad"}}},{test:[/kftt build/i],describe(){return{type:Ce.tablet,vendor:"Amazon",model:"Kindle Fire HD 7"}}},{test:[/silk/i],describe(){return{type:Ce.tablet,vendor:"Amazon"}}},{test:[/tablet(?! pc)/i],describe(){return{type:Ce.tablet}}},{test(e){const t=e.test(/ipod|iphone/i),r=e.test(/like (ipod|iphone)/i);return t&&!r},describe(e){const t=L.getFirstMatch(/(ipod|iphone)/i,e);return{type:Ce.mobile,vendor:"Apple",model:t}}},{test:[/nexus\s*[0-6].*/i,/galaxy nexus/i],describe(){return{type:Ce.mobile,vendor:"Nexus"}}},{test:[/[^-]mobi/i],describe(){return{type:Ce.mobile}}},{test(e){return e.getBrowserName(!0)==="blackberry"},describe(){return{type:Ce.mobile,vendor:"BlackBerry"}}},{test(e){return e.getBrowserName(!0)==="bada"},describe(){return{type:Ce.mobile}}},{test(e){return e.getBrowserName()==="windows phone"},describe(){return{type:Ce.mobile,vendor:"Microsoft"}}},{test(e){const t=Number(String(e.getOSVersion()).split(".")[0]);return e.getOSName(!0)==="android"&&t>=3},describe(){return{type:Ce.tablet}}},{test(e){return e.getOSName(!0)==="android"},describe(){return{type:Ce.mobile}}},{test(e){return e.getOSName(!0)==="macos"},describe(){return{type:Ce.desktop,vendor:"Apple"}}},{test(e){return e.getOSName(!0)==="windows"},describe(){return{type:Ce.desktop}}},{test(e){return e.getOSName(!0)==="linux"},describe(){return{type:Ce.desktop}}},{test(e){return e.getOSName(!0)==="playstation 4"},describe(){return{type:Ce.tv}}},{test(e){return e.getOSName(!0)==="roku"},describe(){return{type:Ce.tv}}}],Iw=[{test(e){return e.getBrowserName(!0)==="microsoft edge"},describe(e){if(/\sedg\//i.test(e))return{name:Dt.Blink};const r=L.getFirstMatch(/edge\/(\d+(\.?_?\d+)+)/i,e);return{name:Dt.EdgeHTML,version:r}}},{test:[/trident/i],describe(e){const t={name:Dt.Trident},r=L.getFirstMatch(/trident\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test(e){return e.test(/presto/i)},describe(e){const t={name:Dt.Presto},r=L.getFirstMatch(/presto\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test(e){const t=e.test(/gecko/i),r=e.test(/like gecko/i);return t&&!r},describe(e){const t={name:Dt.Gecko},r=L.getFirstMatch(/gecko\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/(apple)?webkit\/537\.36/i],describe(){return{name:Dt.Blink}}},{test:[/(apple)?webkit/i],describe(e){const t={name:Dt.WebKit},r=L.getFirstMatch(/webkit\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}}];class Zc{constructor(t,r=!1){if(t==null||t==="")throw new Error("UserAgent parameter can't be empty");this._ua=t,this.parsedResult={},r!==!0&&this.parse()}getUA(){return this._ua}test(t){return t.test(this._ua)}parseBrowser(){this.parsedResult.browser={};const t=L.find(Bw,r=>{if(typeof r.test=="function")return r.test(this);if(r.test instanceof Array)return r.test.some(n=>this.test(n));throw new Error("Browser's test function is not valid")});return t&&(this.parsedResult.browser=t.describe(this.getUA())),this.parsedResult.browser}getBrowser(){return this.parsedResult.browser?this.parsedResult.browser:this.parseBrowser()}getBrowserName(t){return t?String(this.getBrowser().name).toLowerCase()||"":this.getBrowser().name||""}getBrowserVersion(){return this.getBrowser().version}getOS(){return this.parsedResult.os?this.parsedResult.os:this.parseOS()}parseOS(){this.parsedResult.os={};const t=L.find(Nw,r=>{if(typeof r.test=="function")return r.test(this);if(r.test instanceof Array)return r.test.some(n=>this.test(n));throw new Error("Browser's test function is not valid")});return t&&(this.parsedResult.os=t.describe(this.getUA())),this.parsedResult.os}getOSName(t){const{name:r}=this.getOS();return t?String(r).toLowerCase()||"":r||""}getOSVersion(){return this.getOS().version}getPlatform(){return this.parsedResult.platform?this.parsedResult.platform:this.parsePlatform()}getPlatformType(t=!1){const{type:r}=this.getPlatform();return t?String(r).toLowerCase()||"":r||""}parsePlatform(){this.parsedResult.platform={};const t=L.find(Mw,r=>{if(typeof r.test=="function")return r.test(this);if(r.test instanceof Array)return r.test.some(n=>this.test(n));throw new Error("Browser's test function is not valid")});return t&&(this.parsedResult.platform=t.describe(this.getUA())),this.parsedResult.platform}getEngine(){return this.parsedResult.engine?this.parsedResult.engine:this.parseEngine()}getEngineName(t){return t?String(this.getEngine().name).toLowerCase()||"":this.getEngine().name||""}parseEngine(){this.parsedResult.engine={};const t=L.find(Iw,r=>{if(typeof r.test=="function")return r.test(this);if(r.test instanceof Array)return r.test.some(n=>this.test(n));throw new Error("Browser's test function is not valid")});return t&&(this.parsedResult.engine=t.describe(this.getUA())),this.parsedResult.engine}parse(){return this.parseBrowser(),this.parseOS(),this.parsePlatform(),this.parseEngine(),this}getResult(){return L.assign({},this.parsedResult)}satisfies(t){const r={};let n=0;const s={};let i=0;if(Object.keys(t).forEach(a=>{const c=t[a];typeof c=="string"?(s[a]=c,i+=1):typeof c=="object"&&(r[a]=c,n+=1)}),n>0){const a=Object.keys(r),c=L.find(a,f=>this.isOS(f));if(c){const f=this.satisfies(r[c]);if(f!==void 0)return f}const u=L.find(a,f=>this.isPlatform(f));if(u){const f=this.satisfies(r[u]);if(f!==void 0)return f}}if(i>0){const a=Object.keys(s),c=L.find(a,u=>this.isBrowser(u,!0));if(c!==void 0)return this.compareVersion(s[c])}}isBrowser(t,r=!1){const n=this.getBrowserName().toLowerCase();let s=t.toLowerCase();const i=L.getBrowserTypeByAlias(s);return r&&i&&(s=i.toLowerCase()),s===n}compareVersion(t){let r=[0],n=t,s=!1;const i=this.getBrowserVersion();if(typeof i=="string")return t[0]===">"||t[0]==="<"?(n=t.substr(1),t[1]==="="?(s=!0,n=t.substr(2)):r=[],t[0]===">"?r.push(1):r.push(-1)):t[0]==="="?n=t.substr(1):t[0]==="~"&&(s=!0,n=t.substr(1)),r.indexOf(L.compareVersions(i,n,s))>-1}isOS(t){return this.getOSName(!0)===String(t).toLowerCase()}isPlatform(t){return this.getPlatformType(!0)===String(t).toLowerCase()}isEngine(t){return this.getEngineName(!0)===String(t).toLowerCase()}is(t,r=!1){return this.isBrowser(t,r)||this.isOS(t)||this.isPlatform(t)}some(t=[]){return t.some(r=>this.is(r))}}/*!
 * Bowser - a browser detector
 * https://github.com/lancedikson/bowser
 * MIT License | (c) Dustin Diaz 2012-2015
 * MIT License | (c) Denis Demchenko 2015-2019
 */class Od{static getParser(t,r=!1){if(typeof t!="string")throw new Error("UserAgent should be a string");return new Zc(t,r)}static parse(t){return new Zc(t).getResult()}static get BROWSER_MAP(){return Fd}static get ENGINE_MAP(){return Dt}static get OS_MAP(){return tt}static get PLATFORMS_MAP(){return Ce}}const Pw=({serviceId:e,clientVersion:t})=>async r=>{var o,a,c,u,f,p;const n=typeof window<"u"&&((o=window==null?void 0:window.navigator)!=null&&o.userAgent)?Od.parse(window.navigator.userAgent):void 0,s=[["aws-sdk-js",t],["ua","2.1"],[`os/${((a=n==null?void 0:n.os)==null?void 0:a.name)||"other"}`,(c=n==null?void 0:n.os)==null?void 0:c.version],["lang/js"],["md/browser",`${((u=n==null?void 0:n.browser)==null?void 0:u.name)??"unknown"}_${((f=n==null?void 0:n.browser)==null?void 0:f.version)??"unknown"}`]];e&&s.push([`api/${e}`,t]);const i=await((p=r==null?void 0:r.userAgentAppId)==null?void 0:p.call(r));return i&&s.push([`app/${i}`]),s};class Qr{constructor(t){if(this.bytes=t,t.byteLength!==8)throw new Error("Int64 buffers must be exactly 8 bytes")}static fromNumber(t){if(t>9223372036854776e3||t<-9223372036854776e3)throw new Error(`${t} is too large (or, if negative, too small) to represent as an Int64`);const r=new Uint8Array(8);for(let n=7,s=Math.abs(Math.round(t));n>-1&&s>0;n--,s/=256)r[n]=s;return t<0&&Yc(r),new Qr(r)}valueOf(){const t=this.bytes.slice(0),r=t[0]&128;return r&&Yc(t),parseInt(rt(t),16)*(r?-1:1)}toString(){return String(this.valueOf())}}function Yc(e){for(let t=0;t<8;t++)e[t]^=255;for(let t=7;t>-1&&(e[t]++,e[t]===0);t--);}class Fw{constructor(t,r){this.toUtf8=t,this.fromUtf8=r}format(t){const r=[];for(const i of Object.keys(t)){const o=this.fromUtf8(i);r.push(Uint8Array.from([o.byteLength]),o,this.formatHeaderValue(t[i]))}const n=new Uint8Array(r.reduce((i,o)=>i+o.byteLength,0));let s=0;for(const i of r)n.set(i,s),s+=i.byteLength;return n}formatHeaderValue(t){switch(t.type){case"boolean":return Uint8Array.from([t.value?0:1]);case"byte":return Uint8Array.from([2,t.value]);case"short":const r=new DataView(new ArrayBuffer(3));return r.setUint8(0,3),r.setInt16(1,t.value,!1),new Uint8Array(r.buffer);case"integer":const n=new DataView(new ArrayBuffer(5));return n.setUint8(0,4),n.setInt32(1,t.value,!1),new Uint8Array(n.buffer);case"long":const s=new Uint8Array(9);return s[0]=5,s.set(t.value.bytes,1),s;case"binary":const i=new DataView(new ArrayBuffer(3+t.value.byteLength));i.setUint8(0,6),i.setUint16(1,t.value.byteLength,!1);const o=new Uint8Array(i.buffer);return o.set(t.value,3),o;case"string":const a=this.fromUtf8(t.value),c=new DataView(new ArrayBuffer(3+a.byteLength));c.setUint8(0,7),c.setUint16(1,a.byteLength,!1);const u=new Uint8Array(c.buffer);return u.set(a,3),u;case"timestamp":const f=new Uint8Array(9);return f[0]=8,f.set(Qr.fromNumber(t.value.valueOf()).bytes,1),f;case"uuid":if(!jw.test(t.value))throw new Error(`Invalid UUID received: ${t.value}`);const p=new Uint8Array(17);return p[0]=9,p.set($u(t.value.replace(/\-/g,"")),1),p}}parse(t){const r={};let n=0;for(;n<t.byteLength;){const s=t.getUint8(n++),i=this.toUtf8(new Uint8Array(t.buffer,t.byteOffset+n,s));switch(n+=s,t.getUint8(n++)){case 0:r[i]={type:Jc,value:!0};break;case 1:r[i]={type:Jc,value:!1};break;case 2:r[i]={type:Ow,value:t.getInt8(n++)};break;case 3:r[i]={type:Dw,value:t.getInt16(n,!1)},n+=2;break;case 4:r[i]={type:Uw,value:t.getInt32(n,!1)},n+=4;break;case 5:r[i]={type:Lw,value:new Qr(new Uint8Array(t.buffer,t.byteOffset+n,8))},n+=8;break;case 6:const o=t.getUint16(n,!1);n+=2,r[i]={type:$w,value:new Uint8Array(t.buffer,t.byteOffset+n,o)},n+=o;break;case 7:const a=t.getUint16(n,!1);n+=2,r[i]={type:Hw,value:this.toUtf8(new Uint8Array(t.buffer,t.byteOffset+n,a))},n+=a;break;case 8:r[i]={type:qw,value:new Date(new Qr(new Uint8Array(t.buffer,t.byteOffset+n,8)).valueOf())},n+=8;break;case 9:const c=new Uint8Array(t.buffer,t.byteOffset+n,16);n+=16,r[i]={type:zw,value:`${rt(c.subarray(0,4))}-${rt(c.subarray(4,6))}-${rt(c.subarray(6,8))}-${rt(c.subarray(8,10))}-${rt(c.subarray(10))}`};break;default:throw new Error("Unrecognized header type tag")}}return r}}var Qc;(function(e){e[e.boolTrue=0]="boolTrue",e[e.boolFalse=1]="boolFalse",e[e.byte=2]="byte",e[e.short=3]="short",e[e.integer=4]="integer",e[e.long=5]="long",e[e.byteArray=6]="byteArray",e[e.string=7]="string",e[e.timestamp=8]="timestamp",e[e.uuid=9]="uuid"})(Qc||(Qc={}));const Jc="boolean",Ow="byte",Dw="short",Uw="integer",Lw="long",$w="binary",Hw="string",qw="timestamp",zw="uuid",jw=/^[a-f0-9]{8}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{12}$/,Dd=4,Ut=Dd*2,Qt=4,Ww=Ut+Qt*2;function Kw({byteLength:e,byteOffset:t,buffer:r}){if(e<Ww)throw new Error("Provided message too short to accommodate event stream message overhead");const n=new DataView(r,t,e),s=n.getUint32(0,!1);if(e!==s)throw new Error("Reported message length does not match received message length");const i=n.getUint32(Dd,!1),o=n.getUint32(Ut,!1),a=n.getUint32(e-Qt,!1),c=new Ln().update(new Uint8Array(r,t,Ut));if(o!==c.digest())throw new Error(`The prelude checksum specified in the message (${o}) does not match the calculated CRC32 checksum (${c.digest()})`);if(c.update(new Uint8Array(r,t+Ut,e-(Ut+Qt))),a!==c.digest())throw new Error(`The message checksum (${c.digest()}) did not match the expected value of ${a}`);return{headers:new DataView(r,t+Ut+Qt,i),body:new Uint8Array(r,t+Ut+Qt+i,s-i-(Ut+Qt+Qt))}}class Vw{constructor(t,r){this.headerMarshaller=new Fw(t,r),this.messageBuffer=[],this.isEndOfStream=!1}feed(t){this.messageBuffer.push(this.decode(t))}endOfStream(){this.isEndOfStream=!0}getMessage(){const t=this.messageBuffer.pop(),r=this.isEndOfStream;return{getMessage(){return t},isEndOfStream(){return r}}}getAvailableMessages(){const t=this.messageBuffer;this.messageBuffer=[];const r=this.isEndOfStream;return{getMessages(){return t},isEndOfStream(){return r}}}encode({headers:t,body:r}){const n=this.headerMarshaller.format(t),s=n.byteLength+r.byteLength+16,i=new Uint8Array(s),o=new DataView(i.buffer,i.byteOffset,i.byteLength),a=new Ln;return o.setUint32(0,s,!1),o.setUint32(4,n.byteLength,!1),o.setUint32(8,a.update(i.subarray(0,8)).digest(),!1),i.set(n,12),i.set(r,n.byteLength+12),o.setUint32(s-4,a.update(i.subarray(8,s-4)).digest(),!1),i}decode(t){const{headers:r,body:n}=Kw(t);return{headers:this.headerMarshaller.parse(r),body:n}}formatHeaders(t){return this.headerMarshaller.format(t)}}class Gw{constructor(t){this.options=t}[Symbol.asyncIterator](){return this.asyncIterator()}async*asyncIterator(){for await(const t of this.options.inputStream)yield this.options.decoder.decode(t)}}class Xw{constructor(t){this.options=t}[Symbol.asyncIterator](){return this.asyncIterator()}async*asyncIterator(){for await(const t of this.options.messageStream)yield this.options.encoder.encode(t);this.options.includeEndFrame&&(yield new Uint8Array(0))}}class Zw{constructor(t){this.options=t}[Symbol.asyncIterator](){return this.asyncIterator()}async*asyncIterator(){for await(const t of this.options.messageStream){const r=await this.options.deserializer(t);r!==void 0&&(yield r)}}}class Yw{constructor(t){this.options=t}[Symbol.asyncIterator](){return this.asyncIterator()}async*asyncIterator(){for await(const t of this.options.inputStream)yield this.options.serializer(t)}}function Qw(e){let t=0,r=0,n=null,s=null;const i=a=>{if(typeof a!="number")throw new Error("Attempted to allocate an event message where size was not a number: "+a);t=a,r=4,n=new Uint8Array(a),new DataView(n.buffer).setUint32(0,a,!1)},o=async function*(){const a=e[Symbol.asyncIterator]();for(;;){const{value:c,done:u}=await a.next();if(u){if(t)if(t===r)yield n;else throw new Error("Truncated event message received.");else return;return}const f=c.length;let p=0;for(;p<f;){if(!n){const w=f-p;s||(s=new Uint8Array(4));const R=Math.min(4-r,w);if(s.set(c.slice(p,p+R),r),r+=R,p+=R,r<4)break;i(new DataView(s.buffer).getUint32(0,!1)),s=null}const g=Math.min(t-r,f-p);n.set(c.slice(p,p+g),r),r+=g,p+=g,t&&t===r&&(yield n,n=null,t=0,r=0)}}};return{[Symbol.asyncIterator]:o}}function Jw(e,t){return async function(r){const{value:n}=r.headers[":message-type"];if(n==="error"){const s=new Error(r.headers[":error-message"].value||"UnknownError");throw s.name=r.headers[":error-code"].value,s}else if(n==="exception"){const s=r.headers[":exception-type"].value,i={[s]:r},o=await e(i);if(o.$unknown){const a=new Error(t(r.body));throw a.name=s,a}throw o[s]}else if(n==="event"){const s={[r.headers[":event-type"].value]:r},i=await e(s);return i.$unknown?void 0:i}else throw Error(`Unrecognizable event type: ${r.headers[":event-type"].value}`)}}let eb=class{constructor({utf8Encoder:t,utf8Decoder:r}){this.eventStreamCodec=new Vw(t,r),this.utfEncoder=t}deserialize(t,r){const n=Qw(t);return new Zw({messageStream:new Gw({inputStream:n,decoder:this.eventStreamCodec}),deserializer:Jw(r,this.utfEncoder)})}serialize(t,r){return new Xw({messageStream:new Yw({inputStream:t,serializer:r}),encoder:this.eventStreamCodec,includeEndFrame:!0})}};const tb=e=>({[Symbol.asyncIterator]:async function*(){const t=e.getReader();try{for(;;){const{done:r,value:n}=await t.read();if(r)return;yield n}}finally{t.releaseLock()}}}),rb=e=>{const t=e[Symbol.asyncIterator]();return new ReadableStream({async pull(r){const{done:n,value:s}=await t.next();if(n)return r.close();r.enqueue(s)}})};class nb{constructor({utf8Encoder:t,utf8Decoder:r}){this.universalMarshaller=new eb({utf8Decoder:r,utf8Encoder:t})}deserialize(t,r){const n=sb(t)?tb(t):t;return this.universalMarshaller.deserialize(n,r)}serialize(t,r){const n=this.universalMarshaller.serialize(t,r);return typeof ReadableStream=="function"?rb(n):n}}const sb=e=>typeof ReadableStream=="function"&&e instanceof ReadableStream,ib=e=>new nb(e);async function ob(e,t,r=1024*1024){const n=e.size;let s=0;for(;s<n;){const i=e.slice(s,Math.min(n,s+r));t(new Uint8Array(await i.arrayBuffer())),s+=i.size}}const ab=async function(t,r){const n=new t;return await ob(r,s=>{n.update(s)}),n.digest()},cb=e=>()=>Promise.reject(e),Ot=64,ub=16,lb=[1732584193,4023233417,2562383102,271733878];class db{constructor(){this.reset()}update(t){if(fb(t))return;if(this.finished)throw new Error("Attempted to update an already finished hash.");const r=hb(t);let n=0,{byteLength:s}=r;for(this.bytesHashed+=s;s>0;)this.buffer.setUint8(this.bufferLength++,r[n++]),s--,this.bufferLength===Ot&&(this.hashBuffer(),this.bufferLength=0)}async digest(){if(!this.finished){const{buffer:r,bufferLength:n,bytesHashed:s}=this,i=s*8;if(r.setUint8(this.bufferLength++,128),n%Ot>=Ot-8){for(let o=this.bufferLength;o<Ot;o++)r.setUint8(o,0);this.hashBuffer(),this.bufferLength=0}for(let o=this.bufferLength;o<Ot-8;o++)r.setUint8(o,0);r.setUint32(Ot-8,i>>>0,!0),r.setUint32(Ot-4,Math.floor(i/4294967296),!0),this.hashBuffer(),this.finished=!0}const t=new DataView(new ArrayBuffer(ub));for(let r=0;r<4;r++)t.setUint32(r*4,this.state[r],!0);return new Uint8Array(t.buffer,t.byteOffset,t.byteLength)}hashBuffer(){const{buffer:t,state:r}=this;let n=r[0],s=r[1],i=r[2],o=r[3];n=Ve(n,s,i,o,t.getUint32(0,!0),7,3614090360),o=Ve(o,n,s,i,t.getUint32(4,!0),12,3905402710),i=Ve(i,o,n,s,t.getUint32(8,!0),17,606105819),s=Ve(s,i,o,n,t.getUint32(12,!0),22,3250441966),n=Ve(n,s,i,o,t.getUint32(16,!0),7,4118548399),o=Ve(o,n,s,i,t.getUint32(20,!0),12,1200080426),i=Ve(i,o,n,s,t.getUint32(24,!0),17,2821735955),s=Ve(s,i,o,n,t.getUint32(28,!0),22,4249261313),n=Ve(n,s,i,o,t.getUint32(32,!0),7,1770035416),o=Ve(o,n,s,i,t.getUint32(36,!0),12,2336552879),i=Ve(i,o,n,s,t.getUint32(40,!0),17,4294925233),s=Ve(s,i,o,n,t.getUint32(44,!0),22,2304563134),n=Ve(n,s,i,o,t.getUint32(48,!0),7,1804603682),o=Ve(o,n,s,i,t.getUint32(52,!0),12,4254626195),i=Ve(i,o,n,s,t.getUint32(56,!0),17,2792965006),s=Ve(s,i,o,n,t.getUint32(60,!0),22,1236535329),n=Ge(n,s,i,o,t.getUint32(4,!0),5,4129170786),o=Ge(o,n,s,i,t.getUint32(24,!0),9,3225465664),i=Ge(i,o,n,s,t.getUint32(44,!0),14,643717713),s=Ge(s,i,o,n,t.getUint32(0,!0),20,3921069994),n=Ge(n,s,i,o,t.getUint32(20,!0),5,3593408605),o=Ge(o,n,s,i,t.getUint32(40,!0),9,38016083),i=Ge(i,o,n,s,t.getUint32(60,!0),14,3634488961),s=Ge(s,i,o,n,t.getUint32(16,!0),20,3889429448),n=Ge(n,s,i,o,t.getUint32(36,!0),5,568446438),o=Ge(o,n,s,i,t.getUint32(56,!0),9,3275163606),i=Ge(i,o,n,s,t.getUint32(12,!0),14,4107603335),s=Ge(s,i,o,n,t.getUint32(32,!0),20,1163531501),n=Ge(n,s,i,o,t.getUint32(52,!0),5,2850285829),o=Ge(o,n,s,i,t.getUint32(8,!0),9,4243563512),i=Ge(i,o,n,s,t.getUint32(28,!0),14,1735328473),s=Ge(s,i,o,n,t.getUint32(48,!0),20,2368359562),n=Xe(n,s,i,o,t.getUint32(20,!0),4,4294588738),o=Xe(o,n,s,i,t.getUint32(32,!0),11,2272392833),i=Xe(i,o,n,s,t.getUint32(44,!0),16,1839030562),s=Xe(s,i,o,n,t.getUint32(56,!0),23,4259657740),n=Xe(n,s,i,o,t.getUint32(4,!0),4,2763975236),o=Xe(o,n,s,i,t.getUint32(16,!0),11,1272893353),i=Xe(i,o,n,s,t.getUint32(28,!0),16,4139469664),s=Xe(s,i,o,n,t.getUint32(40,!0),23,3200236656),n=Xe(n,s,i,o,t.getUint32(52,!0),4,681279174),o=Xe(o,n,s,i,t.getUint32(0,!0),11,3936430074),i=Xe(i,o,n,s,t.getUint32(12,!0),16,3572445317),s=Xe(s,i,o,n,t.getUint32(24,!0),23,76029189),n=Xe(n,s,i,o,t.getUint32(36,!0),4,3654602809),o=Xe(o,n,s,i,t.getUint32(48,!0),11,3873151461),i=Xe(i,o,n,s,t.getUint32(60,!0),16,530742520),s=Xe(s,i,o,n,t.getUint32(8,!0),23,3299628645),n=Ze(n,s,i,o,t.getUint32(0,!0),6,4096336452),o=Ze(o,n,s,i,t.getUint32(28,!0),10,1126891415),i=Ze(i,o,n,s,t.getUint32(56,!0),15,2878612391),s=Ze(s,i,o,n,t.getUint32(20,!0),21,4237533241),n=Ze(n,s,i,o,t.getUint32(48,!0),6,1700485571),o=Ze(o,n,s,i,t.getUint32(12,!0),10,2399980690),i=Ze(i,o,n,s,t.getUint32(40,!0),15,4293915773),s=Ze(s,i,o,n,t.getUint32(4,!0),21,2240044497),n=Ze(n,s,i,o,t.getUint32(32,!0),6,1873313359),o=Ze(o,n,s,i,t.getUint32(60,!0),10,4264355552),i=Ze(i,o,n,s,t.getUint32(24,!0),15,2734768916),s=Ze(s,i,o,n,t.getUint32(52,!0),21,1309151649),n=Ze(n,s,i,o,t.getUint32(16,!0),6,4149444226),o=Ze(o,n,s,i,t.getUint32(44,!0),10,3174756917),i=Ze(i,o,n,s,t.getUint32(8,!0),15,718787259),s=Ze(s,i,o,n,t.getUint32(36,!0),21,3951481745),r[0]=n+r[0]&4294967295,r[1]=s+r[1]&4294967295,r[2]=i+r[2]&4294967295,r[3]=o+r[3]&4294967295}reset(){this.state=Uint32Array.from(lb),this.buffer=new DataView(new ArrayBuffer(Ot)),this.bufferLength=0,this.bytesHashed=0,this.finished=!1}}function as(e,t,r,n,s,i){return t=(t+e&4294967295)+(n+i&4294967295)&4294967295,(t<<s|t>>>32-s)+r&4294967295}function Ve(e,t,r,n,s,i,o){return as(t&r|~t&n,e,t,s,i,o)}function Ge(e,t,r,n,s,i,o){return as(t&n|r&~n,e,t,s,i,o)}function Xe(e,t,r,n,s,i,o){return as(t^r^n,e,t,s,i,o)}function Ze(e,t,r,n,s,i,o){return as(r^(t|~n),e,t,s,i,o)}function fb(e){return typeof e=="string"?e.length===0:e.byteLength===0}function hb(e){return typeof e=="string"?rr(e):ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(e)}const eu=typeof TextEncoder=="function"?new TextEncoder:null,pb=e=>{if(typeof e=="string"){if(eu)return eu.encode(e).byteLength;let t=e.length;for(let r=t-1;r>=0;r--){const n=e.charCodeAt(r);n>127&&n<=2047?t++:n>2047&&n<=65535&&(t+=2),n>=56320&&n<=57343&&r--}return t}else{if(typeof e.byteLength=="number")return e.byteLength;if(typeof e.size=="number")return e.size}throw new Error(`Body Length computation failed for ${e}`)},gb=e=>({apiVersion:"2006-03-01",base64Decoder:(e==null?void 0:e.base64Decoder)??Vi,base64Encoder:(e==null?void 0:e.base64Encoder)??Qn,disableHostPrefix:(e==null?void 0:e.disableHostPrefix)??!1,endpointProvider:(e==null?void 0:e.endpointProvider)??zl,extensions:(e==null?void 0:e.extensions)??[],getAwsChunkedEncodingStream:(e==null?void 0:e.getAwsChunkedEncodingStream)??Af,httpAuthSchemeProvider:(e==null?void 0:e.httpAuthSchemeProvider)??C0,httpAuthSchemes:(e==null?void 0:e.httpAuthSchemes)??[{schemeId:"aws.auth#sigv4",identityProvider:t=>t.getIdentityProvider("aws.auth#sigv4"),signer:new Ou},{schemeId:"aws.auth#sigv4a",identityProvider:t=>t.getIdentityProvider("aws.auth#sigv4a"),signer:new uf}],logger:(e==null?void 0:e.logger)??new Ji,sdkStreamMixin:(e==null?void 0:e.sdkStreamMixin)??Nf,serviceId:(e==null?void 0:e.serviceId)??"S3",signerConstructor:(e==null?void 0:e.signerConstructor)??a0,signingEscapePath:(e==null?void 0:e.signingEscapePath)??!1,urlParser:(e==null?void 0:e.urlParser)??Hn,useArnRegion:(e==null?void 0:e.useArnRegion)??!1,utf8Decoder:(e==null?void 0:e.utf8Decoder)??rr,utf8Encoder:(e==null?void 0:e.utf8Encoder)??Gi}),mb=["in-region","cross-region","mobile","standard","legacy"],yb=({defaultsMode:e}={})=>Wf(async()=>{const t=typeof e=="function"?await e():e;switch(t==null?void 0:t.toLowerCase()){case"auto":return Promise.resolve(wb()?"mobile":"standard");case"mobile":case"in-region":case"cross-region":case"standard":case"legacy":return Promise.resolve(t==null?void 0:t.toLocaleLowerCase());case void 0:return Promise.resolve("legacy");default:throw new Error(`Invalid parameter for "defaultsMode", expect ${mb.join(", ")}, got ${t}`)}}),wb=()=>{var r,n;const e=typeof window<"u"&&((r=window==null?void 0:window.navigator)!=null&&r.userAgent)?Od.parse(window.navigator.userAgent):void 0,t=(n=e==null?void 0:e.platform)==null?void 0:n.type;return t==="tablet"||t==="mobile"},bb=e=>{const t=yb(e),r=()=>t().then(Wh),n=gb(e);return{...n,...e,runtime:"browser",defaultsMode:t,bodyLengthChecker:(e==null?void 0:e.bodyLengthChecker)??pb,credentialDefaultProvider:(e==null?void 0:e.credentialDefaultProvider)??(s=>()=>Promise.reject(new Error("Credential is missing"))),defaultUserAgentProvider:(e==null?void 0:e.defaultUserAgentProvider)??Pw({serviceId:n.serviceId,clientVersion:dw.version}),eventStreamSerdeProvider:(e==null?void 0:e.eventStreamSerdeProvider)??ib,maxAttempts:(e==null?void 0:e.maxAttempts)??qn,md5:(e==null?void 0:e.md5)??db,region:(e==null?void 0:e.region)??cb("Region is missing"),requestHandler:Xi.create((e==null?void 0:e.requestHandler)??r),retryMode:(e==null?void 0:e.retryMode)??(async()=>(await r()).retryMode||Bm),sha1:(e==null?void 0:e.sha1)??bw,sha256:(e==null?void 0:e.sha256)??Tw,streamCollector:(e==null?void 0:e.streamCollector)??Uu,streamHasher:(e==null?void 0:e.streamHasher)??ab,useDualstackEndpoint:(e==null?void 0:e.useDualstackEndpoint)??(()=>Promise.resolve(fm)),useFipsEndpoint:(e==null?void 0:e.useFipsEndpoint)??(()=>Promise.resolve(hm))}},Eb=e=>{let t=async()=>{if(e.region===void 0)throw new Error("Region is missing from runtimeConfig");const r=e.region;return typeof r=="string"?r:r()};return{setRegion(r){t=r},region(){return t}}},Sb=e=>({region:e.region()}),xb=e=>{const t=e.httpAuthSchemes;let r=e.httpAuthSchemeProvider,n=e.credentials;return{setHttpAuthScheme(s){const i=t.findIndex(o=>o.schemeId===s.schemeId);i===-1?t.push(s):t.splice(i,1,s)},httpAuthSchemes(){return t},setHttpAuthSchemeProvider(s){r=s},httpAuthSchemeProvider(){return r},setCredentials(s){n=s},credentials(){return n}}},vb=e=>({httpAuthSchemes:e.httpAuthSchemes(),httpAuthSchemeProvider:e.httpAuthSchemeProvider(),credentials:e.credentials()}),Cn=e=>e,Ab=(e,t)=>{const r={...Cn(Eb(e)),...Cn(Zh(e)),...Cn(Qd(e)),...Cn(xb(e))};return t.forEach(n=>n.configure(r)),{...e,...Sb(r),...Yh(r),...Jd(r),...vb(r)}};class Cb extends wh{constructor(...[r]){const n=bb(r||{}),s=_0(n),i=kg(s),o=Op(i),a=Ym(o),c=pm(a),u=c,f=km(u),p=gm(f),g=R0(p),w=gg(g,{session:[()=>this,Ky]}),R=Ab(w,(r==null?void 0:r.extensions)||[]);super(R);X(this,"config");this.config=R,this.middlewareStack.use(dm(this.config)),this.middlewareStack.use(s0(this.config)),this.middlewareStack.use(wm(this.config)),this.middlewareStack.use(Lp(this.config)),this.middlewareStack.use(qp(this.config)),this.middlewareStack.use(Vp(this.config)),this.middlewareStack.use(hf(this.config,{httpAuthSchemeParametersProvider:x0,identityProviderConfigProvider:async k=>new $f({"aws.auth#sigv4":k.credentials,"aws.auth#sigv4a":k.credentials})})),this.middlewareStack.use(Ef(this.config)),this.middlewareStack.use(Rg(this.config)),this.middlewareStack.use(nf(this.config)),this.middlewareStack.use(rg(this.config)),this.middlewareStack.use(ug(this.config)),this.middlewareStack.use(pg(this.config))}destroy(){super.destroy()}}class Rb extends Wt.classBuilder().ep({...cr,Bucket:{type:"contextParams",name:"Bucket"},Key:{type:"contextParams",name:"Key"}}).m(function(t,r,n,s){return[nr(n,this.serialize,this.deserialize),or(n,t.getEndpointParameterInstructions()),ir(n)]}).s("AmazonS3","AbortMultipartUpload",{}).n("S3Client","AbortMultipartUploadCommand").f(void 0,void 0).ser(z0).de(Z0).build(){}function _b(e){return t=>async r=>{const n={...r.input},s=[{target:"SSECustomerKey",hash:"SSECustomerKeyMD5"},{target:"CopySourceSSECustomerKey",hash:"CopySourceSSECustomerKeyMD5"}];for(const i of s){const o=n[i.target];if(o){let a;typeof o=="string"?kb(o,e)?a=e.base64Decoder(o):(a=e.utf8Decoder(o),n[i.target]=e.base64Encoder(a)):(a=ArrayBuffer.isView(o)?new Uint8Array(o.buffer,o.byteOffset,o.byteLength):new Uint8Array(o),n[i.target]=e.base64Encoder(a));const c=new e.md5;c.update(a),n[i.hash]=e.base64Encoder(await c.digest())}}return t({...r,input:n})}}const Tb={name:"ssecMiddleware",step:"initialize",tags:["SSE"],override:!0},cs=e=>({applyToStack:t=>{t.add(_b(e),Tb)}});function kb(e,t){if(!/^(?:[A-Za-z0-9+/]{4})*([A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(e))return!1;try{return t.base64Decoder(e).length===32}catch{return!1}}class Bb extends Wt.classBuilder().ep({...cr,Bucket:{type:"contextParams",name:"Bucket"},Key:{type:"contextParams",name:"Key"}}).m(function(t,r,n,s){return[nr(n,this.serialize,this.deserialize),or(n,t.getEndpointParameterInstructions()),ir(n),cs(n)]}).s("AmazonS3","CompleteMultipartUpload",{}).n("S3Client","CompleteMultipartUploadCommand").f(B0,k0).ser(j0).de(Y0).build(){}class Nb extends Wt.classBuilder().ep({...cr,Bucket:{type:"contextParams",name:"Bucket"},Key:{type:"contextParams",name:"Key"}}).m(function(t,r,n,s){return[nr(n,this.serialize,this.deserialize),or(n,t.getEndpointParameterInstructions()),ir(n),cs(n)]}).s("AmazonS3","CreateMultipartUpload",{}).n("S3Client","CreateMultipartUploadCommand").f(M0,N0).ser(W0).de(Q0).build(){}class tu extends Wt.classBuilder().ep({...cr,Bucket:{type:"contextParams",name:"Bucket"},Key:{type:"contextParams",name:"Key"}}).m(function(t,r,n,s){return[nr(n,this.serialize,this.deserialize),or(n,t.getEndpointParameterInstructions()),io(n,{requestAlgorithmMember:{httpHeader:"x-amz-sdk-checksum-algorithm",name:"ChecksumAlgorithm"},requestChecksumRequired:!1}),Yp(),ir(n),cs(n)]}).s("AmazonS3","PutObject",{}).n("S3Client","PutObjectCommand").f($0,L0).ser(V0).de(ey).build(){}class Mb extends Wt.classBuilder().ep({...cr,Bucket:{type:"contextParams",name:"Bucket"}}).m(function(t,r,n,s){return[nr(n,this.serialize,this.deserialize),or(n,t.getEndpointParameterInstructions()),io(n,{requestAlgorithmMember:{httpHeader:"x-amz-sdk-checksum-algorithm",name:"ChecksumAlgorithm"},requestChecksumRequired:!0}),ir(n)]}).s("AmazonS3","PutObjectTagging",{}).n("S3Client","PutObjectTaggingCommand").f(void 0,void 0).ser(G0).de(ty).build(){}class Ib extends Wt.classBuilder().ep({...cr,Bucket:{type:"contextParams",name:"Bucket"},Key:{type:"contextParams",name:"Key"}}).m(function(t,r,n,s){return[nr(n,this.serialize,this.deserialize),or(n,t.getEndpointParameterInstructions()),io(n,{requestAlgorithmMember:{httpHeader:"x-amz-sdk-checksum-algorithm",name:"ChecksumAlgorithm"},requestChecksumRequired:!1}),ir(n),cs(n)]}).s("AmazonS3","UploadPart",{}).n("S3Client","UploadPartCommand").f(q0,H0).ser(X0).de(ry).build(){}class Pb{constructor(){this.onabort=null,this._aborted=!1,Object.defineProperty(this,"_aborted",{value:!1,writable:!0})}get aborted(){return this._aborted}abort(){this._aborted=!0,this.onabort&&(this.onabort(this),this.onabort=null)}}let Fb=class{constructor(){this.signal=new Pb}abort(){this.signal.abort()}};var Rn={exports:{}},ru;function us(){if(ru)return Rn.exports;ru=1;var e=typeof Reflect=="object"?Reflect:null,t=e&&typeof e.apply=="function"?e.apply:function(S,b,F){return Function.prototype.apply.call(S,b,F)},r;e&&typeof e.ownKeys=="function"?r=e.ownKeys:Object.getOwnPropertySymbols?r=function(S){return Object.getOwnPropertyNames(S).concat(Object.getOwnPropertySymbols(S))}:r=function(S){return Object.getOwnPropertyNames(S)};function n(m){console&&console.warn&&console.warn(m)}var s=Number.isNaN||function(S){return S!==S};function i(){i.init.call(this)}Rn.exports=i,Rn.exports.once=h,i.EventEmitter=i,i.prototype._events=void 0,i.prototype._eventsCount=0,i.prototype._maxListeners=void 0;var o=10;function a(m){if(typeof m!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof m)}Object.defineProperty(i,"defaultMaxListeners",{enumerable:!0,get:function(){return o},set:function(m){if(typeof m!="number"||m<0||s(m))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+m+".");o=m}}),i.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},i.prototype.setMaxListeners=function(S){if(typeof S!="number"||S<0||s(S))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+S+".");return this._maxListeners=S,this};function c(m){return m._maxListeners===void 0?i.defaultMaxListeners:m._maxListeners}i.prototype.getMaxListeners=function(){return c(this)},i.prototype.emit=function(S){for(var b=[],F=1;F<arguments.length;F++)b.push(arguments[F]);var I=S==="error",M=this._events;if(M!==void 0)I=I&&M.error===void 0;else if(!I)return!1;if(I){var V;if(b.length>0&&(V=b[0]),V instanceof Error)throw V;var G=new Error("Unhandled error."+(V?" ("+V.message+")":""));throw G.context=V,G}var q=M[S];if(q===void 0)return!1;if(typeof q=="function")t(q,this,b);else for(var ie=q.length,oe=R(q,ie),F=0;F<ie;++F)t(oe[F],this,b);return!0};function u(m,S,b,F){var I,M,V;if(a(b),M=m._events,M===void 0?(M=m._events=Object.create(null),m._eventsCount=0):(M.newListener!==void 0&&(m.emit("newListener",S,b.listener?b.listener:b),M=m._events),V=M[S]),V===void 0)V=M[S]=b,++m._eventsCount;else if(typeof V=="function"?V=M[S]=F?[b,V]:[V,b]:F?V.unshift(b):V.push(b),I=c(m),I>0&&V.length>I&&!V.warned){V.warned=!0;var G=new Error("Possible EventEmitter memory leak detected. "+V.length+" "+String(S)+" listeners added. Use emitter.setMaxListeners() to increase limit");G.name="MaxListenersExceededWarning",G.emitter=m,G.type=S,G.count=V.length,n(G)}return m}i.prototype.addListener=function(S,b){return u(this,S,b,!1)},i.prototype.on=i.prototype.addListener,i.prototype.prependListener=function(S,b){return u(this,S,b,!0)};function f(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function p(m,S,b){var F={fired:!1,wrapFn:void 0,target:m,type:S,listener:b},I=f.bind(F);return I.listener=b,F.wrapFn=I,I}i.prototype.once=function(S,b){return a(b),this.on(S,p(this,S,b)),this},i.prototype.prependOnceListener=function(S,b){return a(b),this.prependListener(S,p(this,S,b)),this},i.prototype.removeListener=function(S,b){var F,I,M,V,G;if(a(b),I=this._events,I===void 0)return this;if(F=I[S],F===void 0)return this;if(F===b||F.listener===b)--this._eventsCount===0?this._events=Object.create(null):(delete I[S],I.removeListener&&this.emit("removeListener",S,F.listener||b));else if(typeof F!="function"){for(M=-1,V=F.length-1;V>=0;V--)if(F[V]===b||F[V].listener===b){G=F[V].listener,M=V;break}if(M<0)return this;M===0?F.shift():k(F,M),F.length===1&&(I[S]=F[0]),I.removeListener!==void 0&&this.emit("removeListener",S,G||b)}return this},i.prototype.off=i.prototype.removeListener,i.prototype.removeAllListeners=function(S){var b,F,I;if(F=this._events,F===void 0)return this;if(F.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):F[S]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete F[S]),this;if(arguments.length===0){var M=Object.keys(F),V;for(I=0;I<M.length;++I)V=M[I],V!=="removeListener"&&this.removeAllListeners(V);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(b=F[S],typeof b=="function")this.removeListener(S,b);else if(b!==void 0)for(I=b.length-1;I>=0;I--)this.removeListener(S,b[I]);return this};function g(m,S,b){var F=m._events;if(F===void 0)return[];var I=F[S];return I===void 0?[]:typeof I=="function"?b?[I.listener||I]:[I]:b?_(I):R(I,I.length)}i.prototype.listeners=function(S){return g(this,S,!0)},i.prototype.rawListeners=function(S){return g(this,S,!1)},i.listenerCount=function(m,S){return typeof m.listenerCount=="function"?m.listenerCount(S):w.call(m,S)},i.prototype.listenerCount=w;function w(m){var S=this._events;if(S!==void 0){var b=S[m];if(typeof b=="function")return 1;if(b!==void 0)return b.length}return 0}i.prototype.eventNames=function(){return this._eventsCount>0?r(this._events):[]};function R(m,S){for(var b=new Array(S),F=0;F<S;++F)b[F]=m[F];return b}function k(m,S){for(;S+1<m.length;S++)m[S]=m[S+1];m.pop()}function _(m){for(var S=new Array(m.length),b=0;b<S.length;++b)S[b]=m[b].listener||m[b];return S}function h(m,S){return new Promise(function(b,F){function I(V){m.removeListener(S,M),F(V)}function M(){typeof m.removeListener=="function"&&m.removeListener("error",I),b([].slice.call(arguments))}B(m,S,M,{once:!0}),S!=="error"&&E(m,I,{once:!0})})}function E(m,S,b){typeof m.on=="function"&&B(m,"error",S,b)}function B(m,S,b,F){if(typeof m.on=="function")F.once?m.once(S,b):m.on(S,b);else if(typeof m.addEventListener=="function")m.addEventListener(S,function I(M){F.once&&m.removeEventListener(S,I),b(M)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof m)}return Rn.exports}var ci=us(),ui={},Kr={},nu;function Ob(){if(nu)return Kr;nu=1,Kr.byteLength=a,Kr.toByteArray=u,Kr.fromByteArray=g;for(var e=[],t=[],r=typeof Uint8Array<"u"?Uint8Array:Array,n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,i=n.length;s<i;++s)e[s]=n[s],t[n.charCodeAt(s)]=s;t[45]=62,t[95]=63;function o(w){var R=w.length;if(R%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var k=w.indexOf("=");k===-1&&(k=R);var _=k===R?0:4-k%4;return[k,_]}function a(w){var R=o(w),k=R[0],_=R[1];return(k+_)*3/4-_}function c(w,R,k){return(R+k)*3/4-k}function u(w){var R,k=o(w),_=k[0],h=k[1],E=new r(c(w,_,h)),B=0,m=h>0?_-4:_,S;for(S=0;S<m;S+=4)R=t[w.charCodeAt(S)]<<18|t[w.charCodeAt(S+1)]<<12|t[w.charCodeAt(S+2)]<<6|t[w.charCodeAt(S+3)],E[B++]=R>>16&255,E[B++]=R>>8&255,E[B++]=R&255;return h===2&&(R=t[w.charCodeAt(S)]<<2|t[w.charCodeAt(S+1)]>>4,E[B++]=R&255),h===1&&(R=t[w.charCodeAt(S)]<<10|t[w.charCodeAt(S+1)]<<4|t[w.charCodeAt(S+2)]>>2,E[B++]=R>>8&255,E[B++]=R&255),E}function f(w){return e[w>>18&63]+e[w>>12&63]+e[w>>6&63]+e[w&63]}function p(w,R,k){for(var _,h=[],E=R;E<k;E+=3)_=(w[E]<<16&16711680)+(w[E+1]<<8&65280)+(w[E+2]&255),h.push(f(_));return h.join("")}function g(w){for(var R,k=w.length,_=k%3,h=[],E=16383,B=0,m=k-_;B<m;B+=E)h.push(p(w,B,B+E>m?m:B+E));return _===1?(R=w[k-1],h.push(e[R>>2]+e[R<<4&63]+"==")):_===2&&(R=(w[k-2]<<8)+w[k-1],h.push(e[R>>10]+e[R>>4&63]+e[R<<2&63]+"=")),h.join("")}return Kr}var _n={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */var su;function Db(){return su||(su=1,_n.read=function(e,t,r,n,s){var i,o,a=s*8-n-1,c=(1<<a)-1,u=c>>1,f=-7,p=r?s-1:0,g=r?-1:1,w=e[t+p];for(p+=g,i=w&(1<<-f)-1,w>>=-f,f+=a;f>0;i=i*256+e[t+p],p+=g,f-=8);for(o=i&(1<<-f)-1,i>>=-f,f+=n;f>0;o=o*256+e[t+p],p+=g,f-=8);if(i===0)i=1-u;else{if(i===c)return o?NaN:(w?-1:1)*(1/0);o=o+Math.pow(2,n),i=i-u}return(w?-1:1)*o*Math.pow(2,i-n)},_n.write=function(e,t,r,n,s,i){var o,a,c,u=i*8-s-1,f=(1<<u)-1,p=f>>1,g=s===23?Math.pow(2,-24)-Math.pow(2,-77):0,w=n?0:i-1,R=n?1:-1,k=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,o=f):(o=Math.floor(Math.log(t)/Math.LN2),t*(c=Math.pow(2,-o))<1&&(o--,c*=2),o+p>=1?t+=g/c:t+=g*Math.pow(2,1-p),t*c>=2&&(o++,c/=2),o+p>=f?(a=0,o=f):o+p>=1?(a=(t*c-1)*Math.pow(2,s),o=o+p):(a=t*Math.pow(2,p-1)*Math.pow(2,s),o=0));s>=8;e[r+w]=a&255,w+=R,a/=256,s-=8);for(o=o<<s|a,u+=s;u>0;e[r+w]=o&255,w+=R,o/=256,u-=8);e[r+w-R]|=k*128}),_n}/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */var iu;function mn(){return iu||(iu=1,function(e){var t=Ob(),r=Db(),n=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;e.Buffer=a,e.SlowBuffer=h,e.INSPECT_MAX_BYTES=50;var s=2147483647;e.kMaxLength=s,a.TYPED_ARRAY_SUPPORT=i(),!a.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function i(){try{var y=new Uint8Array(1),l={foo:function(){return 42}};return Object.setPrototypeOf(l,Uint8Array.prototype),Object.setPrototypeOf(y,l),y.foo()===42}catch{return!1}}Object.defineProperty(a.prototype,"parent",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.buffer}}),Object.defineProperty(a.prototype,"offset",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.byteOffset}});function o(y){if(y>s)throw new RangeError('The value "'+y+'" is invalid for option "size"');var l=new Uint8Array(y);return Object.setPrototypeOf(l,a.prototype),l}function a(y,l,d){if(typeof y=="number"){if(typeof l=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return p(y)}return c(y,l,d)}a.poolSize=8192;function c(y,l,d){if(typeof y=="string")return g(y,l);if(ArrayBuffer.isView(y))return w(y);if(y==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof y);if($(y,ArrayBuffer)||y&&$(y.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&($(y,SharedArrayBuffer)||y&&$(y.buffer,SharedArrayBuffer)))return R(y,l,d);if(typeof y=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var v=y.valueOf&&y.valueOf();if(v!=null&&v!==y)return a.from(v,l,d);var N=k(y);if(N)return N;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof y[Symbol.toPrimitive]=="function")return a.from(y[Symbol.toPrimitive]("string"),l,d);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof y)}a.from=function(y,l,d){return c(y,l,d)},Object.setPrototypeOf(a.prototype,Uint8Array.prototype),Object.setPrototypeOf(a,Uint8Array);function u(y){if(typeof y!="number")throw new TypeError('"size" argument must be of type number');if(y<0)throw new RangeError('The value "'+y+'" is invalid for option "size"')}function f(y,l,d){return u(y),y<=0?o(y):l!==void 0?typeof d=="string"?o(y).fill(l,d):o(y).fill(l):o(y)}a.alloc=function(y,l,d){return f(y,l,d)};function p(y){return u(y),o(y<0?0:_(y)|0)}a.allocUnsafe=function(y){return p(y)},a.allocUnsafeSlow=function(y){return p(y)};function g(y,l){if((typeof l!="string"||l==="")&&(l="utf8"),!a.isEncoding(l))throw new TypeError("Unknown encoding: "+l);var d=E(y,l)|0,v=o(d),N=v.write(y,l);return N!==d&&(v=v.slice(0,N)),v}function w(y){for(var l=y.length<0?0:_(y.length)|0,d=o(l),v=0;v<l;v+=1)d[v]=y[v]&255;return d}function R(y,l,d){if(l<0||y.byteLength<l)throw new RangeError('"offset" is outside of buffer bounds');if(y.byteLength<l+(d||0))throw new RangeError('"length" is outside of buffer bounds');var v;return l===void 0&&d===void 0?v=new Uint8Array(y):d===void 0?v=new Uint8Array(y,l):v=new Uint8Array(y,l,d),Object.setPrototypeOf(v,a.prototype),v}function k(y){if(a.isBuffer(y)){var l=_(y.length)|0,d=o(l);return d.length===0||y.copy(d,0,0,l),d}if(y.length!==void 0)return typeof y.length!="number"||J(y.length)?o(0):w(y);if(y.type==="Buffer"&&Array.isArray(y.data))return w(y.data)}function _(y){if(y>=s)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s.toString(16)+" bytes");return y|0}function h(y){return+y!=y&&(y=0),a.alloc(+y)}a.isBuffer=function(l){return l!=null&&l._isBuffer===!0&&l!==a.prototype},a.compare=function(l,d){if($(l,Uint8Array)&&(l=a.from(l,l.offset,l.byteLength)),$(d,Uint8Array)&&(d=a.from(d,d.offset,d.byteLength)),!a.isBuffer(l)||!a.isBuffer(d))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(l===d)return 0;for(var v=l.length,N=d.length,z=0,W=Math.min(v,N);z<W;++z)if(l[z]!==d[z]){v=l[z],N=d[z];break}return v<N?-1:N<v?1:0},a.isEncoding=function(l){switch(String(l).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},a.concat=function(l,d){if(!Array.isArray(l))throw new TypeError('"list" argument must be an Array of Buffers');if(l.length===0)return a.alloc(0);var v;if(d===void 0)for(d=0,v=0;v<l.length;++v)d+=l[v].length;var N=a.allocUnsafe(d),z=0;for(v=0;v<l.length;++v){var W=l[v];if($(W,Uint8Array)&&(W=a.from(W)),!a.isBuffer(W))throw new TypeError('"list" argument must be an Array of Buffers');W.copy(N,z),z+=W.length}return N};function E(y,l){if(a.isBuffer(y))return y.length;if(ArrayBuffer.isView(y)||$(y,ArrayBuffer))return y.byteLength;if(typeof y!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof y);var d=y.length,v=arguments.length>2&&arguments[2]===!0;if(!v&&d===0)return 0;for(var N=!1;;)switch(l){case"ascii":case"latin1":case"binary":return d;case"utf8":case"utf-8":return K(y).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return d*2;case"hex":return d>>>1;case"base64":return x(y).length;default:if(N)return v?-1:K(y).length;l=(""+l).toLowerCase(),N=!0}}a.byteLength=E;function B(y,l,d){var v=!1;if((l===void 0||l<0)&&(l=0),l>this.length||((d===void 0||d>this.length)&&(d=this.length),d<=0)||(d>>>=0,l>>>=0,d<=l))return"";for(y||(y="utf8");;)switch(y){case"hex":return lt(this,l,d);case"utf8":case"utf-8":return oe(this,l,d);case"ascii":return ut(this,l,d);case"latin1":case"binary":return Oe(this,l,d);case"base64":return ie(this,l,d);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return wt(this,l,d);default:if(v)throw new TypeError("Unknown encoding: "+y);y=(y+"").toLowerCase(),v=!0}}a.prototype._isBuffer=!0;function m(y,l,d){var v=y[l];y[l]=y[d],y[d]=v}a.prototype.swap16=function(){var l=this.length;if(l%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var d=0;d<l;d+=2)m(this,d,d+1);return this},a.prototype.swap32=function(){var l=this.length;if(l%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var d=0;d<l;d+=4)m(this,d,d+3),m(this,d+1,d+2);return this},a.prototype.swap64=function(){var l=this.length;if(l%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var d=0;d<l;d+=8)m(this,d,d+7),m(this,d+1,d+6),m(this,d+2,d+5),m(this,d+3,d+4);return this},a.prototype.toString=function(){var l=this.length;return l===0?"":arguments.length===0?oe(this,0,l):B.apply(this,arguments)},a.prototype.toLocaleString=a.prototype.toString,a.prototype.equals=function(l){if(!a.isBuffer(l))throw new TypeError("Argument must be a Buffer");return this===l?!0:a.compare(this,l)===0},a.prototype.inspect=function(){var l="",d=e.INSPECT_MAX_BYTES;return l=this.toString("hex",0,d).replace(/(.{2})/g,"$1 ").trim(),this.length>d&&(l+=" ... "),"<Buffer "+l+">"},n&&(a.prototype[n]=a.prototype.inspect),a.prototype.compare=function(l,d,v,N,z){if($(l,Uint8Array)&&(l=a.from(l,l.offset,l.byteLength)),!a.isBuffer(l))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof l);if(d===void 0&&(d=0),v===void 0&&(v=l?l.length:0),N===void 0&&(N=0),z===void 0&&(z=this.length),d<0||v>l.length||N<0||z>this.length)throw new RangeError("out of range index");if(N>=z&&d>=v)return 0;if(N>=z)return-1;if(d>=v)return 1;if(d>>>=0,v>>>=0,N>>>=0,z>>>=0,this===l)return 0;for(var W=z-N,ue=v-d,he=Math.min(W,ue),ge=this.slice(N,z),Ae=l.slice(d,v),pe=0;pe<he;++pe)if(ge[pe]!==Ae[pe]){W=ge[pe],ue=Ae[pe];break}return W<ue?-1:ue<W?1:0};function S(y,l,d,v,N){if(y.length===0)return-1;if(typeof d=="string"?(v=d,d=0):d>2147483647?d=2147483647:d<-2147483648&&(d=-2147483648),d=+d,J(d)&&(d=N?0:y.length-1),d<0&&(d=y.length+d),d>=y.length){if(N)return-1;d=y.length-1}else if(d<0)if(N)d=0;else return-1;if(typeof l=="string"&&(l=a.from(l,v)),a.isBuffer(l))return l.length===0?-1:b(y,l,d,v,N);if(typeof l=="number")return l=l&255,typeof Uint8Array.prototype.indexOf=="function"?N?Uint8Array.prototype.indexOf.call(y,l,d):Uint8Array.prototype.lastIndexOf.call(y,l,d):b(y,[l],d,v,N);throw new TypeError("val must be string, number or Buffer")}function b(y,l,d,v,N){var z=1,W=y.length,ue=l.length;if(v!==void 0&&(v=String(v).toLowerCase(),v==="ucs2"||v==="ucs-2"||v==="utf16le"||v==="utf-16le")){if(y.length<2||l.length<2)return-1;z=2,W/=2,ue/=2,d/=2}function he(Uo,Lo){return z===1?Uo[Lo]:Uo.readUInt16BE(Lo*z)}var ge;if(N){var Ae=-1;for(ge=d;ge<W;ge++)if(he(y,ge)===he(l,Ae===-1?0:ge-Ae)){if(Ae===-1&&(Ae=ge),ge-Ae+1===ue)return Ae*z}else Ae!==-1&&(ge-=ge-Ae),Ae=-1}else for(d+ue>W&&(d=W-ue),ge=d;ge>=0;ge--){for(var pe=!0,ht=0;ht<ue;ht++)if(he(y,ge+ht)!==he(l,ht)){pe=!1;break}if(pe)return ge}return-1}a.prototype.includes=function(l,d,v){return this.indexOf(l,d,v)!==-1},a.prototype.indexOf=function(l,d,v){return S(this,l,d,v,!0)},a.prototype.lastIndexOf=function(l,d,v){return S(this,l,d,v,!1)};function F(y,l,d,v){d=Number(d)||0;var N=y.length-d;v?(v=Number(v),v>N&&(v=N)):v=N;var z=l.length;v>z/2&&(v=z/2);for(var W=0;W<v;++W){var ue=parseInt(l.substr(W*2,2),16);if(J(ue))return W;y[d+W]=ue}return W}function I(y,l,d,v){return A(K(l,y.length-d),y,d,v)}function M(y,l,d,v){return A(re(l),y,d,v)}function V(y,l,d,v){return M(y,l,d,v)}function G(y,l,d,v){return A(x(l),y,d,v)}function q(y,l,d,v){return A(ce(l,y.length-d),y,d,v)}a.prototype.write=function(l,d,v,N){if(d===void 0)N="utf8",v=this.length,d=0;else if(v===void 0&&typeof d=="string")N=d,v=this.length,d=0;else if(isFinite(d))d=d>>>0,isFinite(v)?(v=v>>>0,N===void 0&&(N="utf8")):(N=v,v=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var z=this.length-d;if((v===void 0||v>z)&&(v=z),l.length>0&&(v<0||d<0)||d>this.length)throw new RangeError("Attempt to write outside buffer bounds");N||(N="utf8");for(var W=!1;;)switch(N){case"hex":return F(this,l,d,v);case"utf8":case"utf-8":return I(this,l,d,v);case"ascii":return M(this,l,d,v);case"latin1":case"binary":return V(this,l,d,v);case"base64":return G(this,l,d,v);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return q(this,l,d,v);default:if(W)throw new TypeError("Unknown encoding: "+N);N=(""+N).toLowerCase(),W=!0}},a.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function ie(y,l,d){return l===0&&d===y.length?t.fromByteArray(y):t.fromByteArray(y.slice(l,d))}function oe(y,l,d){d=Math.min(y.length,d);for(var v=[],N=l;N<d;){var z=y[N],W=null,ue=z>239?4:z>223?3:z>191?2:1;if(N+ue<=d){var he,ge,Ae,pe;switch(ue){case 1:z<128&&(W=z);break;case 2:he=y[N+1],(he&192)===128&&(pe=(z&31)<<6|he&63,pe>127&&(W=pe));break;case 3:he=y[N+1],ge=y[N+2],(he&192)===128&&(ge&192)===128&&(pe=(z&15)<<12|(he&63)<<6|ge&63,pe>2047&&(pe<55296||pe>57343)&&(W=pe));break;case 4:he=y[N+1],ge=y[N+2],Ae=y[N+3],(he&192)===128&&(ge&192)===128&&(Ae&192)===128&&(pe=(z&15)<<18|(he&63)<<12|(ge&63)<<6|Ae&63,pe>65535&&pe<1114112&&(W=pe))}}W===null?(W=65533,ue=1):W>65535&&(W-=65536,v.push(W>>>10&1023|55296),W=56320|W&1023),v.push(W),N+=ue}return Mt(v)}var Fe=4096;function Mt(y){var l=y.length;if(l<=Fe)return String.fromCharCode.apply(String,y);for(var d="",v=0;v<l;)d+=String.fromCharCode.apply(String,y.slice(v,v+=Fe));return d}function ut(y,l,d){var v="";d=Math.min(y.length,d);for(var N=l;N<d;++N)v+=String.fromCharCode(y[N]&127);return v}function Oe(y,l,d){var v="";d=Math.min(y.length,d);for(var N=l;N<d;++N)v+=String.fromCharCode(y[N]);return v}function lt(y,l,d){var v=y.length;(!l||l<0)&&(l=0),(!d||d<0||d>v)&&(d=v);for(var N="",z=l;z<d;++z)N+=xe[y[z]];return N}function wt(y,l,d){for(var v=y.slice(l,d),N="",z=0;z<v.length;z+=2)N+=String.fromCharCode(v[z]+v[z+1]*256);return N}a.prototype.slice=function(l,d){var v=this.length;l=~~l,d=d===void 0?v:~~d,l<0?(l+=v,l<0&&(l=0)):l>v&&(l=v),d<0?(d+=v,d<0&&(d=0)):d>v&&(d=v),d<l&&(d=l);var N=this.subarray(l,d);return Object.setPrototypeOf(N,a.prototype),N};function ve(y,l,d){if(y%1!==0||y<0)throw new RangeError("offset is not uint");if(y+l>d)throw new RangeError("Trying to access beyond buffer length")}a.prototype.readUIntLE=function(l,d,v){l=l>>>0,d=d>>>0,v||ve(l,d,this.length);for(var N=this[l],z=1,W=0;++W<d&&(z*=256);)N+=this[l+W]*z;return N},a.prototype.readUIntBE=function(l,d,v){l=l>>>0,d=d>>>0,v||ve(l,d,this.length);for(var N=this[l+--d],z=1;d>0&&(z*=256);)N+=this[l+--d]*z;return N},a.prototype.readUInt8=function(l,d){return l=l>>>0,d||ve(l,1,this.length),this[l]},a.prototype.readUInt16LE=function(l,d){return l=l>>>0,d||ve(l,2,this.length),this[l]|this[l+1]<<8},a.prototype.readUInt16BE=function(l,d){return l=l>>>0,d||ve(l,2,this.length),this[l]<<8|this[l+1]},a.prototype.readUInt32LE=function(l,d){return l=l>>>0,d||ve(l,4,this.length),(this[l]|this[l+1]<<8|this[l+2]<<16)+this[l+3]*16777216},a.prototype.readUInt32BE=function(l,d){return l=l>>>0,d||ve(l,4,this.length),this[l]*16777216+(this[l+1]<<16|this[l+2]<<8|this[l+3])},a.prototype.readIntLE=function(l,d,v){l=l>>>0,d=d>>>0,v||ve(l,d,this.length);for(var N=this[l],z=1,W=0;++W<d&&(z*=256);)N+=this[l+W]*z;return z*=128,N>=z&&(N-=Math.pow(2,8*d)),N},a.prototype.readIntBE=function(l,d,v){l=l>>>0,d=d>>>0,v||ve(l,d,this.length);for(var N=d,z=1,W=this[l+--N];N>0&&(z*=256);)W+=this[l+--N]*z;return z*=128,W>=z&&(W-=Math.pow(2,8*d)),W},a.prototype.readInt8=function(l,d){return l=l>>>0,d||ve(l,1,this.length),this[l]&128?(255-this[l]+1)*-1:this[l]},a.prototype.readInt16LE=function(l,d){l=l>>>0,d||ve(l,2,this.length);var v=this[l]|this[l+1]<<8;return v&32768?v|4294901760:v},a.prototype.readInt16BE=function(l,d){l=l>>>0,d||ve(l,2,this.length);var v=this[l+1]|this[l]<<8;return v&32768?v|4294901760:v},a.prototype.readInt32LE=function(l,d){return l=l>>>0,d||ve(l,4,this.length),this[l]|this[l+1]<<8|this[l+2]<<16|this[l+3]<<24},a.prototype.readInt32BE=function(l,d){return l=l>>>0,d||ve(l,4,this.length),this[l]<<24|this[l+1]<<16|this[l+2]<<8|this[l+3]},a.prototype.readFloatLE=function(l,d){return l=l>>>0,d||ve(l,4,this.length),r.read(this,l,!0,23,4)},a.prototype.readFloatBE=function(l,d){return l=l>>>0,d||ve(l,4,this.length),r.read(this,l,!1,23,4)},a.prototype.readDoubleLE=function(l,d){return l=l>>>0,d||ve(l,8,this.length),r.read(this,l,!0,52,8)},a.prototype.readDoubleBE=function(l,d){return l=l>>>0,d||ve(l,8,this.length),r.read(this,l,!1,52,8)};function De(y,l,d,v,N,z){if(!a.isBuffer(y))throw new TypeError('"buffer" argument must be a Buffer instance');if(l>N||l<z)throw new RangeError('"value" argument is out of bounds');if(d+v>y.length)throw new RangeError("Index out of range")}a.prototype.writeUIntLE=function(l,d,v,N){if(l=+l,d=d>>>0,v=v>>>0,!N){var z=Math.pow(2,8*v)-1;De(this,l,d,v,z,0)}var W=1,ue=0;for(this[d]=l&255;++ue<v&&(W*=256);)this[d+ue]=l/W&255;return d+v},a.prototype.writeUIntBE=function(l,d,v,N){if(l=+l,d=d>>>0,v=v>>>0,!N){var z=Math.pow(2,8*v)-1;De(this,l,d,v,z,0)}var W=v-1,ue=1;for(this[d+W]=l&255;--W>=0&&(ue*=256);)this[d+W]=l/ue&255;return d+v},a.prototype.writeUInt8=function(l,d,v){return l=+l,d=d>>>0,v||De(this,l,d,1,255,0),this[d]=l&255,d+1},a.prototype.writeUInt16LE=function(l,d,v){return l=+l,d=d>>>0,v||De(this,l,d,2,65535,0),this[d]=l&255,this[d+1]=l>>>8,d+2},a.prototype.writeUInt16BE=function(l,d,v){return l=+l,d=d>>>0,v||De(this,l,d,2,65535,0),this[d]=l>>>8,this[d+1]=l&255,d+2},a.prototype.writeUInt32LE=function(l,d,v){return l=+l,d=d>>>0,v||De(this,l,d,4,4294967295,0),this[d+3]=l>>>24,this[d+2]=l>>>16,this[d+1]=l>>>8,this[d]=l&255,d+4},a.prototype.writeUInt32BE=function(l,d,v){return l=+l,d=d>>>0,v||De(this,l,d,4,4294967295,0),this[d]=l>>>24,this[d+1]=l>>>16,this[d+2]=l>>>8,this[d+3]=l&255,d+4},a.prototype.writeIntLE=function(l,d,v,N){if(l=+l,d=d>>>0,!N){var z=Math.pow(2,8*v-1);De(this,l,d,v,z-1,-z)}var W=0,ue=1,he=0;for(this[d]=l&255;++W<v&&(ue*=256);)l<0&&he===0&&this[d+W-1]!==0&&(he=1),this[d+W]=(l/ue>>0)-he&255;return d+v},a.prototype.writeIntBE=function(l,d,v,N){if(l=+l,d=d>>>0,!N){var z=Math.pow(2,8*v-1);De(this,l,d,v,z-1,-z)}var W=v-1,ue=1,he=0;for(this[d+W]=l&255;--W>=0&&(ue*=256);)l<0&&he===0&&this[d+W+1]!==0&&(he=1),this[d+W]=(l/ue>>0)-he&255;return d+v},a.prototype.writeInt8=function(l,d,v){return l=+l,d=d>>>0,v||De(this,l,d,1,127,-128),l<0&&(l=255+l+1),this[d]=l&255,d+1},a.prototype.writeInt16LE=function(l,d,v){return l=+l,d=d>>>0,v||De(this,l,d,2,32767,-32768),this[d]=l&255,this[d+1]=l>>>8,d+2},a.prototype.writeInt16BE=function(l,d,v){return l=+l,d=d>>>0,v||De(this,l,d,2,32767,-32768),this[d]=l>>>8,this[d+1]=l&255,d+2},a.prototype.writeInt32LE=function(l,d,v){return l=+l,d=d>>>0,v||De(this,l,d,4,2147483647,-2147483648),this[d]=l&255,this[d+1]=l>>>8,this[d+2]=l>>>16,this[d+3]=l>>>24,d+4},a.prototype.writeInt32BE=function(l,d,v){return l=+l,d=d>>>0,v||De(this,l,d,4,2147483647,-2147483648),l<0&&(l=4294967295+l+1),this[d]=l>>>24,this[d+1]=l>>>16,this[d+2]=l>>>8,this[d+3]=l&255,d+4};function bt(y,l,d,v,N,z){if(d+v>y.length)throw new RangeError("Index out of range");if(d<0)throw new RangeError("Index out of range")}function pr(y,l,d,v,N){return l=+l,d=d>>>0,N||bt(y,l,d,4),r.write(y,l,d,v,23,4),d+4}a.prototype.writeFloatLE=function(l,d,v){return pr(this,l,d,!0,v)},a.prototype.writeFloatBE=function(l,d,v){return pr(this,l,d,!1,v)};function gr(y,l,d,v,N){return l=+l,d=d>>>0,N||bt(y,l,d,8),r.write(y,l,d,v,52,8),d+8}a.prototype.writeDoubleLE=function(l,d,v){return gr(this,l,d,!0,v)},a.prototype.writeDoubleBE=function(l,d,v){return gr(this,l,d,!1,v)},a.prototype.copy=function(l,d,v,N){if(!a.isBuffer(l))throw new TypeError("argument should be a Buffer");if(v||(v=0),!N&&N!==0&&(N=this.length),d>=l.length&&(d=l.length),d||(d=0),N>0&&N<v&&(N=v),N===v||l.length===0||this.length===0)return 0;if(d<0)throw new RangeError("targetStart out of bounds");if(v<0||v>=this.length)throw new RangeError("Index out of range");if(N<0)throw new RangeError("sourceEnd out of bounds");N>this.length&&(N=this.length),l.length-d<N-v&&(N=l.length-d+v);var z=N-v;if(this===l&&typeof Uint8Array.prototype.copyWithin=="function")this.copyWithin(d,v,N);else if(this===l&&v<d&&d<N)for(var W=z-1;W>=0;--W)l[W+d]=this[W+v];else Uint8Array.prototype.set.call(l,this.subarray(v,N),d);return z},a.prototype.fill=function(l,d,v,N){if(typeof l=="string"){if(typeof d=="string"?(N=d,d=0,v=this.length):typeof v=="string"&&(N=v,v=this.length),N!==void 0&&typeof N!="string")throw new TypeError("encoding must be a string");if(typeof N=="string"&&!a.isEncoding(N))throw new TypeError("Unknown encoding: "+N);if(l.length===1){var z=l.charCodeAt(0);(N==="utf8"&&z<128||N==="latin1")&&(l=z)}}else typeof l=="number"?l=l&255:typeof l=="boolean"&&(l=Number(l));if(d<0||this.length<d||this.length<v)throw new RangeError("Out of range index");if(v<=d)return this;d=d>>>0,v=v===void 0?this.length:v>>>0,l||(l=0);var W;if(typeof l=="number")for(W=d;W<v;++W)this[W]=l;else{var ue=a.isBuffer(l)?l:a.from(l,N),he=ue.length;if(he===0)throw new TypeError('The value "'+l+'" is invalid for argument "value"');for(W=0;W<v-d;++W)this[W+d]=ue[W%he]}return this};var O=/[^+/0-9A-Za-z-_]/g;function P(y){if(y=y.split("=")[0],y=y.trim().replace(O,""),y.length<2)return"";for(;y.length%4!==0;)y=y+"=";return y}function K(y,l){l=l||1/0;for(var d,v=y.length,N=null,z=[],W=0;W<v;++W){if(d=y.charCodeAt(W),d>55295&&d<57344){if(!N){if(d>56319){(l-=3)>-1&&z.push(239,191,189);continue}else if(W+1===v){(l-=3)>-1&&z.push(239,191,189);continue}N=d;continue}if(d<56320){(l-=3)>-1&&z.push(239,191,189),N=d;continue}d=(N-55296<<10|d-56320)+65536}else N&&(l-=3)>-1&&z.push(239,191,189);if(N=null,d<128){if((l-=1)<0)break;z.push(d)}else if(d<2048){if((l-=2)<0)break;z.push(d>>6|192,d&63|128)}else if(d<65536){if((l-=3)<0)break;z.push(d>>12|224,d>>6&63|128,d&63|128)}else if(d<1114112){if((l-=4)<0)break;z.push(d>>18|240,d>>12&63|128,d>>6&63|128,d&63|128)}else throw new Error("Invalid code point")}return z}function re(y){for(var l=[],d=0;d<y.length;++d)l.push(y.charCodeAt(d)&255);return l}function ce(y,l){for(var d,v,N,z=[],W=0;W<y.length&&!((l-=2)<0);++W)d=y.charCodeAt(W),v=d>>8,N=d%256,z.push(N),z.push(v);return z}function x(y){return t.toByteArray(P(y))}function A(y,l,d,v){for(var N=0;N<v&&!(N+d>=l.length||N>=y.length);++N)l[N+d]=y[N];return N}function $(y,l){return y instanceof l||y!=null&&y.constructor!=null&&y.constructor.name!=null&&y.constructor.name===l.name}function J(y){return y!==y}var xe=function(){for(var y="0123456789abcdef",l=new Array(256),d=0;d<16;++d)for(var v=d*16,N=0;N<16;++N)l[v+N]=y[d]+y[N];return l}()}(ui)),ui}var jt=mn();const Ub={lstatSync:()=>{}},Lb={...Ub,runtime:"browser"},li=e=>{if(e==null)return 0;if(typeof e=="string")return jt.Buffer.byteLength(e);if(typeof e.byteLength=="number")return e.byteLength;if(typeof e.length=="number")return e.length;if(typeof e.size=="number")return e.size;if(typeof e.path=="string")try{return Lb.lstatSync(e.path).size}catch{return}};var Tn={exports:{}},ou;function $r(){return ou||(ou=1,typeof Object.create=="function"?Tn.exports=function(t,r){r&&(t.super_=r,t.prototype=Object.create(r.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}))}:Tn.exports=function(t,r){if(r){t.super_=r;var n=function(){};n.prototype=r.prototype,t.prototype=new n,t.prototype.constructor=t}}),Tn.exports}var di,au;function Ud(){return au||(au=1,di=us().EventEmitter),di}const $b={},Hb=Object.freeze(Object.defineProperty({__proto__:null,default:$b},Symbol.toStringTag,{value:"Module"})),Ld=Vd(Hb);var fi,cu;function qb(){if(cu)return fi;cu=1;function e(R,k){var _=Object.keys(R);if(Object.getOwnPropertySymbols){var h=Object.getOwnPropertySymbols(R);k&&(h=h.filter(function(E){return Object.getOwnPropertyDescriptor(R,E).enumerable})),_.push.apply(_,h)}return _}function t(R){for(var k=1;k<arguments.length;k++){var _=arguments[k]!=null?arguments[k]:{};k%2?e(Object(_),!0).forEach(function(h){r(R,h,_[h])}):Object.getOwnPropertyDescriptors?Object.defineProperties(R,Object.getOwnPropertyDescriptors(_)):e(Object(_)).forEach(function(h){Object.defineProperty(R,h,Object.getOwnPropertyDescriptor(_,h))})}return R}function r(R,k,_){return k=o(k),k in R?Object.defineProperty(R,k,{value:_,enumerable:!0,configurable:!0,writable:!0}):R[k]=_,R}function n(R,k){if(!(R instanceof k))throw new TypeError("Cannot call a class as a function")}function s(R,k){for(var _=0;_<k.length;_++){var h=k[_];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(R,o(h.key),h)}}function i(R,k,_){return s(R.prototype,k),Object.defineProperty(R,"prototype",{writable:!1}),R}function o(R){var k=a(R,"string");return typeof k=="symbol"?k:String(k)}function a(R,k){if(typeof R!="object"||R===null)return R;var _=R[Symbol.toPrimitive];if(_!==void 0){var h=_.call(R,k);if(typeof h!="object")return h;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(R)}var c=mn(),u=c.Buffer,f=Ld,p=f.inspect,g=p&&p.custom||"inspect";function w(R,k,_){u.prototype.copy.call(R,k,_)}return fi=function(){function R(){n(this,R),this.head=null,this.tail=null,this.length=0}return i(R,[{key:"push",value:function(_){var h={data:_,next:null};this.length>0?this.tail.next=h:this.head=h,this.tail=h,++this.length}},{key:"unshift",value:function(_){var h={data:_,next:this.head};this.length===0&&(this.tail=h),this.head=h,++this.length}},{key:"shift",value:function(){if(this.length!==0){var _=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,_}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(_){if(this.length===0)return"";for(var h=this.head,E=""+h.data;h=h.next;)E+=_+h.data;return E}},{key:"concat",value:function(_){if(this.length===0)return u.alloc(0);for(var h=u.allocUnsafe(_>>>0),E=this.head,B=0;E;)w(E.data,h,B),B+=E.data.length,E=E.next;return h}},{key:"consume",value:function(_,h){var E;return _<this.head.data.length?(E=this.head.data.slice(0,_),this.head.data=this.head.data.slice(_)):_===this.head.data.length?E=this.shift():E=h?this._getString(_):this._getBuffer(_),E}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(_){var h=this.head,E=1,B=h.data;for(_-=B.length;h=h.next;){var m=h.data,S=_>m.length?m.length:_;if(S===m.length?B+=m:B+=m.slice(0,_),_-=S,_===0){S===m.length?(++E,h.next?this.head=h.next:this.head=this.tail=null):(this.head=h,h.data=m.slice(S));break}++E}return this.length-=E,B}},{key:"_getBuffer",value:function(_){var h=u.allocUnsafe(_),E=this.head,B=1;for(E.data.copy(h),_-=E.data.length;E=E.next;){var m=E.data,S=_>m.length?m.length:_;if(m.copy(h,h.length-_,0,S),_-=S,_===0){S===m.length?(++B,E.next?this.head=E.next:this.head=this.tail=null):(this.head=E,E.data=m.slice(S));break}++B}return this.length-=B,h}},{key:g,value:function(_,h){return p(this,t(t({},h),{},{depth:0,customInspect:!1}))}}]),R}(),fi}var hi,uu;function $d(){if(uu)return hi;uu=1;function e(o,a){var c=this,u=this._readableState&&this._readableState.destroyed,f=this._writableState&&this._writableState.destroyed;return u||f?(a?a(o):o&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,process.nextTick(s,this,o)):process.nextTick(s,this,o)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(o||null,function(p){!a&&p?c._writableState?c._writableState.errorEmitted?process.nextTick(r,c):(c._writableState.errorEmitted=!0,process.nextTick(t,c,p)):process.nextTick(t,c,p):a?(process.nextTick(r,c),a(p)):process.nextTick(r,c)}),this)}function t(o,a){s(o,a),r(o)}function r(o){o._writableState&&!o._writableState.emitClose||o._readableState&&!o._readableState.emitClose||o.emit("close")}function n(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function s(o,a){o.emit("error",a)}function i(o,a){var c=o._readableState,u=o._writableState;c&&c.autoDestroy||u&&u.autoDestroy?o.destroy(a):o.emit("error",a)}return hi={destroy:e,undestroy:n,errorOrDestroy:i},hi}var pi={},lu;function Hr(){if(lu)return pi;lu=1;function e(a,c){a.prototype=Object.create(c.prototype),a.prototype.constructor=a,a.__proto__=c}var t={};function r(a,c,u){u||(u=Error);function f(g,w,R){return typeof c=="string"?c:c(g,w,R)}var p=function(g){e(w,g);function w(R,k,_){return g.call(this,f(R,k,_))||this}return w}(u);p.prototype.name=u.name,p.prototype.code=a,t[a]=p}function n(a,c){if(Array.isArray(a)){var u=a.length;return a=a.map(function(f){return String(f)}),u>2?"one of ".concat(c," ").concat(a.slice(0,u-1).join(", "),", or ")+a[u-1]:u===2?"one of ".concat(c," ").concat(a[0]," or ").concat(a[1]):"of ".concat(c," ").concat(a[0])}else return"of ".concat(c," ").concat(String(a))}function s(a,c,u){return a.substr(0,c.length)===c}function i(a,c,u){return(u===void 0||u>a.length)&&(u=a.length),a.substring(u-c.length,u)===c}function o(a,c,u){return typeof u!="number"&&(u=0),u+c.length>a.length?!1:a.indexOf(c,u)!==-1}return r("ERR_INVALID_OPT_VALUE",function(a,c){return'The value "'+c+'" is invalid for option "'+a+'"'},TypeError),r("ERR_INVALID_ARG_TYPE",function(a,c,u){var f;typeof c=="string"&&s(c,"not ")?(f="must not be",c=c.replace(/^not /,"")):f="must be";var p;if(i(a," argument"))p="The ".concat(a," ").concat(f," ").concat(n(c,"type"));else{var g=o(a,".")?"property":"argument";p='The "'.concat(a,'" ').concat(g," ").concat(f," ").concat(n(c,"type"))}return p+=". Received type ".concat(typeof u),p},TypeError),r("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),r("ERR_METHOD_NOT_IMPLEMENTED",function(a){return"The "+a+" method is not implemented"}),r("ERR_STREAM_PREMATURE_CLOSE","Premature close"),r("ERR_STREAM_DESTROYED",function(a){return"Cannot call "+a+" after a stream was destroyed"}),r("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),r("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),r("ERR_STREAM_WRITE_AFTER_END","write after end"),r("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),r("ERR_UNKNOWN_ENCODING",function(a){return"Unknown encoding: "+a},TypeError),r("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),pi.codes=t,pi}var gi,du;function Hd(){if(du)return gi;du=1;var e=Hr().codes.ERR_INVALID_OPT_VALUE;function t(n,s,i){return n.highWaterMark!=null?n.highWaterMark:s?n[i]:null}function r(n,s,i,o){var a=t(s,o,i);if(a!=null){if(!(isFinite(a)&&Math.floor(a)===a)||a<0){var c=o?i:"highWaterMark";throw new e(c,a)}return Math.floor(a)}return n.objectMode?16:16*1024}return gi={getHighWaterMark:r},gi}var mi,fu;function zb(){if(fu)return mi;fu=1,mi=e;function e(r,n){if(t("noDeprecation"))return r;var s=!1;function i(){if(!s){if(t("throwDeprecation"))throw new Error(n);t("traceDeprecation")?console.trace(n):console.warn(n),s=!0}return r.apply(this,arguments)}return i}function t(r){try{if(!_r.localStorage)return!1}catch{return!1}var n=_r.localStorage[r];return n==null?!1:String(n).toLowerCase()==="true"}return mi}var yi,hu;function qd(){if(hu)return yi;hu=1,yi=I;function e(O){var P=this;this.next=null,this.entry=null,this.finish=function(){gr(P,O)}}var t;I.WritableState=b;var r={deprecate:zb()},n=Ud(),s=mn().Buffer,i=(typeof _r<"u"?_r:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function o(O){return s.from(O)}function a(O){return s.isBuffer(O)||O instanceof i}var c=$d(),u=Hd(),f=u.getHighWaterMark,p=Hr().codes,g=p.ERR_INVALID_ARG_TYPE,w=p.ERR_METHOD_NOT_IMPLEMENTED,R=p.ERR_MULTIPLE_CALLBACK,k=p.ERR_STREAM_CANNOT_PIPE,_=p.ERR_STREAM_DESTROYED,h=p.ERR_STREAM_NULL_VALUES,E=p.ERR_STREAM_WRITE_AFTER_END,B=p.ERR_UNKNOWN_ENCODING,m=c.errorOrDestroy;$r()(I,n);function S(){}function b(O,P,K){t=t||Nr(),O=O||{},typeof K!="boolean"&&(K=P instanceof t),this.objectMode=!!O.objectMode,K&&(this.objectMode=this.objectMode||!!O.writableObjectMode),this.highWaterMark=f(this,O,"writableHighWaterMark",K),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var re=O.decodeStrings===!1;this.decodeStrings=!re,this.defaultEncoding=O.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(ce){Mt(P,ce)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=O.emitClose!==!1,this.autoDestroy=!!O.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new e(this)}b.prototype.getBuffer=function(){for(var P=this.bufferedRequest,K=[];P;)K.push(P),P=P.next;return K},function(){try{Object.defineProperty(b.prototype,"buffer",{get:r.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}();var F;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(F=Function.prototype[Symbol.hasInstance],Object.defineProperty(I,Symbol.hasInstance,{value:function(P){return F.call(this,P)?!0:this!==I?!1:P&&P._writableState instanceof b}})):F=function(P){return P instanceof this};function I(O){t=t||Nr();var P=this instanceof t;if(!P&&!F.call(I,this))return new I(O);this._writableState=new b(O,this,P),this.writable=!0,O&&(typeof O.write=="function"&&(this._write=O.write),typeof O.writev=="function"&&(this._writev=O.writev),typeof O.destroy=="function"&&(this._destroy=O.destroy),typeof O.final=="function"&&(this._final=O.final)),n.call(this)}I.prototype.pipe=function(){m(this,new k)};function M(O,P){var K=new E;m(O,K),process.nextTick(P,K)}function V(O,P,K,re){var ce;return K===null?ce=new h:typeof K!="string"&&!P.objectMode&&(ce=new g("chunk",["string","Buffer"],K)),ce?(m(O,ce),process.nextTick(re,ce),!1):!0}I.prototype.write=function(O,P,K){var re=this._writableState,ce=!1,x=!re.objectMode&&a(O);return x&&!s.isBuffer(O)&&(O=o(O)),typeof P=="function"&&(K=P,P=null),x?P="buffer":P||(P=re.defaultEncoding),typeof K!="function"&&(K=S),re.ending?M(this,K):(x||V(this,re,O,K))&&(re.pendingcb++,ce=q(this,re,x,O,P,K)),ce},I.prototype.cork=function(){this._writableState.corked++},I.prototype.uncork=function(){var O=this._writableState;O.corked&&(O.corked--,!O.writing&&!O.corked&&!O.bufferProcessing&&O.bufferedRequest&&lt(this,O))},I.prototype.setDefaultEncoding=function(P){if(typeof P=="string"&&(P=P.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((P+"").toLowerCase())>-1))throw new B(P);return this._writableState.defaultEncoding=P,this},Object.defineProperty(I.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});function G(O,P,K){return!O.objectMode&&O.decodeStrings!==!1&&typeof P=="string"&&(P=s.from(P,K)),P}Object.defineProperty(I.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function q(O,P,K,re,ce,x){if(!K){var A=G(P,re,ce);re!==A&&(K=!0,ce="buffer",re=A)}var $=P.objectMode?1:re.length;P.length+=$;var J=P.length<P.highWaterMark;if(J||(P.needDrain=!0),P.writing||P.corked){var xe=P.lastBufferedRequest;P.lastBufferedRequest={chunk:re,encoding:ce,isBuf:K,callback:x,next:null},xe?xe.next=P.lastBufferedRequest:P.bufferedRequest=P.lastBufferedRequest,P.bufferedRequestCount+=1}else ie(O,P,!1,$,re,ce,x);return J}function ie(O,P,K,re,ce,x,A){P.writelen=re,P.writecb=A,P.writing=!0,P.sync=!0,P.destroyed?P.onwrite(new _("write")):K?O._writev(ce,P.onwrite):O._write(ce,x,P.onwrite),P.sync=!1}function oe(O,P,K,re,ce){--P.pendingcb,K?(process.nextTick(ce,re),process.nextTick(bt,O,P),O._writableState.errorEmitted=!0,m(O,re)):(ce(re),O._writableState.errorEmitted=!0,m(O,re),bt(O,P))}function Fe(O){O.writing=!1,O.writecb=null,O.length-=O.writelen,O.writelen=0}function Mt(O,P){var K=O._writableState,re=K.sync,ce=K.writecb;if(typeof ce!="function")throw new R;if(Fe(K),P)oe(O,K,re,P,ce);else{var x=wt(K)||O.destroyed;!x&&!K.corked&&!K.bufferProcessing&&K.bufferedRequest&&lt(O,K),re?process.nextTick(ut,O,K,x,ce):ut(O,K,x,ce)}}function ut(O,P,K,re){K||Oe(O,P),P.pendingcb--,re(),bt(O,P)}function Oe(O,P){P.length===0&&P.needDrain&&(P.needDrain=!1,O.emit("drain"))}function lt(O,P){P.bufferProcessing=!0;var K=P.bufferedRequest;if(O._writev&&K&&K.next){var re=P.bufferedRequestCount,ce=new Array(re),x=P.corkedRequestsFree;x.entry=K;for(var A=0,$=!0;K;)ce[A]=K,K.isBuf||($=!1),K=K.next,A+=1;ce.allBuffers=$,ie(O,P,!0,P.length,ce,"",x.finish),P.pendingcb++,P.lastBufferedRequest=null,x.next?(P.corkedRequestsFree=x.next,x.next=null):P.corkedRequestsFree=new e(P),P.bufferedRequestCount=0}else{for(;K;){var J=K.chunk,xe=K.encoding,y=K.callback,l=P.objectMode?1:J.length;if(ie(O,P,!1,l,J,xe,y),K=K.next,P.bufferedRequestCount--,P.writing)break}K===null&&(P.lastBufferedRequest=null)}P.bufferedRequest=K,P.bufferProcessing=!1}I.prototype._write=function(O,P,K){K(new w("_write()"))},I.prototype._writev=null,I.prototype.end=function(O,P,K){var re=this._writableState;return typeof O=="function"?(K=O,O=null,P=null):typeof P=="function"&&(K=P,P=null),O!=null&&this.write(O,P),re.corked&&(re.corked=1,this.uncork()),re.ending||pr(this,re,K),this},Object.defineProperty(I.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function wt(O){return O.ending&&O.length===0&&O.bufferedRequest===null&&!O.finished&&!O.writing}function ve(O,P){O._final(function(K){P.pendingcb--,K&&m(O,K),P.prefinished=!0,O.emit("prefinish"),bt(O,P)})}function De(O,P){!P.prefinished&&!P.finalCalled&&(typeof O._final=="function"&&!P.destroyed?(P.pendingcb++,P.finalCalled=!0,process.nextTick(ve,O,P)):(P.prefinished=!0,O.emit("prefinish")))}function bt(O,P){var K=wt(P);if(K&&(De(O,P),P.pendingcb===0&&(P.finished=!0,O.emit("finish"),P.autoDestroy))){var re=O._readableState;(!re||re.autoDestroy&&re.endEmitted)&&O.destroy()}return K}function pr(O,P,K){P.ending=!0,bt(O,P),K&&(P.finished?process.nextTick(K):O.once("finish",K)),P.ended=!0,O.writable=!1}function gr(O,P,K){var re=O.entry;for(O.entry=null;re;){var ce=re.callback;P.pendingcb--,ce(K),re=re.next}P.corkedRequestsFree.next=O}return Object.defineProperty(I.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState===void 0?!1:this._writableState.destroyed},set:function(P){this._writableState&&(this._writableState.destroyed=P)}}),I.prototype.destroy=c.destroy,I.prototype._undestroy=c.undestroy,I.prototype._destroy=function(O,P){P(O)},yi}var wi,pu;function Nr(){if(pu)return wi;pu=1;var e=Object.keys||function(u){var f=[];for(var p in u)f.push(p);return f};wi=o;var t=zd(),r=qd();$r()(o,t);for(var n=e(r.prototype),s=0;s<n.length;s++){var i=n[s];o.prototype[i]||(o.prototype[i]=r.prototype[i])}function o(u){if(!(this instanceof o))return new o(u);t.call(this,u),r.call(this,u),this.allowHalfOpen=!0,u&&(u.readable===!1&&(this.readable=!1),u.writable===!1&&(this.writable=!1),u.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",a)))}Object.defineProperty(o.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(o.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(o.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function a(){this._writableState.ended||process.nextTick(c,this)}function c(u){u.end()}return Object.defineProperty(o.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(f){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=f,this._writableState.destroyed=f)}}),wi}var bi={},kn={exports:{}};/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */var gu;function jb(){return gu||(gu=1,function(e,t){var r=mn(),n=r.Buffer;function s(o,a){for(var c in o)a[c]=o[c]}n.from&&n.alloc&&n.allocUnsafe&&n.allocUnsafeSlow?e.exports=r:(s(r,t),t.Buffer=i);function i(o,a,c){return n(o,a,c)}i.prototype=Object.create(n.prototype),s(n,i),i.from=function(o,a,c){if(typeof o=="number")throw new TypeError("Argument must not be a number");return n(o,a,c)},i.alloc=function(o,a,c){if(typeof o!="number")throw new TypeError("Argument must be a number");var u=n(o);return a!==void 0?typeof c=="string"?u.fill(a,c):u.fill(a):u.fill(0),u},i.allocUnsafe=function(o){if(typeof o!="number")throw new TypeError("Argument must be a number");return n(o)},i.allocUnsafeSlow=function(o){if(typeof o!="number")throw new TypeError("Argument must be a number");return r.SlowBuffer(o)}}(kn,kn.exports)),kn.exports}var mu;function yu(){if(mu)return bi;mu=1;var e=jb().Buffer,t=e.isEncoding||function(h){switch(h=""+h,h&&h.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function r(h){if(!h)return"utf8";for(var E;;)switch(h){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return h;default:if(E)return;h=(""+h).toLowerCase(),E=!0}}function n(h){var E=r(h);if(typeof E!="string"&&(e.isEncoding===t||!t(h)))throw new Error("Unknown encoding: "+h);return E||h}bi.StringDecoder=s;function s(h){this.encoding=n(h);var E;switch(this.encoding){case"utf16le":this.text=p,this.end=g,E=4;break;case"utf8":this.fillLast=c,E=4;break;case"base64":this.text=w,this.end=R,E=3;break;default:this.write=k,this.end=_;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=e.allocUnsafe(E)}s.prototype.write=function(h){if(h.length===0)return"";var E,B;if(this.lastNeed){if(E=this.fillLast(h),E===void 0)return"";B=this.lastNeed,this.lastNeed=0}else B=0;return B<h.length?E?E+this.text(h,B):this.text(h,B):E||""},s.prototype.end=f,s.prototype.text=u,s.prototype.fillLast=function(h){if(this.lastNeed<=h.length)return h.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);h.copy(this.lastChar,this.lastTotal-this.lastNeed,0,h.length),this.lastNeed-=h.length};function i(h){return h<=127?0:h>>5===6?2:h>>4===14?3:h>>3===30?4:h>>6===2?-1:-2}function o(h,E,B){var m=E.length-1;if(m<B)return 0;var S=i(E[m]);return S>=0?(S>0&&(h.lastNeed=S-1),S):--m<B||S===-2?0:(S=i(E[m]),S>=0?(S>0&&(h.lastNeed=S-2),S):--m<B||S===-2?0:(S=i(E[m]),S>=0?(S>0&&(S===2?S=0:h.lastNeed=S-3),S):0))}function a(h,E,B){if((E[0]&192)!==128)return h.lastNeed=0,"�";if(h.lastNeed>1&&E.length>1){if((E[1]&192)!==128)return h.lastNeed=1,"�";if(h.lastNeed>2&&E.length>2&&(E[2]&192)!==128)return h.lastNeed=2,"�"}}function c(h){var E=this.lastTotal-this.lastNeed,B=a(this,h);if(B!==void 0)return B;if(this.lastNeed<=h.length)return h.copy(this.lastChar,E,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);h.copy(this.lastChar,E,0,h.length),this.lastNeed-=h.length}function u(h,E){var B=o(this,h,E);if(!this.lastNeed)return h.toString("utf8",E);this.lastTotal=B;var m=h.length-(B-this.lastNeed);return h.copy(this.lastChar,0,m),h.toString("utf8",E,m)}function f(h){var E=h&&h.length?this.write(h):"";return this.lastNeed?E+"�":E}function p(h,E){if((h.length-E)%2===0){var B=h.toString("utf16le",E);if(B){var m=B.charCodeAt(B.length-1);if(m>=55296&&m<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=h[h.length-2],this.lastChar[1]=h[h.length-1],B.slice(0,-1)}return B}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=h[h.length-1],h.toString("utf16le",E,h.length-1)}function g(h){var E=h&&h.length?this.write(h):"";if(this.lastNeed){var B=this.lastTotal-this.lastNeed;return E+this.lastChar.toString("utf16le",0,B)}return E}function w(h,E){var B=(h.length-E)%3;return B===0?h.toString("base64",E):(this.lastNeed=3-B,this.lastTotal=3,B===1?this.lastChar[0]=h[h.length-1]:(this.lastChar[0]=h[h.length-2],this.lastChar[1]=h[h.length-1]),h.toString("base64",E,h.length-B))}function R(h){var E=h&&h.length?this.write(h):"";return this.lastNeed?E+this.lastChar.toString("base64",0,3-this.lastNeed):E}function k(h){return h.toString(this.encoding)}function _(h){return h&&h.length?this.write(h):""}return bi}var Ei,wu;function Do(){if(wu)return Ei;wu=1;var e=Hr().codes.ERR_STREAM_PREMATURE_CLOSE;function t(i){var o=!1;return function(){if(!o){o=!0;for(var a=arguments.length,c=new Array(a),u=0;u<a;u++)c[u]=arguments[u];i.apply(this,c)}}}function r(){}function n(i){return i.setHeader&&typeof i.abort=="function"}function s(i,o,a){if(typeof o=="function")return s(i,null,o);o||(o={}),a=t(a||r);var c=o.readable||o.readable!==!1&&i.readable,u=o.writable||o.writable!==!1&&i.writable,f=function(){i.writable||g()},p=i._writableState&&i._writableState.finished,g=function(){u=!1,p=!0,c||a.call(i)},w=i._readableState&&i._readableState.endEmitted,R=function(){c=!1,w=!0,u||a.call(i)},k=function(B){a.call(i,B)},_=function(){var B;if(c&&!w)return(!i._readableState||!i._readableState.ended)&&(B=new e),a.call(i,B);if(u&&!p)return(!i._writableState||!i._writableState.ended)&&(B=new e),a.call(i,B)},h=function(){i.req.on("finish",g)};return n(i)?(i.on("complete",g),i.on("abort",_),i.req?h():i.on("request",h)):u&&!i._writableState&&(i.on("end",f),i.on("close",f)),i.on("end",R),i.on("finish",g),o.error!==!1&&i.on("error",k),i.on("close",_),function(){i.removeListener("complete",g),i.removeListener("abort",_),i.removeListener("request",h),i.req&&i.req.removeListener("finish",g),i.removeListener("end",f),i.removeListener("close",f),i.removeListener("finish",g),i.removeListener("end",R),i.removeListener("error",k),i.removeListener("close",_)}}return Ei=s,Ei}var Si,bu;function Wb(){if(bu)return Si;bu=1;var e;function t(B,m,S){return m=r(m),m in B?Object.defineProperty(B,m,{value:S,enumerable:!0,configurable:!0,writable:!0}):B[m]=S,B}function r(B){var m=n(B,"string");return typeof m=="symbol"?m:String(m)}function n(B,m){if(typeof B!="object"||B===null)return B;var S=B[Symbol.toPrimitive];if(S!==void 0){var b=S.call(B,m||"default");if(typeof b!="object")return b;throw new TypeError("@@toPrimitive must return a primitive value.")}return(m==="string"?String:Number)(B)}var s=Do(),i=Symbol("lastResolve"),o=Symbol("lastReject"),a=Symbol("error"),c=Symbol("ended"),u=Symbol("lastPromise"),f=Symbol("handlePromise"),p=Symbol("stream");function g(B,m){return{value:B,done:m}}function w(B){var m=B[i];if(m!==null){var S=B[p].read();S!==null&&(B[u]=null,B[i]=null,B[o]=null,m(g(S,!1)))}}function R(B){process.nextTick(w,B)}function k(B,m){return function(S,b){B.then(function(){if(m[c]){S(g(void 0,!0));return}m[f](S,b)},b)}}var _=Object.getPrototypeOf(function(){}),h=Object.setPrototypeOf((e={get stream(){return this[p]},next:function(){var m=this,S=this[a];if(S!==null)return Promise.reject(S);if(this[c])return Promise.resolve(g(void 0,!0));if(this[p].destroyed)return new Promise(function(M,V){process.nextTick(function(){m[a]?V(m[a]):M(g(void 0,!0))})});var b=this[u],F;if(b)F=new Promise(k(b,this));else{var I=this[p].read();if(I!==null)return Promise.resolve(g(I,!1));F=new Promise(this[f])}return this[u]=F,F}},t(e,Symbol.asyncIterator,function(){return this}),t(e,"return",function(){var m=this;return new Promise(function(S,b){m[p].destroy(null,function(F){if(F){b(F);return}S(g(void 0,!0))})})}),e),_),E=function(m){var S,b=Object.create(h,(S={},t(S,p,{value:m,writable:!0}),t(S,i,{value:null,writable:!0}),t(S,o,{value:null,writable:!0}),t(S,a,{value:null,writable:!0}),t(S,c,{value:m._readableState.endEmitted,writable:!0}),t(S,f,{value:function(I,M){var V=b[p].read();V?(b[u]=null,b[i]=null,b[o]=null,I(g(V,!1))):(b[i]=I,b[o]=M)},writable:!0}),S));return b[u]=null,s(m,function(F){if(F&&F.code!=="ERR_STREAM_PREMATURE_CLOSE"){var I=b[o];I!==null&&(b[u]=null,b[i]=null,b[o]=null,I(F)),b[a]=F;return}var M=b[i];M!==null&&(b[u]=null,b[i]=null,b[o]=null,M(g(void 0,!0))),b[c]=!0}),m.on("readable",R.bind(null,b)),b};return Si=E,Si}var xi,Eu;function Kb(){return Eu||(Eu=1,xi=function(){throw new Error("Readable.from is not available in the browser")}),xi}var vi,Su;function zd(){if(Su)return vi;Su=1,vi=M;var e;M.ReadableState=I,us().EventEmitter;var t=function(A,$){return A.listeners($).length},r=Ud(),n=mn().Buffer,s=(typeof _r<"u"?_r:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function i(x){return n.from(x)}function o(x){return n.isBuffer(x)||x instanceof s}var a=Ld,c;a&&a.debuglog?c=a.debuglog("stream"):c=function(){};var u=qb(),f=$d(),p=Hd(),g=p.getHighWaterMark,w=Hr().codes,R=w.ERR_INVALID_ARG_TYPE,k=w.ERR_STREAM_PUSH_AFTER_EOF,_=w.ERR_METHOD_NOT_IMPLEMENTED,h=w.ERR_STREAM_UNSHIFT_AFTER_END_EVENT,E,B,m;$r()(M,r);var S=f.errorOrDestroy,b=["error","close","destroy","pause","resume"];function F(x,A,$){if(typeof x.prependListener=="function")return x.prependListener(A,$);!x._events||!x._events[A]?x.on(A,$):Array.isArray(x._events[A])?x._events[A].unshift($):x._events[A]=[$,x._events[A]]}function I(x,A,$){e=e||Nr(),x=x||{},typeof $!="boolean"&&($=A instanceof e),this.objectMode=!!x.objectMode,$&&(this.objectMode=this.objectMode||!!x.readableObjectMode),this.highWaterMark=g(this,x,"readableHighWaterMark",$),this.buffer=new u,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=x.emitClose!==!1,this.autoDestroy=!!x.autoDestroy,this.destroyed=!1,this.defaultEncoding=x.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,x.encoding&&(E||(E=yu().StringDecoder),this.decoder=new E(x.encoding),this.encoding=x.encoding)}function M(x){if(e=e||Nr(),!(this instanceof M))return new M(x);var A=this instanceof e;this._readableState=new I(x,this,A),this.readable=!0,x&&(typeof x.read=="function"&&(this._read=x.read),typeof x.destroy=="function"&&(this._destroy=x.destroy)),r.call(this)}Object.defineProperty(M.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0?!1:this._readableState.destroyed},set:function(A){this._readableState&&(this._readableState.destroyed=A)}}),M.prototype.destroy=f.destroy,M.prototype._undestroy=f.undestroy,M.prototype._destroy=function(x,A){A(x)},M.prototype.push=function(x,A){var $=this._readableState,J;return $.objectMode?J=!0:typeof x=="string"&&(A=A||$.defaultEncoding,A!==$.encoding&&(x=n.from(x,A),A=""),J=!0),V(this,x,A,!1,J)},M.prototype.unshift=function(x){return V(this,x,null,!0,!1)};function V(x,A,$,J,xe){c("readableAddChunk",A);var y=x._readableState;if(A===null)y.reading=!1,Mt(x,y);else{var l;if(xe||(l=q(y,A)),l)S(x,l);else if(y.objectMode||A&&A.length>0)if(typeof A!="string"&&!y.objectMode&&Object.getPrototypeOf(A)!==n.prototype&&(A=i(A)),J)y.endEmitted?S(x,new h):G(x,y,A,!0);else if(y.ended)S(x,new k);else{if(y.destroyed)return!1;y.reading=!1,y.decoder&&!$?(A=y.decoder.write(A),y.objectMode||A.length!==0?G(x,y,A,!1):lt(x,y)):G(x,y,A,!1)}else J||(y.reading=!1,lt(x,y))}return!y.ended&&(y.length<y.highWaterMark||y.length===0)}function G(x,A,$,J){A.flowing&&A.length===0&&!A.sync?(A.awaitDrain=0,x.emit("data",$)):(A.length+=A.objectMode?1:$.length,J?A.buffer.unshift($):A.buffer.push($),A.needReadable&&ut(x)),lt(x,A)}function q(x,A){var $;return!o(A)&&typeof A!="string"&&A!==void 0&&!x.objectMode&&($=new R("chunk",["string","Buffer","Uint8Array"],A)),$}M.prototype.isPaused=function(){return this._readableState.flowing===!1},M.prototype.setEncoding=function(x){E||(E=yu().StringDecoder);var A=new E(x);this._readableState.decoder=A,this._readableState.encoding=this._readableState.decoder.encoding;for(var $=this._readableState.buffer.head,J="";$!==null;)J+=A.write($.data),$=$.next;return this._readableState.buffer.clear(),J!==""&&this._readableState.buffer.push(J),this._readableState.length=J.length,this};var ie=1073741824;function oe(x){return x>=ie?x=ie:(x--,x|=x>>>1,x|=x>>>2,x|=x>>>4,x|=x>>>8,x|=x>>>16,x++),x}function Fe(x,A){return x<=0||A.length===0&&A.ended?0:A.objectMode?1:x!==x?A.flowing&&A.length?A.buffer.head.data.length:A.length:(x>A.highWaterMark&&(A.highWaterMark=oe(x)),x<=A.length?x:A.ended?A.length:(A.needReadable=!0,0))}M.prototype.read=function(x){c("read",x),x=parseInt(x,10);var A=this._readableState,$=x;if(x!==0&&(A.emittedReadable=!1),x===0&&A.needReadable&&((A.highWaterMark!==0?A.length>=A.highWaterMark:A.length>0)||A.ended))return c("read: emitReadable",A.length,A.ended),A.length===0&&A.ended?K(this):ut(this),null;if(x=Fe(x,A),x===0&&A.ended)return A.length===0&&K(this),null;var J=A.needReadable;c("need readable",J),(A.length===0||A.length-x<A.highWaterMark)&&(J=!0,c("length less than watermark",J)),A.ended||A.reading?(J=!1,c("reading or ended",J)):J&&(c("do read"),A.reading=!0,A.sync=!0,A.length===0&&(A.needReadable=!0),this._read(A.highWaterMark),A.sync=!1,A.reading||(x=Fe($,A)));var xe;return x>0?xe=P(x,A):xe=null,xe===null?(A.needReadable=A.length<=A.highWaterMark,x=0):(A.length-=x,A.awaitDrain=0),A.length===0&&(A.ended||(A.needReadable=!0),$!==x&&A.ended&&K(this)),xe!==null&&this.emit("data",xe),xe};function Mt(x,A){if(c("onEofChunk"),!A.ended){if(A.decoder){var $=A.decoder.end();$&&$.length&&(A.buffer.push($),A.length+=A.objectMode?1:$.length)}A.ended=!0,A.sync?ut(x):(A.needReadable=!1,A.emittedReadable||(A.emittedReadable=!0,Oe(x)))}}function ut(x){var A=x._readableState;c("emitReadable",A.needReadable,A.emittedReadable),A.needReadable=!1,A.emittedReadable||(c("emitReadable",A.flowing),A.emittedReadable=!0,process.nextTick(Oe,x))}function Oe(x){var A=x._readableState;c("emitReadable_",A.destroyed,A.length,A.ended),!A.destroyed&&(A.length||A.ended)&&(x.emit("readable"),A.emittedReadable=!1),A.needReadable=!A.flowing&&!A.ended&&A.length<=A.highWaterMark,O(x)}function lt(x,A){A.readingMore||(A.readingMore=!0,process.nextTick(wt,x,A))}function wt(x,A){for(;!A.reading&&!A.ended&&(A.length<A.highWaterMark||A.flowing&&A.length===0);){var $=A.length;if(c("maybeReadMore read 0"),x.read(0),$===A.length)break}A.readingMore=!1}M.prototype._read=function(x){S(this,new _("_read()"))},M.prototype.pipe=function(x,A){var $=this,J=this._readableState;switch(J.pipesCount){case 0:J.pipes=x;break;case 1:J.pipes=[J.pipes,x];break;default:J.pipes.push(x);break}J.pipesCount+=1,c("pipe count=%d opts=%j",J.pipesCount,A);var xe=(!A||A.end!==!1)&&x!==process.stdout&&x!==process.stderr,y=xe?d:Ae;J.endEmitted?process.nextTick(y):$.once("end",y),x.on("unpipe",l);function l(pe,ht){c("onunpipe"),pe===$&&ht&&ht.hasUnpiped===!1&&(ht.hasUnpiped=!0,z())}function d(){c("onend"),x.end()}var v=ve($);x.on("drain",v);var N=!1;function z(){c("cleanup"),x.removeListener("close",he),x.removeListener("finish",ge),x.removeListener("drain",v),x.removeListener("error",ue),x.removeListener("unpipe",l),$.removeListener("end",d),$.removeListener("end",Ae),$.removeListener("data",W),N=!0,J.awaitDrain&&(!x._writableState||x._writableState.needDrain)&&v()}$.on("data",W);function W(pe){c("ondata");var ht=x.write(pe);c("dest.write",ht),ht===!1&&((J.pipesCount===1&&J.pipes===x||J.pipesCount>1&&ce(J.pipes,x)!==-1)&&!N&&(c("false write response, pause",J.awaitDrain),J.awaitDrain++),$.pause())}function ue(pe){c("onerror",pe),Ae(),x.removeListener("error",ue),t(x,"error")===0&&S(x,pe)}F(x,"error",ue);function he(){x.removeListener("finish",ge),Ae()}x.once("close",he);function ge(){c("onfinish"),x.removeListener("close",he),Ae()}x.once("finish",ge);function Ae(){c("unpipe"),$.unpipe(x)}return x.emit("pipe",$),J.flowing||(c("pipe resume"),$.resume()),x};function ve(x){return function(){var $=x._readableState;c("pipeOnDrain",$.awaitDrain),$.awaitDrain&&$.awaitDrain--,$.awaitDrain===0&&t(x,"data")&&($.flowing=!0,O(x))}}M.prototype.unpipe=function(x){var A=this._readableState,$={hasUnpiped:!1};if(A.pipesCount===0)return this;if(A.pipesCount===1)return x&&x!==A.pipes?this:(x||(x=A.pipes),A.pipes=null,A.pipesCount=0,A.flowing=!1,x&&x.emit("unpipe",this,$),this);if(!x){var J=A.pipes,xe=A.pipesCount;A.pipes=null,A.pipesCount=0,A.flowing=!1;for(var y=0;y<xe;y++)J[y].emit("unpipe",this,{hasUnpiped:!1});return this}var l=ce(A.pipes,x);return l===-1?this:(A.pipes.splice(l,1),A.pipesCount-=1,A.pipesCount===1&&(A.pipes=A.pipes[0]),x.emit("unpipe",this,$),this)},M.prototype.on=function(x,A){var $=r.prototype.on.call(this,x,A),J=this._readableState;return x==="data"?(J.readableListening=this.listenerCount("readable")>0,J.flowing!==!1&&this.resume()):x==="readable"&&!J.endEmitted&&!J.readableListening&&(J.readableListening=J.needReadable=!0,J.flowing=!1,J.emittedReadable=!1,c("on readable",J.length,J.reading),J.length?ut(this):J.reading||process.nextTick(bt,this)),$},M.prototype.addListener=M.prototype.on,M.prototype.removeListener=function(x,A){var $=r.prototype.removeListener.call(this,x,A);return x==="readable"&&process.nextTick(De,this),$},M.prototype.removeAllListeners=function(x){var A=r.prototype.removeAllListeners.apply(this,arguments);return(x==="readable"||x===void 0)&&process.nextTick(De,this),A};function De(x){var A=x._readableState;A.readableListening=x.listenerCount("readable")>0,A.resumeScheduled&&!A.paused?A.flowing=!0:x.listenerCount("data")>0&&x.resume()}function bt(x){c("readable nexttick read 0"),x.read(0)}M.prototype.resume=function(){var x=this._readableState;return x.flowing||(c("resume"),x.flowing=!x.readableListening,pr(this,x)),x.paused=!1,this};function pr(x,A){A.resumeScheduled||(A.resumeScheduled=!0,process.nextTick(gr,x,A))}function gr(x,A){c("resume",A.reading),A.reading||x.read(0),A.resumeScheduled=!1,x.emit("resume"),O(x),A.flowing&&!A.reading&&x.read(0)}M.prototype.pause=function(){return c("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(c("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this};function O(x){var A=x._readableState;for(c("flow",A.flowing);A.flowing&&x.read()!==null;);}M.prototype.wrap=function(x){var A=this,$=this._readableState,J=!1;x.on("end",function(){if(c("wrapped end"),$.decoder&&!$.ended){var l=$.decoder.end();l&&l.length&&A.push(l)}A.push(null)}),x.on("data",function(l){if(c("wrapped data"),$.decoder&&(l=$.decoder.write(l)),!($.objectMode&&l==null)&&!(!$.objectMode&&(!l||!l.length))){var d=A.push(l);d||(J=!0,x.pause())}});for(var xe in x)this[xe]===void 0&&typeof x[xe]=="function"&&(this[xe]=function(d){return function(){return x[d].apply(x,arguments)}}(xe));for(var y=0;y<b.length;y++)x.on(b[y],this.emit.bind(this,b[y]));return this._read=function(l){c("wrapped _read",l),J&&(J=!1,x.resume())},this},typeof Symbol=="function"&&(M.prototype[Symbol.asyncIterator]=function(){return B===void 0&&(B=Wb()),B(this)}),Object.defineProperty(M.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(M.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(M.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(A){this._readableState&&(this._readableState.flowing=A)}}),M._fromList=P,Object.defineProperty(M.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}});function P(x,A){if(A.length===0)return null;var $;return A.objectMode?$=A.buffer.shift():!x||x>=A.length?(A.decoder?$=A.buffer.join(""):A.buffer.length===1?$=A.buffer.first():$=A.buffer.concat(A.length),A.buffer.clear()):$=A.buffer.consume(x,A.decoder),$}function K(x){var A=x._readableState;c("endReadable",A.endEmitted),A.endEmitted||(A.ended=!0,process.nextTick(re,A,x))}function re(x,A){if(c("endReadableNT",x.endEmitted,x.length),!x.endEmitted&&x.length===0&&(x.endEmitted=!0,A.readable=!1,A.emit("end"),x.autoDestroy)){var $=A._writableState;(!$||$.autoDestroy&&$.finished)&&A.destroy()}}typeof Symbol=="function"&&(M.from=function(x,A){return m===void 0&&(m=Kb()),m(M,x,A)});function ce(x,A){for(var $=0,J=x.length;$<J;$++)if(x[$]===A)return $;return-1}return vi}var Ai,xu;function jd(){if(xu)return Ai;xu=1,Ai=a;var e=Hr().codes,t=e.ERR_METHOD_NOT_IMPLEMENTED,r=e.ERR_MULTIPLE_CALLBACK,n=e.ERR_TRANSFORM_ALREADY_TRANSFORMING,s=e.ERR_TRANSFORM_WITH_LENGTH_0,i=Nr();$r()(a,i);function o(f,p){var g=this._transformState;g.transforming=!1;var w=g.writecb;if(w===null)return this.emit("error",new r);g.writechunk=null,g.writecb=null,p!=null&&this.push(p),w(f);var R=this._readableState;R.reading=!1,(R.needReadable||R.length<R.highWaterMark)&&this._read(R.highWaterMark)}function a(f){if(!(this instanceof a))return new a(f);i.call(this,f),this._transformState={afterTransform:o.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,f&&(typeof f.transform=="function"&&(this._transform=f.transform),typeof f.flush=="function"&&(this._flush=f.flush)),this.on("prefinish",c)}function c(){var f=this;typeof this._flush=="function"&&!this._readableState.destroyed?this._flush(function(p,g){u(f,p,g)}):u(this,null,null)}a.prototype.push=function(f,p){return this._transformState.needTransform=!1,i.prototype.push.call(this,f,p)},a.prototype._transform=function(f,p,g){g(new t("_transform()"))},a.prototype._write=function(f,p,g){var w=this._transformState;if(w.writecb=g,w.writechunk=f,w.writeencoding=p,!w.transforming){var R=this._readableState;(w.needTransform||R.needReadable||R.length<R.highWaterMark)&&this._read(R.highWaterMark)}},a.prototype._read=function(f){var p=this._transformState;p.writechunk!==null&&!p.transforming?(p.transforming=!0,this._transform(p.writechunk,p.writeencoding,p.afterTransform)):p.needTransform=!0},a.prototype._destroy=function(f,p){i.prototype._destroy.call(this,f,function(g){p(g)})};function u(f,p,g){if(p)return f.emit("error",p);if(g!=null&&f.push(g),f._writableState.length)throw new s;if(f._transformState.transforming)throw new n;return f.push(null)}return Ai}var Ci,vu;function Vb(){if(vu)return Ci;vu=1,Ci=t;var e=jd();$r()(t,e);function t(r){if(!(this instanceof t))return new t(r);e.call(this,r)}return t.prototype._transform=function(r,n,s){s(null,r)},Ci}var Ri,Au;function Gb(){if(Au)return Ri;Au=1;var e;function t(g){var w=!1;return function(){w||(w=!0,g.apply(void 0,arguments))}}var r=Hr().codes,n=r.ERR_MISSING_ARGS,s=r.ERR_STREAM_DESTROYED;function i(g){if(g)throw g}function o(g){return g.setHeader&&typeof g.abort=="function"}function a(g,w,R,k){k=t(k);var _=!1;g.on("close",function(){_=!0}),e===void 0&&(e=Do()),e(g,{readable:w,writable:R},function(E){if(E)return k(E);_=!0,k()});var h=!1;return function(E){if(!_&&!h){if(h=!0,o(g))return g.abort();if(typeof g.destroy=="function")return g.destroy();k(E||new s("pipe"))}}}function c(g){g()}function u(g,w){return g.pipe(w)}function f(g){return!g.length||typeof g[g.length-1]!="function"?i:g.pop()}function p(){for(var g=arguments.length,w=new Array(g),R=0;R<g;R++)w[R]=arguments[R];var k=f(w);if(Array.isArray(w[0])&&(w=w[0]),w.length<2)throw new n("streams");var _,h=w.map(function(E,B){var m=B<w.length-1,S=B>0;return a(E,m,S,function(b){_||(_=b),b&&h.forEach(c),!m&&(h.forEach(c),k(_))})});return w.reduce(u)}return Ri=p,Ri}var _i,Cu;function Xb(){if(Cu)return _i;Cu=1,_i=r;var e=us().EventEmitter,t=$r();t(r,e),r.Readable=zd(),r.Writable=qd(),r.Duplex=Nr(),r.Transform=jd(),r.PassThrough=Vb(),r.finished=Do(),r.pipeline=Gb(),r.Stream=r;function r(){e.call(this)}return r.prototype.pipe=function(n,s){var i=this;function o(w){n.writable&&n.write(w)===!1&&i.pause&&i.pause()}i.on("data",o);function a(){i.readable&&i.resume&&i.resume()}n.on("drain",a),!n._isStdio&&(!s||s.end!==!1)&&(i.on("end",u),i.on("close",f));var c=!1;function u(){c||(c=!0,n.end())}function f(){c||(c=!0,typeof n.destroy=="function"&&n.destroy())}function p(w){if(g(),e.listenerCount(this,"error")===0)throw w}i.on("error",p),n.on("error",p);function g(){i.removeListener("data",o),n.removeListener("drain",a),i.removeListener("end",u),i.removeListener("close",f),i.removeListener("error",p),n.removeListener("error",p),i.removeListener("end",g),i.removeListener("close",g),n.removeListener("close",g)}return i.on("end",g),i.on("close",g),n.on("close",g),n.emit("pipe",i),n},_i}var Zb=Xb();async function*Ti(e,t,r){let n=1;const s={chunks:[],length:0};for await(const i of r(e))for(s.chunks.push(i),s.length+=i.byteLength;s.length>t;){const o=s.chunks.length>1?jt.Buffer.concat(s.chunks):s.chunks[0];yield{partNumber:n,data:o.subarray(0,t)},s.chunks=[o.subarray(t)],s.length=s.chunks[0].byteLength,n+=1}yield{partNumber:n,data:s.chunks.length!==1?jt.Buffer.concat(s.chunks):s.chunks[0],lastPart:!0}}async function*Ru(e,t){let r=1,n=0,s=t;for(;s<e.byteLength;)yield{partNumber:r,data:e.subarray(n,s)},r+=1,n=s,s=n+t;yield{partNumber:r,data:e.subarray(n),lastPart:!0}}async function*Yb(e){for await(const t of e)jt.Buffer.isBuffer(t)||t instanceof Uint8Array?yield t:yield jt.Buffer.from(t)}async function*_u(e){const t=e.getReader();try{for(;;){const{done:r,value:n}=await t.read();if(r)return;jt.Buffer.isBuffer(n)||n instanceof Uint8Array?yield n:yield jt.Buffer.from(n)}}catch(r){throw r}finally{t.releaseLock()}}const Qb=(e,t)=>{if(e instanceof Uint8Array)return Ru(e,t);if(e instanceof Zb.Readable)return Ti(e,t,Yb);if(e instanceof String||typeof e=="string")return Ru(jt.Buffer.from(e),t);if(typeof e.stream=="function")return Ti(e.stream(),t,_u);if(e instanceof ReadableStream)return Ti(e,t,_u);throw new Error("Body Data is unsupported format, expected data to be one of: string | Uint8Array | Buffer | Readable | ReadableStream | Blob;.")},Sr=class Sr extends ci.EventEmitter{constructor(r){super();X(this,"MAX_PARTS",1e4);X(this,"queueSize",4);X(this,"partSize",Sr.MIN_PART_SIZE);X(this,"leavePartsOnError",!1);X(this,"tags",[]);X(this,"client");X(this,"params");X(this,"totalBytes");X(this,"bytesUploadedSoFar");X(this,"abortController");X(this,"concurrentUploaders",[]);X(this,"createMultiPartPromise");X(this,"abortMultipartUploadCommand",null);X(this,"uploadedParts",[]);X(this,"uploadEnqueuedPartsCount",0);X(this,"uploadId");X(this,"uploadEvent");X(this,"isMultiPart",!0);X(this,"singleUploadResult");X(this,"sent",!1);this.queueSize=r.queueSize||this.queueSize,this.partSize=r.partSize||this.partSize,this.leavePartsOnError=r.leavePartsOnError||this.leavePartsOnError,this.tags=r.tags||this.tags,this.client=r.client,this.params=r.params,this.__validateInput(),this.totalBytes=li(this.params.Body),this.bytesUploadedSoFar=0,this.abortController=r.abortController??new Fb}async abort(){this.abortController.abort()}async done(){if(this.sent)throw new Error("@aws-sdk/lib-storage: this instance of Upload has already executed .done(). Create a new instance.");return this.sent=!0,await Promise.race([this.__doMultipartUpload(),this.__abortTimeout(this.abortController.signal)])}on(r,n){return this.uploadEvent=r,super.on(r,n)}async __uploadUsingPut(r){var k;this.isMultiPart=!1;const n={...this.params,Body:r.data},s=this.client.config,i=s.requestHandler,o=i instanceof ci.EventEmitter?i:null,a=_=>{this.bytesUploadedSoFar=_.loaded,this.totalBytes=_.total,this.__notifyProgress({loaded:this.bytesUploadedSoFar,total:this.totalBytes,part:r.partNumber,Key:this.params.Key,Bucket:this.params.Bucket})};o!==null&&o.on("xhr.upload.progress",a);const c=await Promise.all([this.client.send(new tu(n)),(k=s==null?void 0:s.endpoint)==null?void 0:k.call(s)]),u=c[0];let f=c[1];if(f||(f=co(await bl(n,tu,{...s}))),!f)throw new Error('Could not resolve endpoint from S3 "client.config.endpoint()" nor EndpointsV2.');o!==null&&o.off("xhr.upload.progress",a);const p=this.params.Key.split("/").map(_=>On(_)).join("/"),g=On(this.params.Bucket),w=(()=>{const _=f.hostname.startsWith(`${g}.`),h=this.client.config.forcePathStyle,E=f.port?`:${f.port}`:"";return h?`${f.protocol}//${f.hostname}${E}/${g}/${p}`:_?`${f.protocol}//${f.hostname}${E}/${p}`:`${f.protocol}//${g}.${f.hostname}${E}/${p}`})();this.singleUploadResult={...u,Bucket:this.params.Bucket,Key:this.params.Key,Location:w};const R=li(r.data);this.__notifyProgress({loaded:R,total:R,part:1,Key:this.params.Key,Bucket:this.params.Bucket})}async __createMultipartUpload(){const r=await this.client.config.requestChecksumCalculation();if(!this.createMultiPartPromise){const n={...this.params,Body:void 0};r==="WHEN_SUPPORTED"&&(n.ChecksumAlgorithm=this.params.ChecksumAlgorithm||T0.CRC32),this.createMultiPartPromise=this.client.send(new Nb(n)).then(s=>(this.abortMultipartUploadCommand=new Rb({Bucket:this.params.Bucket,Key:this.params.Key,UploadId:s.UploadId}),s))}return this.createMultiPartPromise}async __doConcurrentUpload(r){for await(const n of r){if(this.uploadEnqueuedPartsCount>this.MAX_PARTS)throw new Error(`Exceeded ${this.MAX_PARTS} parts in multipart upload to Bucket: ${this.params.Bucket} Key: ${this.params.Key}.`);if(this.abortController.signal.aborted)return;if(n.partNumber===1&&n.lastPart)return await this.__uploadUsingPut(n);if(!this.uploadId){const{UploadId:f}=await this.__createMultipartUpload();if(this.uploadId=f,this.abortController.signal.aborted)return}const s=li(n.data)||0,i=this.client.config.requestHandler,o=i instanceof ci.EventEmitter?i:null;let a=0;const c=(f,p)=>{(Number(p.query.partNumber)||-1)===n.partNumber&&(f.total&&s&&(this.bytesUploadedSoFar+=f.loaded-a,a=f.loaded),this.__notifyProgress({loaded:this.bytesUploadedSoFar,total:this.totalBytes,part:n.partNumber,Key:this.params.Key,Bucket:this.params.Bucket}))};o!==null&&o.on("xhr.upload.progress",c),this.uploadEnqueuedPartsCount+=1;const u=await this.client.send(new Ib({...this.params,ContentLength:void 0,UploadId:this.uploadId,Body:n.data,PartNumber:n.partNumber}));if(o!==null&&o.off("xhr.upload.progress",c),this.abortController.signal.aborted)return;if(!u.ETag)throw new Error(`Part ${n.partNumber} is missing ETag in UploadPart response. Missing Bucket CORS configuration for ETag header?`);this.uploadedParts.push({PartNumber:n.partNumber,ETag:u.ETag,...u.ChecksumCRC32&&{ChecksumCRC32:u.ChecksumCRC32},...u.ChecksumCRC32C&&{ChecksumCRC32C:u.ChecksumCRC32C},...u.ChecksumSHA1&&{ChecksumSHA1:u.ChecksumSHA1},...u.ChecksumSHA256&&{ChecksumSHA256:u.ChecksumSHA256}}),o===null&&(this.bytesUploadedSoFar+=s),this.__notifyProgress({loaded:this.bytesUploadedSoFar,total:this.totalBytes,part:n.partNumber,Key:this.params.Key,Bucket:this.params.Bucket})}}async __doMultipartUpload(){const r=Qb(this.params.Body,this.partSize),n=[];for(let i=0;i<this.queueSize;i++){const o=this.__doConcurrentUpload(r).catch(a=>{n.push(a)});this.concurrentUploaders.push(o)}if(await Promise.all(this.concurrentUploaders),n.length>=1)throw await this.markUploadAsAborted(),n[0];if(this.abortController.signal.aborted)throw await this.markUploadAsAborted(),Object.assign(new Error("Upload aborted."),{name:"AbortError"});let s;if(this.isMultiPart){this.uploadedParts.sort((o,a)=>o.PartNumber-a.PartNumber);const i={...this.params,Body:void 0,UploadId:this.uploadId,MultipartUpload:{Parts:this.uploadedParts}};s=await this.client.send(new Bb(i)),typeof(s==null?void 0:s.Location)=="string"&&s.Location.includes("%2F")&&(s.Location=s.Location.replace(/%2F/g,"/"))}else s=this.singleUploadResult;return this.abortMultipartUploadCommand=null,this.tags.length&&await this.client.send(new Mb({...this.params,Tagging:{TagSet:this.tags}})),s}async markUploadAsAborted(){this.uploadId&&!this.leavePartsOnError&&this.abortMultipartUploadCommand!==null&&(await this.client.send(this.abortMultipartUploadCommand),this.abortMultipartUploadCommand=null)}__notifyProgress(r){this.uploadEvent&&this.emit(this.uploadEvent,r)}async __abortTimeout(r){return new Promise((n,s)=>{r.onabort=()=>{const i=new Error("Upload aborted.");i.name="AbortError",s(i)}})}__validateInput(){if(!this.params)throw new Error("InputError: Upload requires params to be passed to upload.");if(!this.client)throw new Error("InputError: Upload requires a AWS client to do uploads with.");if(this.partSize<Sr.MIN_PART_SIZE)throw new Error(`EntityTooSmall: Your proposed upload partsize [${this.partSize}] is smaller than the minimum allowed size [${Sr.MIN_PART_SIZE}] (5MB)`);if(this.queueSize<1)throw new Error("Queue size: Must have at least one uploading queue.")}};X(Sr,"MIN_PART_SIZE",1024*1024*5);let ji=Sr;class dE{constructor(t,r,n){X(this,"s3Client");X(this,"bucket");X(this,"callbacks");this.s3Client=new Cb({...t,forcePathStyle:!0,region:t.region||"us-east-1"}),this.bucket=r,this.callbacks=n}async uploadAll(t){const r=[];for(let n=0;n<t.length;n++){const s=t.item(n);if(s){const i=await this.uploadContent(s);r.push(i)}}return r}async uploadContent(t){var c,u,f;const r=new Date().toISOString().replace(/[-:]/g,"").replace(/T/,"-").replace(/\..+/,"").slice(2),n=t.name,s=`upload/${r}/${n}`;let i=5,o="error",a=!0;do try{let p=t.type;p.indexOf(";")>-1&&(p=p.substring(0,p.indexOf(";")));const g=new ji({client:this.s3Client,params:{Bucket:this.bucket,Key:s,Body:t,ContentType:p}});g.on("httpUploadProgress",w=>{var R;if(w.total&&((R=this.callbacks)!=null&&R.onProgress)){const k=Math.round((w.loaded||50)/w.total*100);this.callbacks.onProgress(n,k)}}),await g.done(),(c=this.callbacks)!=null&&c.onSuccess&&this.callbacks.onSuccess(n),o="completed",a=!1}catch(p){if(o="error",p instanceof Error&&(p.name==="NetworkingError"||p.message.includes("Network")))(u=this.callbacks)!=null&&u.onRetry&&this.callbacks.onRetry(n,i),i--,await new Promise(g=>setTimeout(g,25*i));else{a=!1;const g=p instanceof Error?p.message:"Unknown error";(f=this.callbacks)!=null&&f.onError&&this.callbacks.onError(n,g)}}while(a&&i>0);return o}}export{oE as L,dE as M,aE as U,cE as v};
